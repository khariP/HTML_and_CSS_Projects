(window.webpackJsonp=window.webpackJsonp||[]).push([["embed"],{"+w1B":function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";var n=r(8).default;t.__esModule=!0;var i=n(r(1)),a=n(r(2)),s=r(3),o=r(4),l=n(r(5)),u=n(r(6)),c=n(r(7)),d=i.default.create;function f(){var e=d();return e.compile=function(t,r){return o.compile(t,r,e)},e.precompile=function(t,r){return o.precompile(t,r,e)},e.AST=a.default,e.Compiler=o.Compiler,e.JavaScriptCompiler=l.default,e.Parser=s.parser,e.parse=s.parse,e}var p=f();p.create=f,c.default(p),p.Visitor=u.default,p.default=p,t.default=p,e.exports=t.default},function(e,t,r){"use strict";var n=r(9).default,i=r(8).default;t.__esModule=!0;var a=n(r(10)),s=i(r(11)),o=i(r(12)),l=n(r(13)),u=n(r(14)),c=i(r(7));function d(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=s.default,e.Exception=o.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var f=d();f.create=d,c.default(f),f.default=f,t.default=f,e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n={Program:function(e,t,r,n){this.loc=n,this.type="Program",this.body=e,this.blockParams=t,this.strip=r},MustacheStatement:function(e,t,r,n,i,a){this.loc=a,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=r,this.escaped=n,this.strip=i},BlockStatement:function(e,t,r,n,i,a,s,o,l){this.loc=l,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=r,this.program=n,this.inverse=i,this.openStrip=a,this.inverseStrip=s,this.closeStrip=o},PartialStatement:function(e,t,r,n,i){this.loc=i,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=r,this.indent="",this.strip=n},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,r){this.loc=r,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,r,n){this.loc=n,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=r},PathExpression:function(e,t,r,n,i){this.loc=i,this.type="PathExpression",this.data=e,this.original=n,this.parts=r,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},UndefinedLiteral:function(e){this.loc=e,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(e){this.loc=e,this.type="NullLiteral",this.original=this.value=null},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,r){this.loc=r,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};t.default=n,e.exports=t.default},function(e,t,r){"use strict";var n=r(8).default,i=r(9).default;t.__esModule=!0,t.parse=function(e,t){if("Program"===e.type)return e;return a.default.yy=c,c.locInfo=function(e){return new c.SourceLocation(t&&t.srcName,e)},(new o.default).accept(a.default.parse(e))};var a=n(r(15)),s=n(r(2)),o=n(r(16)),l=i(r(17)),u=r(13);t.parser=a.default;var c={};u.extend(c,l,s.default)},function(e,t,r){"use strict";var n=r(8).default;t.__esModule=!0,t.Compiler=l,t.precompile=function(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var n=r.parse(e,t),a=(new r.Compiler).compile(n,t);return(new r.JavaScriptCompiler).compile(a,t)},t.compile=function(e,t,r){var n=void 0===arguments[1]?{}:arguments[1];if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in n||(n.data=!0);n.compat&&(n.useDepths=!0);var a=void 0;function s(){var t=r.parse(e,n),i=(new r.Compiler).compile(t,n),a=(new r.JavaScriptCompiler).compile(i,n,void 0,!0);return r.template(a)}function o(e,t){return a||(a=s()),a.call(this,e,t)}return o._setup=function(e){return a||(a=s()),a._setup(e)},o._child=function(e,t,r,n){return a||(a=s()),a._child(e,t,r,n)},o};var i=n(r(12)),a=r(13),s=n(r(2)),o=[].slice;function l(){}function u(e,t){if(e===t)return!0;if(a.isArray(e)&&a.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!u(e[r],t[r]))return!1;return!0}}function c(e){if(!e.path.parts){var t=e.path;e.path=new s.default.PathExpression(!1,0,[t.original+""],t.original+"",t.loc)}}l.prototype={compiler:l,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;r<t;r++){var n=this.opcodes[r],i=e.opcodes[r];if(n.opcode!==i.opcode||!u(n.args,i.args))return!1}t=this.children.length;for(r=0;r<t;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var r=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},r)for(var n in r)n in r&&(t.knownHelpers[n]=r[n]);return this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),r=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[r]=t,this.useDepths=this.useDepths||t.useDepths,r},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;n<r;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){c(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new i.default("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var r=e.name.original,n="SubExpression"===e.name.type;n&&this.accept(e.name),this.setupFullMustacheParams(e,void 0,void 0,!0);var a=e.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a=""),this.opcode("invokePartial",n,r,a),this.opcode("append")},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){c(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,i=n.parts[0],a=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.accept(n),this.opcode("invokeAmbiguous",i,a)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),a=e.path,o=a.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new i.default("You specified knownHelpersOnly, but used the unknown helper "+o,e);a.falsy=!0,this.accept(a),this.opcode("invokeHelper",n.length,a.original,s.default.helpers.simpleId(a))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=s.default.helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=s.default.helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&s.default.helpers.helperExpression(e),i=!r&&(n||t);if(i&&!n){var a=e.path.parts[0],o=this.options;o.knownHelpers[a]?n=!0:o.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;t<r;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||s.default.helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(t=e.original||t).replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;t<r;t++){var n=this.options.blockParams[t],i=n&&a.indexOf(n,e);if(n&&i>=0)return[t,i]}}}},function(e,t,r){"use strict";var n=r(8).default;t.__esModule=!0;var i=r(10),a=n(r(12)),s=r(13),o=n(r(18));function l(e){this.value=e}function u(){}u.prototype={nameLookup:function(e,t){return u.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=i.COMPILER_REVISION;return[e,i.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,r){return s.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,s=void 0,o=void 0,l=void 0,u=void 0;for(l=0,u=i.length;l<u;l++)s=i[l],this.source.currentLocation=s.loc,o=o||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a.default("Compile completed with content left on stack");var c=this.createFunctionContext(n);if(this.isChild)return c;var d={compiler:this.compilerInfo(),main:c},f=this.context.programs;for(l=0,u=f.length;l<u;l++)f[l]&&(d[l]=f[l]);return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),n?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new o.default(this.options.srcName)},createFunctionContext:function(e){var t="",r=this.stackVars.concat(this.registers.list);r.length>0&&(t+=", "+r.join(", "));var n=0;for(var i in this.aliases){var a=this.aliases[i];this.aliases.hasOwnProperty(i)&&a.children&&a.referenceCount>1&&(t+=", alias"+ ++n+"="+i,a.children[0]="alias"+n)}var s=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var o=this.mergeSource(t);return e?(s.push(o),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",o,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,a=void 0,s=void 0;return this.source.each(function(e){e.appendToBuffer?(a?e.prepend("  + "):a=e,s=e):(a&&(i?a.prepend("buffer += "):n=!0,s.add(";"),a=s=void 0),i=!0,t||(r=!1))}),r?a?(a.prepend("return "),s.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),a?(a.prepend("return buffer + "),s.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r){var n=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[n++])),this.resolvePath("context",e,n,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){e?this.pushStackLiteral("this.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,r,n){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,r,n){var i=t.popStack(),a=0,s=r.length;e&&s--;for(;a<s;a++)i=t.nameLookup(i,r[a],n);return e?[t.aliasable("this.strict"),"(",i,", ",t.quotedString(r[a]),")"]:i}(this.options.strict,this,t,e));else for(var a=t.length;r<a;r++)this.replaceStack(function(a){var s=i.nameLookup(a,t[r],e);return n?[" && ",s]:[" != null ? ",s," : ",a]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,r){var n=this.popStack(),i=this.setupHelper(e,t),a=r?[i.name," || "]:"",s=["("].concat(a,n);this.options.strict||s.push(" || ",this.aliasable("helpers.helperMissing")),s.push(")"),this.push(this.source.functionCall(s,"call",i.callParams))},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],i=this.setupParams(t,1,n,!1);e&&(t=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("this.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var a=this.hash;r&&(a.contexts[e]=r),n&&(a.types[e]=n),i&&(a.ids[e]=i),a.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(e,t){for(var r=e.children,n=void 0,i=void 0,a=0,s=r.length;a<s;a++){n=r[a],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,t,this.context,!this.precompile),this.context.environments[o]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams):(n.index=o,n.name="program"+o,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;t<r;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"this.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof l||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new l(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,n=void 0,i=void 0;if(!this.isInline())throw new a.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof l)t=["(",r=[s.value]],i=!0;else{n=!0;var o=this.incrStack();t=["((",this.push(o)," = ",s,")"],r=this.topStack()}var u=e.call(this,r);i||this.popStack(),n&&this.stackSlot--,this.push(t.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n instanceof l)this.compileStack.push(n);else{var i=this.incrStack();this.pushSource([i," = ",n,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof l)return r.value;if(!t){if(!this.stackSlot)throw new a.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof l?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,r),name:this.nameLookup("helpers",t,"helper"),callParams:[this.contextName(0)].concat(n)}},setupParams:function(e,t,r){var n={},i=[],a=[],s=[],o=void 0;n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),u=this.popStack();(u||l)&&(n.fn=u||"this.noop",n.inverse=l||"this.noop");for(var c=t;c--;)o=this.popStack(),r[c]=o,this.trackIds&&(s[c]=this.popStack()),this.stringParams&&(a[c]=this.popStack(),i[c]=this.popStack());return this.trackIds&&(n.ids=this.source.generateArray(s)),this.stringParams&&(n.types=this.source.generateArray(a),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var i=this.setupParams(e,t,r,!0);return i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):(r.push(i),"")}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=u.RESERVED_WORDS={},r=0,n=e.length;r<n;r++)t[e[r]]=!0}(),u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=u,e.exports=t.default},function(e,t,r){"use strict";var n=r(8).default;t.__esModule=!0;var i=n(r(12)),a=n(r(2));function s(){this.parents=[]}s.prototype={constructor:s,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&(!r.type||!a.default[r.type]))throw new i.default('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new i.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;t<r;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=s,e.exports=t.default},function(e,t,r){(function(r){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==r?r:window,n=t.Handlebars;e.noConflict=function(){t.Handlebars===e&&(t.Handlebars=n)}},e.exports=t.default}).call(t,function(){return this}())},function(e,t,r){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,r){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if("object"==typeof e&&null!==e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},t.__esModule=!0},function(e,t,r){"use strict";var n=r(9).default,i=r(8).default;t.__esModule=!0,t.HandlebarsEnvironment=c,t.createFrame=p;var a=n(r(13)),s=i(r(12));t.VERSION="3.0.1";t.COMPILER_REVISION=6;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};var o=a.isArray,l=a.isFunction,u=a.toString;function c(e,t){this.helpers=e||{},this.partials=t||{},function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}),e.registerHelper("blockHelperMissing",function(t,r){var n=r.inverse,i=r.fn;if(!0===t)return i(this);if(!1===t||null==t)return n(this);if(o(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):n(this);if(r.data&&r.ids){var s=p(r.data);s.contextPath=a.appendContextPath(r.data.contextPath,r.name),r={data:s}}return i(t,r)}),e.registerHelper("each",function(e,t){if(!t)throw new s.default("Must pass iterator to #each");var r=t.fn,n=t.inverse,i=0,u="",c=void 0,d=void 0;function f(t,n,i){c&&(c.key=t,c.index=n,c.first=0===n,c.last=!!i,d&&(c.contextPath=d+t)),u+=r(e[t],{data:c,blockParams:a.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),l(e)&&(e=e.call(this)),t.data&&(c=p(t.data)),e&&"object"==typeof e)if(o(e))for(var h=e.length;i<h;i++)f(i,i,i===e.length-1);else{var g=void 0;for(var m in e)e.hasOwnProperty(m)&&(g&&f(g,i-1),g=m,i++);g&&f(g,i-1,!0)}return 0===i&&(u=n(this)),u}),e.registerHelper("if",function(e,t){return l(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})}),e.registerHelper("with",function(e,t){l(e)&&(e=e.call(this));var r=t.fn;if(a.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var n=p(t.data);n.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0]),t={data:n}}return r(e,t)}),e.registerHelper("log",function(t,r){var n=r.data&&null!=r.data.level?parseInt(r.data.level,10):1;e.log(n,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}(this)}c.prototype={constructor:c,logger:d,log:f,registerHelper:function(e,t){if("[object Object]"===u.call(e)){if(t)throw new s.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===u.call(e))a.extend(this.partials,e);else{if(void 0===t)throw new s.default("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&d.level<=e){var r=d.methodMap[e];(console[r]||console.log).call(console,t)}}};t.logger=d;var f=d.log;function p(e){var t=a.extend({},e);return t._parent=e,t}t.log=f},function(e,t,r){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];function i(e,t){var r=t&&t.loc,a=void 0,s=void 0;r&&(e+=" - "+(a=r.start.line)+":"+(s=r.start.column));for(var o=Error.prototype.constructor.call(this,e),l=0;l<n.length;l++)this[n[l]]=o[n[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i),r&&(this.lineNumber=a,this.column=s)}i.prototype=new Error,t.default=i,e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,t.extend=function(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e},t.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(i,s)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,a=/[&<>"'`]/;function s(e){return n[e]}var o,l=Object.prototype.toString;t.toString=l,(o=function(e){return"function"==typeof e})(/x/)&&(t.isFunction=o=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=o;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=u},function(e,t,r){"use strict";var n=r(9).default,i=r(8).default;t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,r=o.COMPILER_REVISION;if(t!==r){if(t<r){var n=o.REVISION_CHANGES[r],i=o.REVISION_CHANGES[t];throw new s.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new s.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new s.default("No environment passed to template");if(!e||!e.main)throw new s.default("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var r={strict:function(e,t){if(!(t in e))throw new s.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:a.escapeExpression,invokePartial:function(r,n,i){i.hash&&(n=a.extend({},n,i.hash));r=t.VM.resolvePartial.call(this,r,n,i);var o=t.VM.invokePartial.call(this,r,n,i);null==o&&t.compile&&(i.partials[i.name]=t.compile(r,e.compilerOptions,t),o=i.partials[i.name](n,i));if(null!=o){if(i.indent){for(var l=o.split("\n"),u=0,c=l.length;u<c&&(l[u]||u+1!==c);u++)l[u]=i.indent+l[u];o=l.join("\n")}return o}throw new s.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(t){return e[t]},programs:[],program:function(e,t,r,n,i){var a=this.programs[e],s=this.fn(e);return t||i||n||r?a=l(this,e,s,t,r,n,i):a||(a=this.programs[e]=l(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=a.extend({},t,e)),r},noop:t.VM.noop,compilerInfo:e.compiler};function n(t){var i=void 0===arguments[1]?{}:arguments[1],a=i.data;n._setup(i),!i.partial&&e.useData&&(a=function(e,t){t&&"root"in t||((t=t?o.createFrame(t):{}).root=e);return t}(t,a));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=i.depths?[t].concat(i.depths):[t]),e.main.call(r,t,r.helpers,r.partials,a,l,s)}return n.isTop=!0,n._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},n._child=function(t,n,i,a){if(e.useBlockParams&&!i)throw new s.default("must pass block params");if(e.useDepths&&!a)throw new s.default("must pass parent depths");return l(r,t,e[t],n,0,i,a)},n},t.wrapProgram=l,t.resolvePartial=function(e,t,r){e?e.call||r.name||(r.name=e,e=r.partials[e]):e=r.partials[r.name];return e},t.invokePartial=function(e,t,r){if(r.partial=!0,void 0===e)throw new s.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},t.noop=function(){return""};var a=n(r(13)),s=i(r(12)),o=r(10);function l(e,t,r,n,i,a,s){function o(t){var i=void 0===arguments[1]?{}:arguments[1];return r.call(e,t,e.helpers,e.partials,i.data||n,a&&[i.blockParams].concat(a),s&&[t].concat(s))}return o.program=t,o.depth=s?s.length:0,o.blockParams=i||0,o}},function(e,t,r){"use strict";t.__esModule=!0;var n=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,r,n,i,a,s){var o=a.length-1;switch(i){case 1:return a[o-1];case 2:this.$=new n.Program(a[o],null,{},n.locInfo(this._$));break;case 3:case 4:case 5:case 6:case 7:this.$=a[o];break;case 8:this.$=new n.CommentStatement(n.stripComment(a[o]),n.stripFlags(a[o],a[o]),n.locInfo(this._$));break;case 9:this.$=new n.ContentStatement(a[o],n.locInfo(this._$));break;case 10:this.$=n.prepareRawBlock(a[o-2],a[o-1],a[o],this._$);break;case 11:this.$={path:a[o-3],params:a[o-2],hash:a[o-1]};break;case 12:this.$=n.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!1,this._$);break;case 13:this.$=n.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!0,this._$);break;case 14:case 15:case 16:this.$={path:a[o-4],params:a[o-3],hash:a[o-2],blockParams:a[o-1],strip:n.stripFlags(a[o-5],a[o])};break;case 17:this.$={strip:n.stripFlags(a[o-1],a[o-1]),program:a[o]};break;case 18:var l=n.prepareBlock(a[o-2],a[o-1],a[o],a[o],!1,this._$),u=new n.Program([l],null,{},n.locInfo(this._$));u.chained=!0,this.$={strip:a[o-2].strip,program:u,chain:!0};break;case 19:this.$=a[o];break;case 20:this.$={path:a[o-1],strip:n.stripFlags(a[o-2],a[o])};break;case 21:case 22:this.$=n.prepareMustache(a[o-3],a[o-2],a[o-1],a[o-4],n.stripFlags(a[o-4],a[o]),this._$);break;case 23:this.$=new n.PartialStatement(a[o-3],a[o-2],a[o-1],n.stripFlags(a[o-4],a[o]),n.locInfo(this._$));break;case 24:case 25:this.$=a[o];break;case 26:this.$=new n.SubExpression(a[o-3],a[o-2],a[o-1],n.locInfo(this._$));break;case 27:this.$=new n.Hash(a[o],n.locInfo(this._$));break;case 28:this.$=new n.HashPair(n.id(a[o-2]),a[o],n.locInfo(this._$));break;case 29:this.$=n.id(a[o-1]);break;case 30:case 31:this.$=a[o];break;case 32:this.$=new n.StringLiteral(a[o],n.locInfo(this._$));break;case 33:this.$=new n.NumberLiteral(a[o],n.locInfo(this._$));break;case 34:this.$=new n.BooleanLiteral(a[o],n.locInfo(this._$));break;case 35:this.$=new n.UndefinedLiteral(n.locInfo(this._$));break;case 36:this.$=new n.NullLiteral(n.locInfo(this._$));break;case 37:case 38:this.$=a[o];break;case 39:this.$=n.preparePath(!0,a[o],this._$);break;case 40:this.$=n.preparePath(!1,a[o],this._$);break;case 41:a[o-2].push({part:n.id(a[o]),original:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 42:this.$=[{part:n.id(a[o]),original:a[o]}];break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 45:this.$=[];break;case 46:a[o-1].push(a[o]);break;case 53:this.$=[];break;case 54:a[o-1].push(a[o]);break;case 59:this.$=[];break;case 60:a[o-1].push(a[o]);break;case 65:this.$=[];break;case 66:a[o-1].push(a[o]);break;case 73:this.$=[];break;case 74:a[o-1].push(a[o]);break;case 77:this.$=[];break;case 78:a[o-1].push(a[o]);break;case 81:this.$=[];break;case 82:a[o-1].push(a[o]);break;case 85:this.$=[];break;case 86:a[o-1].push(a[o]);break;case 89:this.$=[a[o]];break;case 90:a[o-1].push(a[o]);break;case 91:this.$=[a[o]];break;case 92:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],a=this.table,s="",o=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;i.push(c);var d=this.lexer.options&&this.lexer.options.ranges;function f(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,h,g,m,v,y,_,b,A,E={};;){if(g=r[r.length-1],this.defaultActions[g]?m=this.defaultActions[g]:(null!==p&&void 0!==p||(p=f()),m=a[g]&&a[g][p]),void 0===m||!m.length||!m[0]){var S="";if(!u){for(y in A=[],a[g])this.terminals_[y]&&y>2&&A.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:c,expected:A})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:r.push(p),n.push(this.lexer.yytext),i.push(this.lexer.yylloc),r.push(m[1]),p=null,h?(p=h,h=null):(l=this.lexer.yyleng,s=this.lexer.yytext,o=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(_=this.productions_[m[1]][1],E.$=n[n.length-_],E._$={first_line:i[i.length-(_||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(_||1)].first_column,last_column:i[i.length-1].last_column},d&&(E._$.range=[i[i.length-(_||1)].range[0],i[i.length-1].range[1]]),void 0!==(v=this.performAction.call(E,s,l,o,this.yy,m[1],n,i)))return v;_&&(r=r.slice(0,-1*_*2),n=n.slice(0,-1*_),i=i.slice(0,-1*_)),r.push(this.productions_[m[1]][0]),n.push(E.$),i.push(E._$),b=a[r[r.length-2]][r[r.length-1]],r.push(b);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length&&(!(r=this._input.match(this.rules[a[s]]))||t&&!(r[0].length>t[0].length)||(t=r,n=s,this.options.flex));s++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,r,n){function i(e,r){return t.yytext=t.yytext.substr(e,t.yyleng-r)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=i(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=i(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:case 40:return 66;case 41:return"INVALID";case 42:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}}};return e}();function r(){this.yy={}}return e.lexer=t,r.prototype=e,e.Parser=r,new r}();t.default=n,e.exports=t.default},function(e,t,r){"use strict";var n=r(8).default;t.__esModule=!0;var i=n(r(6));function a(){}function s(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],i=e[t-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(e,t,r){void 0===t&&(t=-1);var n=e[t+1],i=e[t+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function l(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function u(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}a.prototype=new i.default,a.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,n=0,i=r.length;n<i;n++){var a=r[n],c=this.accept(a);if(c){var d=s(r,n,t),f=o(r,n,t),p=c.openStandalone&&d,h=c.closeStandalone&&f,g=c.inlineStandalone&&d&&f;c.close&&l(r,n,!0),c.open&&u(r,n,!0),g&&(l(r,n),u(r,n)&&"PartialStatement"===a.type&&(a.indent=/([ \t]+$)/.exec(r[n-1].original)[1])),p&&(l((a.program||a.inverse).body),u(r,n)),h&&(l(r,n),u((a.inverse||a.program).body))}}return e},a.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,i=r;if(r&&r.chained)for(n=r.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var a={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:o(t.body),closeStandalone:s((n||t).body)};if(e.openStrip.close&&l(t.body,null,!0),r){var c=e.inverseStrip;c.open&&u(t.body,null,!0),c.close&&l(n.body,null,!0),e.closeStrip.open&&u(i.body,null,!0),s(t.body)&&o(n.body)&&(u(t.body),l(n.body))}else e.closeStrip.open&&u(t.body,null,!0);return a},a.prototype.MustacheStatement=function(e){return e.strip},a.prototype.PartialStatement=a.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=a,e.exports=t.default},function(e,t,r){"use strict";var n=r(8).default;t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",a=[],s=0,o=0,l=t.length;o<l;o++){var u=t[o].part,c=t[o].original!==u;if(n+=(t[o].separator||"")+u,c||".."!==u&&"."!==u&&"this"!==u)a.push(u);else{if(a.length>0)throw new i.default("Invalid path: "+n,{loc:r});".."===u&&(s++,"../")}}return new this.PathExpression(e,s,a,n,r)},t.prepareMustache=function(e,t,r,n,i,a){var s=n.charAt(3)||n.charAt(2),o="{"!==s&&"&"!==s;return new this.MustacheStatement(e,t,r,o,i,this.locInfo(a))},t.prepareRawBlock=function(e,t,r,n){if(e.path.original!==r){var a={loc:e.path.loc};throw new i.default(e.path.original+" doesn't match "+r,a)}n=this.locInfo(n);var s=new this.Program([t],null,{},n);return new this.BlockStatement(e.path,e.params,e.hash,s,void 0,{},{},{},n)},t.prepareBlock=function(e,t,r,n,a,s){if(n&&n.path&&e.path.original!==n.path.original){var o={loc:e.path.loc};throw new i.default(e.path.original+" doesn't match "+n.path.original,o)}t.blockParams=e.blockParams;var l=void 0,u=void 0;r&&(r.chain&&(r.program.body[0].closeStrip=n.strip),u=r.strip,l=r.program);a&&(a=l,l=t,t=a);return new this.BlockStatement(e.path,e.params,e.hash,t,l,e.strip,u,n&&n.strip,this.locInfo(s))};var i=n(r(12))},function(e,t,r){"use strict";t.__esModule=!0;var n=r(13),i=void 0;try{}catch(e){}function a(e,t,r){if(n.isArray(e)){for(var i=[],a=0,s=e.length;a<s;a++)i.push(t.wrap(e[a],r));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function s(e){this.srcFile=e,this.source=[]}i||((i=function(e,t,r,n){this.src="",n&&this.add(n)}).prototype={add:function(e){n.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){n.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),s.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,r=this.source.length;t<r;t++)e(this.source[t])},empty:function(){var e=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=a(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var n=a(e[r],this);"undefined"!==n&&t.push([this.quotedString(r),":",n])}var i=this.generateList(t);return i.prepend("{"),i.add("}"),i},generateList:function(e,t){for(var r=this.empty(t),n=0,i=e.length;n<i;n++)n&&r.add(","),r.add(a(e[n],this,t));return r},generateArray:function(e,t){var r=this.generateList(e,t);return r.prepend("["),r.add("]"),r}},t.default=s,e.exports=t.default}])})},"/YDJ":function(e,t,r){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){n.default(e)};var n=function(e){return e&&e.__esModule?e:{default:e}}(r("hGk8"))},"/xXU":function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("MaNa"),r("npc9"),r("ecIC"),r("f9M/")],void 0===(i=function(e,t,r,n,i){return r.extend({play:function(){this.state.set("activated",!0),this.$player.player("play")},pause:function(){this.$player.player("pause")},talk:function(e){this.$player.player("talk",e.get("id"))},mute:function(){this.$player.player("mute",!0)},unmute:function(){this.$player.player("mute",!1)},volume:function(e){this.$player.player("volume",e)},subtitle:function(e){this.$player.player("subtitle",e)},fullscreen:function(){this.$player.player("requestFullScreen",this.fullscreenElement||this.el)},smallscreen:function(){this.$player.player("cancelFullScreen",this.fullscreenElement||this.el)},seek:function(e){this.$player.player("seek",e)},fullscreenElement:null,playerModes:null,className:"Embeddable__player",events:{playererror:function(e,t){var r=t.error,n="client"===r.type?"client":null;"abortive"===r.severity&&this.state.set("error",n||"init"),"fatal"===r.severity&&this.state.set("error",n||"fatal")},playerready:function(){this.state.set("ready",!0),this._checkCapabilities()},playerplay:function(){this.state.set("playing",!0),this.state.set("paused",!1),this.state.set("ended",!1)},playerpause:function(){this.state.set("paused",!0),this.state.set("playing",!1)},playerduration:function(e,t){var r=this.$player.player("talk").id;this.talks.get(r).set("duration",t.duration),this.state.set("duration",t.duration)},playercurrenttime:function(e,t){this.state.set("currentTime",t.currentTime)},playertalk:function(e,t){this.state.set("postrolling",!1),this.state.set("talk",this.talks.get(t.id))},playerended:function(){this.state.set("paused",!1),this.state.set("playing",!1),this.state.set("ended",!0)},playervolume:function(e,t){this.state.set("volume",t.volume)},playermuted:function(e,t){this.state.set("muted",t.muted)},playersubtitle:function(e,t){this.state.set("subtitle",t&&t.subtitle&&t.subtitle.languageCode)},playerenterfullscreen:function(){this.state.set("fullscreen",!0)},playerexitfullscreen:function(){this.state.set("fullscreen",!1)},playerpostrollstart:function(){this.state.set("postrolling",!0)},playerpostrollcomplete:function(){this.state.set("postrolling",!1)}},propsDefaults:{defaultSubtitles:!1,hideAdvertising:!1,nativeLanguage:"en",maiAdUnitId:void 0},stateDefaults:{nativeControls:!1,activated:!1,ended:!1,error:!1,ready:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1,postrolling:!1},stateEvents:{"change:nativeControls":function(e,t){t?this.find("video").attr("controls","controls"):this.find("video").removeAttr("controls")},"on:activated":function(){this.$el.addClass("Embeddable__player--activated")}},initialize:function(e){this.talks=e.talks,this.fullscreenElement=e.fullscreenElement||null,this.playerModes=e.playerModes||void 0,this.initializeState(),this.initializeProps()},render:function(){var e=this.props.get("hideAdvertising");return this.$el.html(i()),this.$player=this.$el.find("div.Embeddable__player__object"),this.$player.player({breakpoint:!1,defaultSubtitles:this.props.get("defaultSubtitles"),mai:!e,maiAdUnitId:e?null:this.props.get("maiAdUnitId"),modes:this.playerModes,nativeLanguage:this.props.get("nativeLanguage"),subproperty:"embed",talks:this.talks.toPlayer(),recordInIdentity:!1,uncropped:!1}),this},_canFullscreen:function(){return!!this.$player.player("canFullScreen")&&!n()},_checkCapabilities:function(){var e=this._canFullscreen(),t=this.$player.player("canSubtitle"),r=this.$player.player("canVolume"),n=String(window.navigator&&window.navigator.userAgent||"");this.state.set("canFullscreen",e),this.state.set("canVolume",r),this.state.set("canSubtitle",t),n.match(/\bKaiOS\/([\d\.]+)/gi)&&this.state.set("nativeControls",!0)}})}.apply(t,n))||(e.exports=i)},"/xml":function(e,t,r){"use strict";var n,i;n=[r("+w1B"),r("K37z")],void 0===(i=function(e,t){return e.registerHelper("formatDuration",t),t}.apply(t,n))||(e.exports=i)},10:function(e,t,r){r("sDZe"),e.exports=r("v4rn")},"1Jdc":function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("KsRy"),r("z/83"),r("Nh48"),r("/xXU"),r("m8S9"),r("lzPn"),r("eJwn")],void 0===(i=function(e,t,r,n,i,a,s,o){function l(t){var l=e(t.el),u=new n(t.talks),c=new a({fullscreenElement:t.el,playerModes:t.playerModes,talks:u}),d=new i({talks:u}),f=new s,p=new o;function h(){f.props.set("enabled",d.props.get("activated")&&!d.props.get("postrolling")&&!d.props.get("hideBranding")),f.props.set("visible",d.props.get("hovering")&&!d.props.get("fullscreen")||c.state.get("paused"))}function g(){d.props.set("visible",d.props.get("hovering")||c.state.get("paused"))}d.props.set("hideBranding",t.hideBranding),p.props.set("hideNewsletter",t.hideNewsletter),p.props.set("disableCampaigns",t.disableCampaigns),c.props.set("hideAdvertising",t.hideAdvertising),c.props.set("nativeLanguage",t.nativeLanguage),c.props.set("defaultSubtitles",t.defaultSubtitles),c.props.set("maiAdUnitId",t.maiAdUnitId),f.props.set("url",t.canonicalUrl),d.props.set("url",t.canonicalUrl),c.state.on("change:error",function(e,n){l.html(r({isClient:"client"===n,isInit:"init"===n,isFatal:"fatal"===n,url:t.canonicalUrl}))}),c.state.on("change:nativeControls",function(e,t){d.props.set("enabled",!t)}),c.state.on("change:activated",function(e,t){l.addClass("Embeddable--activated"),l.removeClass("Embeddable--activating"),d.props.set("activated",t)}),c.state.on("change:playing",function(e,t){d.props.set("playing",t)}),c.state.on("change:paused",function(e,t){d.props.set("paused",t)}),c.state.on("change:duration",function(e,t){d.props.set("duration",t)}),c.state.on("change:currentTime",function(e,t){d.props.set("currentTime",t)}),c.state.on("change:ended",function(e,t){p.props.set("activated",t)}),c.state.on("change:talk",function(e,t){d.props.set("talk",t),d.props.set("next",u.after(t)||null),d.props.set("prev",u.before(t)||null)}),c.state.on("change:volume",function(e,t){d.props.set("volume",t)}),c.state.on("change:canVolume",function(e,t){d.props.set("canVolume",t)}),c.state.on("change:muted",function(e,t){d.props.set("muted",t)}),c.state.on("change:subtitle",function(e,t){d.props.set("subtitle",t)}),c.state.on("change:canSubtitle",function(e,t){d.props.set("canSubtitle",t)}),c.state.on("change:fullscreen",function(e,t){d.props.set("fullscreen",t)}),c.state.on("change:canFullscreen",function(e,t){d.props.set("canFullscreen",t)}),c.state.on("change:postrolling",function(e,t){d.props.set("postrolling",t)}),d.state.on("change:playPending",function(e,t){t&&c.play()}),d.state.on("change:pausePending",function(e,t){t&&c.pause()}),d.state.on("change:pendingTalk",function(e,t){t&&c.talk(t)}),d.state.on("change:mutePending",function(e,t){t&&c.mute()}),d.state.on("change:unmutePending",function(e,t){t&&c.unmute()}),d.state.on("change:pendingVolume",function(e,t){null!==t&&c.volume(t)}),d.state.on("change:pendingSubtitle",function(e,t){null!==t&&(t?c.subtitle(t):c.subtitle(!1))}),d.state.on("change:fullscreenPending",function(e,t){t&&c.fullscreen()}),d.state.on("change:smallscreenPending",function(e,t){t&&c.smallscreen()}),d.state.on("change:pendingSeek",function(e,t){null!==t&&c.seek(t)}),p.state.on("change:rewatchPending",function(e,t){t&&(c.seek(0),c.play())}),d.props.on("change:activated",h),d.props.on("change:hovering",h),d.props.on("change:postrolling",h),d.props.on("change:fullscreen",h),c.state.on("change:paused",h),d.props.on("change:hovering",g),d.state.on("change:paused",g),l.hover().on("hoverstart",function(){d.props.set("hovering",!0)}).on("hoverstop",function(){d.props.set("hovering",!1)}),this.$el=l,this.talks=u,this.player=c,this.chrome=d,this.canonball=f,this.ended=p}return t.extend(l.prototype,{activate:function(){this.$el.addClass("Embeddable--activating"),this.player.play()},render:function(){this.$el.prepend(this.player.$el),this.$el.append(this.canonball.$el),this.$el.append(this.chrome.$el),this.$el.append(this.ended.$el),this.ended.render(),this.chrome.render(),this.player.render()}}),l.init=function(e){var r=new l({defaultSubtitles:!!e.defaultSubtitles,el:e.el,canonicalUrl:e.canonicalUrl,disableCampaigns:!!e.disableCampaigns,hideAdvertising:!!e.hideAdvertising,hideBranding:!!e.hideBranding,hideNewsletter:!!e.hideNewsletter,maiAdUnitId:e.maiAdUnitId,nativeLanguage:e.nativeLanguage,playerModes:e.playerModes,talks:e.talks});r.$el.data("embeddable",r),r.render(),r.player.state.once("change:ready",function(){r.$el.removeClass("Embeddable--loading"),window[e.activate]=t.once(function(){r.activate()})})},l}.apply(t,n))||(e.exports=i)},"1TA+":function(e,t,r){var n=r("mp5j");function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var o=null!=t?t:e.nullContext||{},l=e.escapeExpression;return'\n<div class="Embeddable__expandable__content Embeddable__volume__inner">\n  <div class="Embeddable__volume__meter"><div class="Embeddable__volume__meter__level"></div><div class="Embeddable__volume__slider"></div></div>\n\n  <a class="Embeddable__volume__unmute Embeddable__button Embeddable__button--effective" href="#">'+l(i(r("3fiq")).call(o,"control-mute","Mute","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'</a>\n  <a class="Embeddable__volume__mute Embeddable__button" href="#">'+l(i(r("3fiq")).call(o,"control-mute","Mute","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+"</a>\n</div>\n"},useData:!0})},"20JI":function(e,t,r){"use strict";t.__esModule=!0;var n=r("82EY"),i=function(e){return e&&e.__esModule?e:{default:e}}(r("AIJh"));t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new i.default("Must pass iterator to #each");var r=t.fn,a=t.inverse,s=0,o="",l=void 0,u=void 0;function c(t,i,a){l&&(l.key=t,l.index=i,l.first=0===i,l.last=!!a,u&&(l.contextPath=u+t)),o+=r(e[t],{data:l,blockParams:n.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=n.appendContextPath(t.data.contextPath,t.ids[0])+"."),n.isFunction(e)&&(e=e.call(this)),t.data&&(l=n.createFrame(t.data)),e&&"object"==typeof e)if(n.isArray(e))for(var d=e.length;s<d;s++)s in e&&c(s,s,s===e.length-1);else{var f=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==f&&c(f,s-1),f=p,s++);void 0!==f&&c(f,s-1,!0)}return 0===s&&(o=a(this)),o})},e.exports=t.default},"2gKN":function(e,t,r){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(!window.TED||!window.TED.zone||!window.TED.zone.hide_advertising){var a=window.ns_=window.ns_||{};a.StreamSense=a.StreamSense||function(){function e(e,t){var a=e||"",o="undefined",l=r.comScore||r.sitestat||function(e){var t,a,l,u,c,f="comScore=",p=n.cookie,h="",g="indexOf",v="length",y=s.browserAcceptsLargeURLs()?m.URL_LENGTH_LIMIT:m.RESTRICTED_URL_LENGTH_LIMIT,_="&ns_",b=r.encodeURIComponent||escape;if(p[g](f)+1)for(u=0,c=(l=p.split(";"))[v];u<c;u++)(a=l[u][g](f))+1&&(h="&"+unescape(l[u].substring(a+f[v])));(e+=_+"_t="+ +new Date+_+"c="+(n.characterSet||n.defaultCharset||"")+h).length>y&&e.indexOf("&")>0&&(t=e.substr(0,y-8).lastIndexOf("&"),e=(e.substring(0,t)+_+"cut="+b(e.substring(t+1))).substr(0,y)),d.httpGet(e),("undefined"==typeof ns_p?"undefined":i(ns_p))===o&&(ns_p={src:e}),ns_p.lastMeasurement=e};if((void 0===t?"undefined":i(t))!==o){var u=[],c=r.encodeURIComponent||escape;for(var f in t)t.hasOwnProperty(f)&&u.push(c(f)+"="+c(t[f]));/[\?\&]$/.test(a)||(a+="&"),a+=u.join("&")}return l(a)}function t(e,t){for(var i,a=r.encodeURIComponent||escape,o=[],l=m.LABELS_ORDER,u=e.split("?"),c=u[0],d=u[1].split("&"),f=0,p=d.length;f<p;f++){var h=d[f].split("="),g=unescape(h[0]),v=unescape(h[1]);g&&(t[g]=v)}var y={};for(f=0,p=l.length;f<p;f++){var _=l[f];if(t.hasOwnProperty(_))void 0!==(b=t[_])&&null!=b&&(y[_]=!0,o.push(a(_)+"="+a(t[_])))}for(var _ in t){var b;if(!y[_])if(t.hasOwnProperty(_))void 0!==(b=t[_])&&null!=b&&o.push(a(_)+"="+a(t[_]))}i=(i=c+"?"+o.join("&"))+(i.indexOf("&c8=")<0?"&c8="+a(n.title):"")+(i.indexOf("&c7=")<0?"&c7="+a(n.URL):"")+(i.indexOf("&c9=")<0?"&c9="+a(n.referrer):"");var A=s.browserAcceptsLargeURLs()?m.URL_LENGTH_LIMIT:m.RESTRICTED_URL_LENGTH_LIMIT;if(i.length>A&&i.indexOf("&")>0){var E=i.substr(0,A-8).lastIndexOf("&");i=(i.substring(0,E)+"&ns_cut="+a(i.substring(E+1))).substr(0,A)}return i}var r,n,s=function(){var e={uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var r={};for(var n in t)t.hasOwnProperty(n)&&e(t[n])&&(r[n]=t[n]);return r},extend:function(e){var t,r=arguments.length;e=e||{};for(var n=1;n<r;n++)if(t=arguments[n])for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},getString:function(e,t){var r=String(e);return null==e?t||"na":r},getLong:function(e,t){var r=Number(e);return null==e||isNaN(r)?t||0:r},getInteger:function(e,t){var r=Number(e);return null==e||isNaN(r)?t||0:r},getBoolean:function(e,t){var r="true"==String(e).toLowerCase();return null==e?t||!1:r},isNotEmpty:function(e){return void 0!==e&&null!=e&&void 0!==e.length&&e.length>0},indexOf:function(t,r){var n=-1;return e.forEach(r,function(e,r){e==t&&(n=r)}),n},forEach:function(e,t,r){try{if("function"==typeof t)if(r=void 0!==r?r:null,"number"!=typeof e.length||void 0===e[0]){var n=void 0!==e.__proto__;for(var i in e)(!n||n&&void 0===e.__proto__[i])&&"function"!=typeof e[i]&&t.call(r,e[i],i)}else{i=0;for(var a=e.length;i<a;i++)t.call(r,e[i],i)}}catch(e){}},regionMatches:function(e,t,r,n,i){if(t<0||n<0||t+i>e.length||n+i>r.length)return!1;for(;--i>=0;){if(e.charAt(t++)!=r.charAt(n++))return!1}return!0},size:function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t},log:function(e,t){if(void 0!==t&&t){var r=new Date,n=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();console.log(n,e)}},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(t){if(void 0===t)return"undefined";if("string"==typeof t)return t;if("[object Array]"===Object.prototype.toString.call(t))return t.join(",");if(e.size(t)>0){var r="";for(var n in t)t.hasOwnProperty(n)&&(r+=n+":"+t[n]+";");return r}return t.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var r=arguments[e];if(r>0)return r}return 0},cloneObject:function(e){if(null==e||"object"!=(void 0===e?"undefined":i(e)))return e;var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},safeGet:function(t,r){return r=e.exists(r)?r:"",e.exists(t)?t:r},getBrowserName:function(){var e,t,r=navigator.userAgent,n=navigator.appName;return-1!=(t=r.indexOf("Opera"))||-1!=(t=r.indexOf("OPR/"))?n="Opera":-1!=(t=r.indexOf("Android"))?n="Android":-1!=(t=r.indexOf("Chrome"))?n="Chrome":-1!=(t=r.indexOf("Safari"))?n="Safari":-1!=(t=r.indexOf("Firefox"))?n="Firefox":-1!=(t=r.indexOf("IEMobile"))?n="Internet Explorer Mobile":"Microsoft Internet Explorer"==n||"Netscape"==n?n="Internet Explorer":(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&((n=r.substring(e,t)).toLowerCase()==n.toUpperCase()&&(n=navigator.appName)),n},getBrowserFullVersion:function(){var e,t,r,n=navigator.userAgent,i=navigator.appName,a=""+parseFloat(navigator.appVersion);return-1!=(t=n.indexOf("Opera"))?(a=n.substring(t+6),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("OPR/"))?a=n.substring(t+4):-1!=(t=n.indexOf("Android"))?a=n.substring(t+11):-1!=(t=n.indexOf("Chrome"))?a=n.substring(t+7):-1!=(t=n.indexOf("Safari"))?(a=n.substring(t+7),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("Firefox"))?a=n.substring(t+8):"Microsoft Internet Explorer"==i?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(n)&&(a=parseFloat(RegExp.$1)):"Netscape"==i?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(n)&&(a=parseFloat(RegExp.$1)):n.lastIndexOf(" ")+1<(t=n.lastIndexOf("/"))&&(a=n.substring(t+1)),-1!=(r=(a=a.toString()).indexOf(";"))&&(a=a.substring(0,r)),-1!=(r=a.indexOf(" "))&&(a=a.substring(0,r)),-1!=(r=a.indexOf(")"))&&(a=a.substring(0,r)),e=parseInt(""+a,10),isNaN(e)&&(a=""+parseFloat(navigator.appVersion)),a},browserAcceptsLargeURLs:function(){return null===window.ActiveXObject||!0}};return e}(),o=function(){var e="cs_";return function(){var t="undefined"!=typeof localStorage?localStorage:{};s.extend(this,{get:function(r){return t[e+r]},set:function(r,n){t[e+r]=n},has:function(r){return e+r in t},remove:function(r){delete t[e+r]},clear:function(){for(var e in t)t.hasOwnProperty(e)&&delete t[e]}})}}(),l=function(e,t,r){r&&setTimeout(r,0)},u={dir:function(e){return null},append:function(e,t,r){},write:function(e,t,r){},deleteFile:function(e,t){return!1},read:function(e,t){return null}},c=function(e,t){"undefined"!=typeof engine&&t&&setTimeout(t,0),engine.createHttpClient().createRequest("GET",e,null).start(),t&&setTimeout(t,0)},d={PLATFORM:"generic",httpGet:function(e,t){var r=new Image;r.onload=function(){t&&t(200)},r.onerror=function(){t&&t()},r.src=e},httpPost:l,Storage:o,IO:u,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(e){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},isCrossPublisherIdChanged:function(){return!1}},f=function(){function e(){return s.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:s.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function t(){if(null==r){var t=e();null!=t?(r=t,n="31",i=t):(r=+new Date+~~(1e3*Math.random()),n="72",i=null)}}var r=null,n=null,i=null;return{PLATFORM:"trilithium",httpGet:c,httpPost:l,Storage:o,IO:u,getCrossPublisherId:function(){return t(),i},getAppName:function(){return s.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(e){return s.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return t(),r},getVisitorIdSuffix:function(){return n},getDeviceName:function(){return s.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return s.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&void 0!==screen.height&&void 0!==screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return"undefined"!=typeof engine&&void 0!==engine.stats}}}();d.autoSelect=function(){f.isCompatible()&&s.extend(d,f)},"undefined"!=typeof window&&"undefined"!=typeof document?(r=window,n=document):(r={},n={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),(s=s||{}).filterMap=function(e,t){for(var r in e)-1==s.indexOf(r,t)&&delete e[r]},s.getKeys=function(e,t){var r,n=[];for(r in e)(!t||t.test(r))&&e.hasOwnProperty(r)&&(n[n.length]=r);return n};var p=function(){var e=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return e[t]}}}(),h=function(){var e=[p.END,p.PLAY,p.PAUSE,p.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return e[t]}}}(),g={ADPLAY:p.AD_PLAY,ADPAUSE:p.AD_PAUSE,ADEND:p.AD_END,ADCLICK:p.AD_CLICK},m={STREAMSENSE_VERSION:"4.1412.05",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9"]},v=function(){function e(e,t){var n=t[e];null!=n&&(r[e]=n)}var t,r,n=this,i=0,a=0,o=0,l=0,u=0,c=0;s.extend(this,{reset:function(e){null!=e&&e.length>0?s.filterMap(r,e):r={},r.hasOwnProperty("ns_st_cl")||(r.ns_st_cl="0"),r.hasOwnProperty("ns_st_pn")||(r.ns_st_pn="1"),r.hasOwnProperty("ns_st_tp")||(r.ns_st_tp="1"),n.setPauses(0),n.setStarts(0),n.setBufferingTime(0),n.setBufferingTimestamp(-1),n.setPlaybackTime(0),n.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&s.extend(r,e),n.setRegisters(r,t)},getLabels:function(){return r},setLabel:function(e,t){var r={};r[e]=t,n.setLabels(r,null)},getLabel:function(e){return r[e]},getClipId:function(){return(void 0===t||null==t)&&n.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(t,r){var s=t.ns_st_cn;null!=s&&(n.setClipId(s),delete t.ns_st_cn),null!=(s=t.ns_st_bt)&&(o=Number(s),delete t.ns_st_bt),e("ns_st_cl",t),e("ns_st_pn",t),e("ns_st_tp",t),e("ns_st_ub",t),e("ns_st_br",t),r!=h.PLAYING&&null!=r||null!=(s=t.ns_st_sq)&&(a=Number(s),delete t.ns_st_sq),r!=h.BUFFERING&&null!=(s=t.ns_st_pt)&&(u=Number(s),delete t.ns_st_pt),r!=h.PAUSED&&r!=h.IDLE&&null!=r||null!=(s=t.ns_st_pc)&&(i=Number(s),delete t.ns_st_pc)},createLabels:function(e,t){var r=t||{};return r.ns_st_cn=n.getClipId(),r.ns_st_bt=String(n.getBufferingTime()),e!=p.PLAY&&null!=e||(r.ns_st_sq=String(a)),e!=p.PAUSE&&e!=p.END&&e!=p.KEEP_ALIVE&&e!=p.HEART_BEAT&&null!=e||(r.ns_st_pt=String(n.getPlaybackTime()),r.ns_st_pc=String(i)),s.extend(r,n.getLabels()),r},incrementPauses:function(){i++},incrementStarts:function(){a++},getBufferingTime:function(){var e=o;return l>=0&&(e+=+new Date-l),e},setBufferingTime:function(e){o=e},getPlaybackTime:function(){var e=u;return c>=0&&(e+=+new Date-c),e},setPlaybackTime:function(e){u=e},getPlaybackTimestamp:function(){return c},setPlaybackTimestamp:function(e){c=e},getBufferingTimestamp:function(){return l},setBufferingTimestamp:function(e){l=e},getPauses:function(){return i},setPauses:function(e){i=e},getStarts:function(){return a},setStarts:function(e){a=e}}),r={},n.reset()},y=function(){var e,t,r=this,n=null,i=0,a=0,o=0,l=0,u=0,c=0,d=!1;s.extend(this,{reset:function(e){null!=e&&e.length>0?s.filterMap(t,e):t={},r.setPlaylistId(+new Date+"_"+c),r.setBufferingTime(0),r.setPlaybackTime(0),r.setPauses(0),r.setStarts(0),r.setRebufferCount(0),d=!1},setLabels:function(e,n){null!=e&&s.extend(t,e),r.setRegisters(t,n)},getLabels:function(){return t},setLabel:function(e,t){var n={};n[e]=t,r.setLabels(n,null)},getLabel:function(e){return t[e]},getClip:function(){return n},getPlaylistId:function(){return e},setPlaylistId:function(t){e=t},setRegisters:function(t,r){var n=t.ns_st_sp;null!=n&&(i=Number(n),delete t.ns_st_sp),null!=(n=t.ns_st_bc)&&(o=Number(n),delete t.ns_st_bc),null!=(n=t.ns_st_bp)&&(l=Number(n),delete t.ns_st_bp),null!=(n=t.ns_st_id)&&(e=n,delete t.ns_st_id),r!=h.BUFFERING&&null!=(n=t.ns_st_pa)&&(u=Number(n),delete t.ns_st_pa),r!=h.PAUSED&&r!=h.IDLE&&null!=r||null!=(n=t.ns_st_pp)&&(a=Number(n),delete t.ns_st_pp)},createLabels:function(t,n){var l=n||{};return l.ns_st_bp=String(r.getBufferingTime()),l.ns_st_sp=String(i),l.ns_st_id=String(e),o>0&&(l.ns_st_bc=String(o)),t!=p.PAUSE&&t!=p.END&&t!=p.KEEP_ALIVE&&t!=p.HEART_BEAT&&null!=t||(l.ns_st_pa=String(r.getPlaybackTime()),l.ns_st_pp=String(a)),t!=p.PLAY&&null!=t||r.didFirstPlayOccurred()||(l.ns_st_pb="1",r.setFirstPlayOccurred(!0)),s.extend(l,r.getLabels()),l},incrementStarts:function(){i++},incrementPauses:function(){a++,n.incrementPauses()},setPlaylistCounter:function(e){c=e},incrementPlaylistCounter:function(){c++},addPlaybackTime:function(e){if(n.getPlaybackTimestamp()>=0){var t=e-n.getPlaybackTimestamp();n.setPlaybackTimestamp(-1),n.setPlaybackTime(n.getPlaybackTime()+t),r.setPlaybackTime(r.getPlaybackTime()+t)}},addBufferingTime:function(e){if(n.getBufferingTimestamp()>=0){var t=e-n.getBufferingTimestamp();n.setBufferingTimestamp(-1),n.setBufferingTime(n.getBufferingTime()+t),r.setBufferingTime(r.getBufferingTime()+t)}},getBufferingTime:function(){var e=l;return n.getBufferingTimestamp()>=0&&(e+=+new Date-n.getBufferingTimestamp()),e},setBufferingTime:function(e){l=e},getPlaybackTime:function(){var e=u;return n.getPlaybackTimestamp()>=0&&(e+=+new Date-n.getPlaybackTimestamp()),e},setPlaybackTime:function(e){u=e},getStarts:function(){return i},setStarts:function(e){i=e},getPauses:function(){return a},setPauses:function(e){a=e},getRebufferCount:function(){return o},incrementRebufferCount:function(){o++},setRebufferCount:function(e){o=e},didFirstPlayOccurred:function(){return d},setFirstPlayOccurred:function(e){d=e}}),n=new v,t={},r.reset()},_=function(){var r=function(r,n){function i(e){var t=0;if(null!=ne)for(var r=0;r<ne.length;r++){var n=ne[r],i=n.playingtime;if(!i||e<i){t=n.interval;break}}return t}function o(){f();var e=i(ee.getClip().getPlaybackTime());e>0&&(H=setTimeout(c,se>0?se:e));se=0}function l(){f();var e=i(ee.getClip().getPlaybackTime());se=e-ee.getClip().getPlaybackTime()%e,null!=H&&f()}function u(){se=0,0,oe=0}function c(){oe++,x(M(p.HEART_BEAT,null)),se=0,o()}function f(){null!=H&&(clearTimeout(H),H=null)}function g(){_(),q=setTimeout(v,ie)}function v(){x(M(p.KEEP_ALIVE,null)),Z++,g()}function _(){null!=q&&(clearTimeout(q),q=null)}function b(){E(),z.isPauseOnBufferingEnabled()&&C(h.PAUSED)&&(U=setTimeout(A,ae))}function A(){G==h.PLAYING&&(ee.incrementRebufferCount(),ee.incrementPauses(),x(M(p.PAUSE,null)),Z++,G=h.PAUSED)}function E(){null!=U&&(clearTimeout(U),U=null)}function S(e){return e==h.PLAYING||e==h.PAUSED}function w(){F&&(clearTimeout(F),F=null)}function T(e,t,r){if(w(),r)F=setTimeout(function(e,t){return function(){T(e,t)}}(e,t),r);else if(function(e){return null!=e&&O()!=e}(e)){var n=O(),i=Q,a=R(t),o=i>=0?a-i:0;(function(e,t){var r=R(t);if(e==h.PLAYING)ee.addPlaybackTime(r),l(),_();else if(e==h.BUFFERING)ee.addBufferingTime(r),E();else if(e==h.IDLE){var n=s.getKeys(ee.getClip().getLabels());ee.getClip().reset(n)}})(O(),t),D(e,t),I(O()),function(e){j=e,Q=+new Date}(e);for(var u=0,c=$.length;u<c;u++)$[u](n,e,t,o);k(t),ee.setRegisters(t,e),ee.getClip().setRegisters(t,e);var d=M(h.toEventType(e),t);s.extend(d,t),C(j)&&(x(d),G=j,Z++)}}function k(e){var t=e.ns_st_mp;null!=t&&(V=t,delete e.ns_st_mp),null!=(t=e.ns_st_mv)&&(W=t,delete e.ns_st_mv),null!=(t=e.ns_st_ec)&&(Z=Number(t),delete e.ns_st_ec)}function x(e,r){void 0===r&&(r=!0),r&&P(e);var n=z.getPixelURL();if(B){if(!function(){var e=B.getAppContext(),t=B.getSalt(),r=B.getPixelURL();return null==e||null==t||0==t.length||null==r||0==r.length}()){var i=ue.am,a=ue.et,s=i.newApplicationMeasurement(B,a.HIDDEN,e,n);B.getQueue().offer(s)}}else n&&d.httpGet(t(n,e))}function P(e){K=M(null),s.extend(K,e)}function D(e,t){var r=R(t),n=L(t);J=n,e==h.PLAYING?(o(),g(),ee.getClip().setPlaybackTimestamp(r),C(e)&&(ee.getClip().incrementStarts(),ee.getStarts()<1&&ee.setStarts(1))):e==h.PAUSED?C(e)&&ee.incrementPauses():e==h.BUFFERING?(ee.getClip().setBufferingTimestamp(r),re&&b()):e==h.IDLE&&u()}function C(e){return(e!=h.PAUSED&&e!=h.IDLE||G!=h.IDLE&&null!=G)&&(e!=h.BUFFERING&&G!=e)}function L(e){var t=-1;return e.hasOwnProperty("ns_st_po")&&(t=s.getInteger(e.ns_st_po)),t}function R(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function O(){return j}function I(e){e}function M(){var e,t;1==arguments.length?(e=h.toEventType(j),t=arguments[0]):(e=arguments[0],t=arguments[1]);var r={};if("undefined"!=typeof document){var n=document;r.c7=n.URL,r.c8=n.title,r.c9=n.referrer}return null!=t&&s.extend(r,t),r.hasOwnProperty("ns_ts")||(r.ns_ts=String(+new Date)),null!=e&&!r.hasOwnProperty("ns_st_ev")&&(r.ns_st_ev=p.toString(e)),z.isPersistentLabelsShared()&&B&&s.extend(r,B.getLabels()),s.extend(r,z.getLabels()),function(e,t){var r=t||{};if(r.ns_st_ec=String(Z),!r.hasOwnProperty("ns_st_po")){var n=J,i=R(r);(e==p.PLAY||e==p.KEEP_ALIVE||e==p.HEART_BEAT||null==e&&j==h.PLAYING)&&(n+=i-ee.getClip().getPlaybackTimestamp()),r.ns_st_po=s.getInteger(n)}e==p.HEART_BEAT&&(r.ns_st_hc=String(oe))}(e,r),ee.createLabels(e,r),ee.getClip().createLabels(e,r),r.hasOwnProperty("ns_st_mp")||(r.ns_st_mp=V),r.hasOwnProperty("ns_st_mv")||(r.ns_st_mv=W),r.hasOwnProperty("ns_st_ub")||(r.ns_st_ub="0"),r.hasOwnProperty("ns_st_br")||(r.ns_st_br="0"),r.hasOwnProperty("ns_st_pn")||(r.ns_st_pn="1"),r.hasOwnProperty("ns_st_tp")||(r.ns_st_tp="1"),r.hasOwnProperty("ns_st_it")||(r.ns_st_it="c"),r.ns_st_sv=m.STREAMSENSE_VERSION,r.ns_type="hidden",r}var N,F,j,B,U,q,H,G,V,W,K,$,z=this,Y=500,X=null,Q=0,J=0,Z=0,ee=null,te=!0,re=!0,ne=m.DEFAULT_HEARTBEAT_INTERVAL,ie=m.DEFAULT_KEEP_ALIVE_INTERVAL,ae=m.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,se=0,oe=0,le=!1,ue={};d.autoSelect(),s.extend(this,{reset:function(e){ee.reset(e),ee.setPlaylistCounter(0),ee.setPlaylistId(+new Date+"_1"),ee.getClip().reset(e),null==e||e.isEmpty()?N={}:s.filterMap(N,e),Z=1,oe=0,l(),u(),_(),E(),w(),j=h.IDLE,null,Q=-1,G=null,V=m.DEFAULT_PLAYERNAME,W=m.STREAMSENSE_VERSION,K=null},setPauseOnBufferingInterval:function(e){ae=e},getPauseOnBufferingInterval:function(){return ae},setKeepAliveInterval:function(e){ie=e},getKeepAliveInterval:function(){return ie},setHeartbeatIntervals:function(e){ne=e},notify:function(){var e,t,r,n;t=arguments[0],3==arguments.length?(r=arguments[1],n=arguments[2]):(r={},n=arguments[1]),e=function(e){return e==p.PLAY?h.PLAYING:e==p.PAUSE?h.PAUSED:e==p.BUFFER?h.BUFFERING:e==p.END?h.IDLE:null}(t);var i=s.extend({},r);if(function(e){R(e)<0&&(e.ns_ts=String(+new Date))}(i),i.hasOwnProperty("ns_st_po")||(i.ns_st_po=s.getInteger(n).toString()),t==p.PLAY||t==p.PAUSE||t==p.BUFFER||t==p.END)z.isPausePlaySwitchDelayEnabled()&&S(j)&&S(e)&&(j!=h.PLAYING||e!=h.PAUSED||F)?T(e,i,Y):T(e,i);else{var a=M(t,i);s.extend(a,i),x(a,!1),Z++}},getLabels:function(){return N},getState:function(){return j},setLabels:function(e){null!=e&&(null==N?N=e:s.extend(N,e))},getLabel:function(e){return N[e]},setLabel:function(e,t){null==t?delete N[e]:N[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,r=e.indexOf("?");if(r>=0){if(r<e.length-1){for(var n=e.substring(r+1).split("&"),i=0,a=n.length;i<a;i++){var s=n[i].split("=");2==s.length?z.setLabel(s[0],t(s[1])):1==s.length&&z.setLabel(m.PAGE_NAME_LABEL,t(s[0]))}e=e.substring(0,r+1)}}else e+="?";return X=e},getPixelURL:function(){return X||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?X=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?X=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},isPersistentLabelsShared:function(){return te},setPersistentLabelsShared:function(e){te=e},isPauseOnBufferingEnabled:function(){return re},setPauseOnBufferingEnabled:function(e){re=e},isPausePlaySwitchDelayEnabled:function(){return le},setPausePlaySwitchDelayEnabled:function(e){le=e},setPausePlaySwitchDelay:function(e){e&&e>0&&(Y=e)},getPausePlaySwitchDelay:function(){return Y},setClip:function(e,t){var r=!1;return j==h.IDLE&&(ee.getClip().reset(),ee.getClip().setLabels(e,null),t&&ee.incrementStarts(),r=!0),r},setPlaylist:function(e){var t=!1;return j==h.IDLE&&(ee.incrementPlaylistCounter(),ee.reset(),ee.getClip().reset(),ee.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=s.extend({},e);ee.setRegisters(t,null),ee.getClip().setRegisters(t,null),k(t),Z++},exportState:function(){return K},getVersion:function(){return m.STREAMSENSE_VERSION},addListener:function(e){$.push(e)},removeListener:function(e){$.splice(s.indexOf(e,$),1)},getClip:function(){return ee.getClip()},getPlaylist:function(){return ee}}),s.extend(this,{adNotify:function(e,t,r){(t=t||{}).ns_st_ad=1,e>=p.AD_PLAY&&e<=p.AD_CLICK&&z.notify(e,t,r)},customNotify:function(e,t){z.notify(p.CUSTOM,e,t)},viewNotify:function(t,r){(t=t||z.getPixelURL())&&e(t,r)}}),a.comScore&&(ue=a.comScore.exports,B=ue.c()),N={},Z=1,j=h.IDLE,ee=new y,U=null,re=!0,H=null,oe=0,u(),q=null,F=null,le=!1,G=null,J=0,$=[],z.reset(),r&&z.setLabels(r),n&&z.setPixelURL(n)};return function(e){function t(e,t){return l[c]||n(e,t)}function r(){c=-1;for(var e=0;e<=u;e++)if(l.hasOwnProperty(e)){c=e;break}return a.StreamSense.activeIndex=c,c}function n(e,t){return e=e||null,t=t||null,e&&"object"==(void 0===e?"undefined":i(e))&&(t=e,e=null),l[++u]=new a.StreamSense(t,e),r(),l[u]}function o(){var e=!1,t=c;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var n in l)if(l[n]===arguments[0]){t=n;break}return l.hasOwnProperty(t)&&(e=l[t],delete l[t],e.reset(),r()),e}var l={},u=-1,c=-1;s.extend(e,{activeIndex:c,newInstance:n,new:n,destroyInstance:o,destroy:o,newPlaylist:function(e){return e=e||{},t().setPlaylist(e),t().getPlaylist()},newClip:function(e,r,n){return e=e||{},"number"==typeof r&&(e.ns_st_cn=r),t().setClip(e,n),t().getClip()},notify:function(e,r,n){return void 0!==e&&(n=n||null,r=r||{},t().notify(e,r,n))},setLabels:function(e){void 0!==e&&t().setLabels(e)},getLabels:function(){return t().getLabels()},setPlaylistLabels:function(e){void 0!==e&&t().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return t().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&t().getClip().setLabels(e)},getClipLabels:function(){return t().getClip().getLabels()},resetInstance:function(e){return t().reset(e||{})},resetPlaylist:function(e){return t().getPlaylist().reset(e||{})},resetClip:function(e){return t().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},t().viewNotify(null,e)},customEvent:function(e,r){return arguments.length>2&&(e=arguments[1],r=arguments[2]),e=e||{},"number"==typeof r&&(e.ns_st_po=r),t().customNotify(e,r)},exportState:function(){return t().exportState()},importState:function(e){t().importState(e)}})}(r),r}();return _.AdEvents=g,_.PlayerEvents=p,a.StreamingTag=a.StreamingTag||function(){var e=function(e){function t(e){return s.exists(e)||(e={}),s.exists(e.ns_st_ci)||(e.ns_st_ci="0"),s.exists(e.c3)||(e.c3="*null"),s.exists(e.c4)||(e.c4="*null"),s.exists(e.c6)||(e.c6="*null"),e}function r(e){return d>0&&e>=d?f+=e-d:f=0,f}function n(e){v.getState()!=h.IDLE&&v.getState()!=h.PAUSED?v.notify(p.END,r(e)):v.getState()==h.PAUSED&&v.notify(p.END,f)}function i(e,t,r){if(s.exists(e)&&s.exists(t)&&s.exists(r)){var n=t[e],i=r[e];return s.exists(n)&&s.exists(i)&&n===i}return!1}function o(e,t){n(e);var r={ns_st_cn:++c,ns_st_pn:"1",ns_st_tp:"0"};s.extend(r,t),v.setClip(r),g=t,d=e,f=0,v.notify(p.PLAY,f)}function l(e){var r=+new Date;n(r),c++,e=t(e);var i={ns_st_cn:c,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};s.extend(i,e),v.setClip(i),f=0,v.notify(p.PLAY,f),d=r,m=!1}function u(e,r){var n=+new Date;e=t(e),A==b.None&&(A=r),m&&A==r&&function(e){return i("ns_st_ci",g,e)&&i("c3",g,e)&&i("c4",g,e)&&i("c6",g,e)}(e)?(v.getClip().setLabels(e),v.getState()!=h.PLAYING&&(d=n,v.notify(p.PLAY,f))):o(n,e),m=!0,A=r}var c=0,d=0,f=0,g=null,m=!1,v=new _,y=!1,b={None:0,AudioContent:1,VideoContent:2},A=b.None;s.extend(this,{playAdvertisement:function(){y&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead."),l({ns_st_ct:"va"})},playVideoAdvertisement:function(e){var t={ns_st_ct:"va"};e&&s.extend(t,e),l(t)},playAudioAdvertisement:function(e){var t={ns_st_ct:"aa"};e&&s.extend(t,e),l(t)},playContentPart:function(e){y&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var t={ns_st_ct:"vc"};e&&s.extend(t,e),u(t,b.VideoContent)},playVideoContentPart:function(e){var t={ns_st_ct:"vc"};e&&s.extend(t,e),u(t,b.VideoContent)},playAudioContentPart:function(e){var t={ns_st_ct:"ac"};e&&s.extend(t,e),u(t,b.AudioContent)},stop:function(){var e=+new Date;v.notify(p.PAUSE,r(e))}}),function(){if(!a.comScore&&s.exists(e))if(y=s.isTrue(e.debug),s.exists(e.customerC2)){var t=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");v.setPixelURL(t+".scorecardresearch.com/p?c1=2"),v.setLabel("c2",e.customerC2)}else v.setPixelURL(""),y&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.");v.setLabel("ns_st_it","r")}()};return e}(),_}()}void 0===(n=function(){return window.ns_}.call(t,r,t,e))||(e.exports=n)},"3EqX":function(e,t,r){"use strict";var n,i;n=[r("5cge"),r("lDDm"),r("2gKN"),t],void 0===(i=function(e,t,r,n){n.init=function(e){this._init(),this._setContext(e)},n.start=function(){this._play()},n.stop=function(){this._tag&&this._tag.stop()},n.startAd=function(){this._asset.isInAd=!0,this._play()},n.stopAd=function(){this._asset.isInAd=!1,this._play()},n._meta=null,n._asset=null,n._tag=null,n._init=e.once(function(){r&&r.StreamingTag&&(n._tag=new r.StreamingTag({customerC2:t("csClientId")}))}),n._setContext=function(e){var t={};e.talkId&&(t.ns_st_ci=e.talkId),this._meta=t,this._asset={isInAd:!1,isVideo:!0}},n._reset=function(){n._meta=null,n._asset=null,n._tag=null},n._play=function(){this._tag&&(this._asset.isInAd?this._asset.isVideo?this._tag.playVideoAdvertisement():this._tag.playAudioAdvertisement():this._asset.isVideo?this._tag.playVideoContentPart(this._meta):this._tag.playAudioContentPart(this._meta))}}.apply(t,n))||(e.exports=i)},"3fiq":function(e,t,r){"use strict";var n,i;n=[r("+w1B"),r("Ivfv"),r("BaCQ")],void 0===(i=function(e,t,r){function n(){return new e.SafeString(r.apply(window,t(arguments)))}return e.registerHelper("icon",n),n}.apply(t,n))||(e.exports=i)},"3t64":function(e,t,r){"use strict";var n,i;n=[r("MaNa"),r("nDlD"),r("9n26"),r("K37z"),r("ggSm")],void 0===(i=function(e,t,r,n,i){return e.extend({className:"Embeddable__controls",propsDefaults:{unskipEnabled:!1,playEnabled:!1,pauseEnabled:!1,skipEnabled:!1,volumeActive:!1,volumeEnabled:!1,volumeMuted:!1,timingEnabled:!0,subtitlesEnabled:!1,subtitlesActive:!1,subtitlesEffective:!1,playlistEnabled:!1,playlistActive:!1,fullscreenEnabled:!1,fullscreen:!1,url:"https://www.ted.com/"},propsEvents:{"change:unskipEnabled":"renderUnskip","change:playEnabled":"renderPlay","change:pauseEnabled":"renderPause","change:skipEnabled":"renderSkip","change:volumeEnabled":"renderVolume","change:volumeMuted":"renderVolume","change:volumeActive":t("a.Embeddable__controls__volume","Embeddable__button--active"),"change:timingEnabled":r("span.Embeddable__controls__timing","Embeddable__controls__timing--inapplicable"),"change:subtitlesEnabled":"renderSubtitles","change:subtitlesActive":t("a.Embeddable__controls__subtitles","Embeddable__button--active"),"change:subtitlesEffective":t("a.Embeddable__controls__subtitles","Embeddable__button--effective"),"change:playlistActive":t("a.Embeddable__controls__playlist","Embeddable__button--active"),"change:playlistEnabled":"renderPlaylist","change:fullscreenEnabled":"renderFullscreen","change:fullscreen":"renderFullscreen","change:url":"renderUrl"},render:function(){return this.$el.html(i()),this.renderUnskip(),this.renderPlay(),this.renderPause(),this.renderSkip(),this.renderVolume(),this.renderSubtitles(),this.renderPlaylist(),this.renderFullscreen(),this.renderUrl(),this},renderCurrent:function(e){this.find("span.Embeddable__controls__current").text(n(e))},renderDuration:function(e){this.find("span.Embeddable__controls__duration").text(n(e))},renderUnskip:r("a.Embeddable__controls__unskip","Embeddable__button--disabled"),renderPlay:r("a.Embeddable__controls__play","Embeddable__button--inapplicable"),renderPause:r("a.Embeddable__controls__pause","Embeddable__button--inapplicable"),renderSkip:r("a.Embeddable__controls__skip","Embeddable__button--disabled"),renderSubtitles:r("a.Embeddable__controls__subtitles","Embeddable__button--inapplicable"),renderPlaylist:r("a.Embeddable__controls__skip,a.Embeddable__controls__unskip,a.Embeddable__controls__playlist","Embeddable__button--inapplicable"),renderVolume:function(){var e=this.props.get("volumeEnabled"),t=this.props.get("volumeMuted");this.find("a.Embeddable__controls__volume")[e?"removeClass":"addClass"]("Embeddable__button--inapplicable")[t?"addClass":"removeClass"]("Embeddable__button--effective")},renderUrl:function(){var e=this.props.get("url")||this.propsDefaults.url;this.find("a.Embeddable__controls__outbound").attr("href",e)},renderFullscreen:function(){var e=this.props.get("fullscreen"),t=this.props.get("fullscreenEnabled");this.$el[t&&e?"addClass":"removeClass"]("Embeddable__controls--fullscreen"),this.find("a.Embeddable__controls__fullscreen")[!t||e?"addClass":"removeClass"]("Embeddable__button--inapplicable"),this.find("a.Embeddable__controls__smallscreen")[t&&e?"removeClass":"addClass"]("Embeddable__button--inapplicable"),this.find("a.Embeddable__controls__outbound")[t?"addClass":"removeClass"]("Embeddable__button--inapplicable")}})}.apply(t,n))||(e.exports=i)},"5cge":function(e,t,r){"use strict";(function(e,n){var i;void 0===(i=function(e,t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){var o,l=[],u=[],c=0,d={},f=+new Date+"",p=75,h=40,g=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,v=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/&(?:amp|lt|gt|quot|#39);/g,_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/\w*$/,A=/<%=([\s\S]+?)%>/g,E=(E=/\bthis\b/)&&E.test(le)&&E,S=" \t\v\f\ufeff\n\r\u2028\u2029",w=RegExp("^["+S+"]*0+(?=.$)"),T=/($^)/,x=/[&<>"']/g,P=/['\n\r\t\u2028\u2029\\]/g,D=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],L=0,R="[object Arguments]",O="[object Array]",I="[object Boolean]",M="[object Date]",N="[object Error]",F="[object Function]",j="[object Number]",B="[object Object]",U="[object RegExp]",q="[object String]",H={};H[F]=!1,H[R]=H[O]=H[I]=H[M]=H[j]=H[B]=H[U]=H[q]=!0;var G={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},V={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},W=G[a(t)]&&t,K=G[a(e)]&&e&&e.exports==W&&e,$=G[void 0===n?"undefined":a(n)]&&n;function z(e,t,r){for(var n=(r||0)-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function Y(e,t){var r=void 0===t?"undefined":a(t);if(e=e.cache,"boolean"==r||null==t)return e[t];"number"!=r&&"string"!=r&&(r="object");var n="number"==r?t:f+t;return e=e[r]||(e[r]={}),"object"==r?e[n]&&z(e[n],t)>-1?0:-1:e[n]?0:-1}function X(e){var t=this.cache,r=void 0===e?"undefined":a(e);if("boolean"==r||null==e)t[e]=!0;else{"number"!=r&&"string"!=r&&(r="object");var n="number"==r?e:f+e,i=t[r]||(t[r]={});"object"==r?(i[n]||(i[n]=[])).push(e)==this.array.length&&(t[r]=!1):i[n]=!0}}function Q(e){return e.charCodeAt(0)}function J(e,t){var r=e.index,n=t.index;if((e=e.criteria)!==(t=t.criteria)){if(e>t||void 0===e)return 1;if(e<t||void 0===t)return-1}return r<n?-1:1}function Z(e){var t=-1,r=e.length,n=re();n.false=n.null=n.true=n[void 0]=!1;var i=re();for(i.array=e,i.cache=n,i.push=X;++t<r;)i.push(e[t]);return!1===n.object?(se(i),null):i}function ee(e){return"\\"+V[e]}function te(){return l.pop()||[]}function re(){return u.pop()||{args:"",array:null,bottom:"",cache:null,criteria:null,false:!1,firstArg:"",index:0,init:"",leading:!1,loop:"",maxWait:0,null:!1,number:null,object:null,push:null,shadowedProps:null,string:null,top:"",trailing:!1,true:!1,undefined:!1,useHas:!1,useKeys:!1,value:null}}function ne(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function ie(){}function ae(e){e.length=0,l.length<h&&l.push(e)}function se(e){var t=e.cache;t&&se(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,u.length<h&&u.push(e)}function oe(e,t,r){t||(t=0),void 0===r&&(r=e?e.length:0);for(var n=-1,i=r-t||0,a=Array(i<0?0:i);++n<i;)a[n]=e[t+n];return a}function le(e){var t=(e=e?ue.defaults(s.Object(),e,ue.pick(s,D)):s).Array,r=e.Boolean,n=e.Date,i=e.Error,l=e.Function,u=e.Math,h=e.Number,V=e.Object,W=e.RegExp,$=e.String,X=e.TypeError,ce=[],de=i.prototype,fe=V.prototype,pe=$.prototype,he=e._,ge=W("^"+$(fe.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),me=u.ceil,ve=e.clearTimeout,ye=ce.concat,_e=u.floor,be=l.prototype.toString,Ae=ge.test(Ae=V.getPrototypeOf)&&Ae,Ee=fe.hasOwnProperty,Se=ce.push,we=fe.propertyIsEnumerable,Te=e.setImmediate,ke=e.setTimeout,xe=fe.toString,Pe=ge.test(Pe=xe.bind)&&Pe,De=ge.test(De=V.create)&&De,Ce=ge.test(Ce=t.isArray)&&Ce,Le=e.isFinite,Re=e.isNaN,Oe=ge.test(Oe=V.keys)&&Oe,Ie=u.max,Me=u.min,Ne=e.parseInt,Fe=u.random,je=ce.slice,Be=ge.test(e.attachEvent),Ue=Pe&&!/\n|true/.test(Pe+Be),qe={};qe[O]=t,qe[I]=r,qe[M]=n,qe[F]=l,qe[B]=V,qe[j]=h,qe[U]=W,qe[q]=$;var He={};function Ge(e){return e&&"object"==(void 0===e?"undefined":a(e))&&!at(e)&&Ee.call(e,"__wrapped__")?e:new Ve(e)}function Ve(e){this.__wrapped__=e}He[O]=He[M]=He[j]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},He[I]=He[q]={constructor:!0,toString:!0,valueOf:!0},He[N]=He[F]=He[U]={constructor:!0,toString:!0},He[B]={constructor:!0},function(){for(var e=C.length;e--;){var t=C[e];for(var r in He)Ee.call(He,r)&&!Ee.call(He[r],t)&&(He[r][t]=!1)}}(),Ve.prototype=Ge.prototype;var We=Ge.support={};!function(){var e=function(){this.x=1},r={0:1,length:1},n=[];for(var i in e.prototype={valueOf:1,y:1},new e)n.push(i);for(i in arguments);We.argsObject=arguments.constructor==V&&!(arguments instanceof t),We.argsClass=it(arguments),We.enumErrorProps=we.call(de,"message")||we.call(de,"name"),We.enumPrototypes=we.call(e,"prototype"),We.fastBind=Pe&&!Ue,We.ownLast="x"!=n[0],We.nonEnumArgs=0!=i,We.nonEnumShadows=!/valueOf/.test(n),We.spliceObjects=(ce.splice.call(r,0,1),!r[0]),We.unindexedChars="x"[0]+V("x")[0]!="xx";try{We.nodeClass=!(xe.call(document)==B&&!({toString:0}+""))}catch(e){We.nodeClass=!0}}(1),Ge.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:A,variable:"",imports:{_:Ge}};var Ke=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",We.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):We.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),We.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),We.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var r=[];if(We.enumPrototypes&&r.push('!(skipProto && index == "prototype")'),We.enumErrorProps&&r.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.useKeys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",r.length&&(t+="    if ("+r.join(" && ")+") {\n  "),t+=e.loop+";    ",r.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&r.push("hasOwnProperty.call(iterable, index)"),r.length&&(t+="    if ("+r.join(" && ")+") {\n  "),t+=e.loop+";    ",r.length&&(t+="\n    }"),t+="\n  }    ",We.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||We.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"},$e={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},ze={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",array:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},Ye={top:"if (!objectTypes[typeof iterable]) return result;\n"+ze.top,array:!1};function Xe(e,t,r,n){var i=_t(e),a=!r,s=t;if(a){var o=n;r=t}else if(!i){if(!n)throw new X;t=e}return function n(){var l=arguments,u=a?this:t;if(i||(e=t[s]),r.length&&(l=l.length?(l=je.call(l),o?l.concat(r):r.concat(l)):r),this instanceof n){u=Je(e.prototype);var c=e.apply(u,l);return bt(c)?c:u}return e.apply(u,l)}}function Qe(){var e=re();e.shadowedProps=C,e.array=e.bottom=e.loop=e.top="",e.init="iterable",e.useHas=!0,e.useKeys=!!ot;for(var t,r=0;t=arguments[r];r++)for(var n in t)e[n]=t[n];var i=e.args;e.firstArg=/^[^,]+/.exec(i)[0];var a=l("errorClass, errorProto, hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+Ke(e)+"\n}");return se(e),a(N,de,Ee,it,at,St,ot,Ge,fe,G,He,q,pe,xe)}function Je(e){return bt(e)?De(e):{}}if(!De)var Je=function(e){if(bt(e)){ie.prototype=e;var t=new ie;ie.prototype=null}return t||{}};function Ze(e){return ut[e]}function et(e,t,r){var n=(n=Ge.indexOf)===Ut?z:n;return n}function tt(e){return function(t,r,n,i){return"boolean"!=typeof r&&null!=r&&(n=(i=n)&&i[r]===t?o:r,r=!1),null!=n&&(n=Ge.createCallback(n,i)),e(t,r,n,i)}}function rt(e){var t,r;return!(!e||xe.call(e)!=B||_t(t=e.constructor)&&!(t instanceof t)||!We.argsClass&&it(e)||!We.nodeClass&&ne(e))&&(We.ownLast?(ht(e,function(e,t,n){return r=Ee.call(n,t),!1}),!1!==r):(ht(e,function(e,t){r=t}),r===o||Ee.call(e,r)))}function nt(e){return ct[e]}function it(e){return xe.call(e)==R}We.argsClass||(it=function(e){return!!e&&Ee.call(e,"callee")});var at=Ce||function(e){return!!e&&("object"==(void 0===e?"undefined":a(e))&&xe.call(e)==O)},st=Qe({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),ot=Oe?function(e){return bt(e)?We.enumPrototypes&&"function"==typeof e||We.nonEnumArgs&&e.length&&it(e)?st(e):Oe(e):[]}:st,lt=Qe(ze),ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ct=vt(ut),dt=Qe($e,{top:$e.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = lodash.createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});function ft(e,t,r,n,i,a){var s=e;if("boolean"!=typeof t&&null!=t&&(n=r,r=t,t=!1),"function"==typeof r){if(r=void 0===n?r:Ge.createCallback(r,n,1),void 0!==(s=r(s)))return s;s=e}var l=bt(s);if(l){var u=xe.call(s);if(!H[u]||!We.nodeClass&&ne(s))return s;var c=at(s)}if(!l||!t)return l?c?oe(s):dt({},s):s;var d=qe[u];switch(u){case I:case M:return new d(+s);case j:case q:return new d(s);case U:return d(s.source,b.exec(s))}var f=!i;i||(i=te()),a||(a=te());for(var p=i.length;p--;)if(i[p]==e)return a[p];return s=c?d(s.length):{},c&&(Ee.call(e,"index")&&(s.index=e.index),Ee.call(e,"input")&&(s.input=e.input)),i.push(e),a.push(s),(c?lt:gt)(e,function(e,n){s[n]=ft(e,t,r,o,i,a)}),f&&(ae(i),ae(a)),s}var pt=Qe($e);var ht=Qe(ze,Ye,{useHas:!1}),gt=Qe(ze,Ye);function mt(e){var t=[];return ht(e,function(e,r){_t(e)&&t.push(r)}),t.sort()}function vt(e){for(var t=-1,r=ot(e),n=r.length,i={};++t<n;){var a=r[t];i[e[a]]=a}return i}function yt(e,t,r,n,i,s){var o=r===d;if("function"==typeof r&&!o){var l=(r=Ge.createCallback(r,n,2))(e,t);if(void 0!==l)return!!l}if(e===t)return 0!==e||1/e==1/t;var u=void 0===e?"undefined":a(e),c=void 0===t?"undefined":a(t);if(e==e&&(!e||"function"!=u&&"object"!=u)&&(!t||"function"!=c&&"object"!=c))return!1;if(null==e||null==t)return e===t;var f=xe.call(e),p=xe.call(t);if(f==R&&(f=B),p==R&&(p=B),f!=p)return!1;switch(f){case I:case M:return+e==+t;case j:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case U:case q:return e==$(t)}var h=f==O;if(!h){if(Ee.call(e,"__wrapped__ ")||Ee.call(t,"__wrapped__"))return yt(e.__wrapped__||e,t.__wrapped__||t,r,n,i,s);if(f!=B||!We.nodeClass&&(ne(e)||ne(t)))return!1;var g=!We.argsObject&&it(e)?V:e.constructor,m=!We.argsObject&&it(t)?V:t.constructor;if(g!=m&&!(_t(g)&&g instanceof g&&_t(m)&&m instanceof m))return!1}var v=!i;i||(i=te()),s||(s=te());for(var y=i.length;y--;)if(i[y]==e)return s[y]==t;var _=0;if(l=!0,i.push(e),s.push(t),h){if(y=e.length,_=t.length,!(l=_==e.length)&&!o)return l;for(;_--;){var b=y,A=t[_];if(o)for(;b--&&!(l=yt(e[b],A,r,n,i,s)););else if(!(l=yt(e[_],A,r,n,i,s)))break}return l}return ht(t,function(t,a,o){if(Ee.call(o,a))return _++,l=Ee.call(e,a)&&yt(e[a],t,r,n,i,s)}),l&&!o&&ht(e,function(e,t,r){if(Ee.call(r,t))return l=--_>-1}),v&&(ae(i),ae(s)),l}function _t(e){return"function"==typeof e}function bt(e){return!(!e||!G[void 0===e?"undefined":a(e)])}function At(e){return"number"==typeof e||xe.call(e)==j}_t(/x/)&&(_t=function(e){return"function"==typeof e&&xe.call(e)==F});var Et=Ae?function(e){if(!e||xe.call(e)!=B||!We.argsClass&&it(e))return!1;var t=e.valueOf,r="function"==typeof t&&(r=Ae(t))&&Ae(r);return r?e==r||Ae(e)==r:rt(e)}:rt;function St(e){return"string"==typeof e||xe.call(e)==q}function wt(e){for(var r=-1,n=ot(e),i=n.length,a=t(i);++r<i;)a[r]=e[n[r]];return a}function Tt(e,t,r){var n=-1,i=et(),a=e?e.length:0,s=!1;return r=(r<0?Ie(0,a+r):r)||0,a&&"number"==typeof a?s=(St(e)?e.indexOf(t,r):i(e,t,r))>-1:lt(e,function(e){if(++n>=r)return!(s=e===t)}),s}function kt(e,t,r){var n=!0;if(t=Ge.createCallback(t,r),at(e))for(var i=-1,a=e.length;++i<a&&(n=!!t(e[i],i,e)););else lt(e,function(e,r,i){return n=!!t(e,r,i)});return n}function xt(e,t,r){var n=[];if(t=Ge.createCallback(t,r),at(e))for(var i=-1,a=e.length;++i<a;){var s=e[i];t(s,i,e)&&n.push(s)}else lt(e,function(e,r,i){t(e,r,i)&&n.push(e)});return n}function Pt(e,t,r){var n;if(t=Ge.createCallback(t,r),!at(e))return lt(e,function(e,r,i){if(t(e,r,i))return n=e,!1}),n;for(var i=-1,a=e.length;++i<a;){var s=e[i];if(t(s,i,e))return s}}function Dt(e,t,r){if(t&&void 0===r&&at(e))for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););else lt(e,t,r);return e}function Ct(e,r,n){var i=-1,a=e?e.length:0,s=t("number"==typeof a?a:0);if(r=Ge.createCallback(r,n),at(e))for(;++i<a;)s[i]=r(e[i],i,e);else lt(e,function(e,t,n){s[++i]=r(e,t,n)});return s}function Lt(e,t,r){var n=-1/0,i=n;if(!t&&at(e))for(var a=-1,s=e.length;++a<s;){var o=e[a];o>i&&(i=o)}else t=!t&&St(e)?Q:Ge.createCallback(t,r),lt(e,function(e,r,a){var s=t(e,r,a);s>n&&(n=s,i=e)});return i}var Rt=Ct;function Ot(e,t,r,n){var i=arguments.length<3;if(t=Ge.createCallback(t,n,4),at(e)){var a=-1,s=e.length;for(i&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e)}else lt(e,function(e,n,a){r=i?(i=!1,e):t(r,e,n,a)});return r}function It(e,t,r,n){var i=e,a=e?e.length:0,s=arguments.length<3;if("number"!=typeof a){var o=ot(e);a=o.length}else We.unindexedChars&&St(e)&&(i=e.split(""));return t=Ge.createCallback(t,n,4),Dt(e,function(e,n,l){n=o?o[--a]:--a,r=s?(s=!1,i[n]):t(r,i[n],n,l)}),r}function Mt(e,t,r){var n;if(t=Ge.createCallback(t,r),at(e))for(var i=-1,a=e.length;++i<a&&!(n=t(e[i],i,e)););else lt(e,function(e,r,i){return!(n=t(e,r,i))});return!!n}var Nt=xt;function Ft(e){var t=-1,r=et(),n=e?e.length:0,i=ye.apply(ce,je.call(arguments,1)),a=[],s=n>=p&&r===z;if(s){var o=Z(i);o?(r=Y,i=o):s=!1}for(;++t<n;){var l=e[t];r(i,l)<0&&a.push(l)}return s&&se(i),a}function jt(e,t,r){if(e){var n=0,i=e.length;if("number"!=typeof t&&null!=t){var a=-1;for(t=Ge.createCallback(t,r);++a<i&&t(e[a],a,e);)n++}else if(null==(n=t)||r)return e[0];return oe(e,0,Me(Ie(0,n),i))}}var Bt=tt(function e(t,r,n){for(var i=-1,a=t?t.length:0,s=[];++i<a;){var o=t[i];n&&(o=n(o,i,t)),at(o)?Se.apply(s,r?o:e(o)):s.push(o)}return s});function Ut(e,t,r){if("number"==typeof r){var n=e?e.length:0;r=r<0?Ie(0,n+r):r||0}else if(r){var i=Ht(e,t);return e[i]===t?i:-1}return e?z(e,t,r):-1}function qt(e,t,r){if("number"!=typeof t&&null!=t){var n=0,i=-1,a=e?e.length:0;for(t=Ge.createCallback(t,r);++i<a&&t(e[i],i,e);)n++}else n=null==t||r?1:Ie(0,t);return oe(e,n)}function Ht(e,t,r,n){var i=0,a=e?e.length:i;for(t=(r=r?Ge.createCallback(r,n,1):Yt)(t);i<a;){var s=i+a>>>1;r(e[s])<t?i=s+1:a=s}return i}var Gt=tt(function(e,t,r){var n=-1,i=et(),a=e?e.length:0,s=[],o=!t&&a>=p&&i===z,l=r||o?te():s;if(o){var u=Z(l);u?(i=Y,l=u):(o=!1,l=r?l:(ae(l),s))}for(;++n<a;){var c=e[n],d=r?r(c,n,e):c;(t?!n||l[l.length-1]!==d:i(l,d)<0)&&((r||o)&&l.push(d),s.push(c))}return o?(ae(l.array),se(l)):r&&ae(l),s});function Vt(e){for(var r=-1,n=e?Lt(Rt(e,"length")):0,i=t(n<0?0:n);++r<n;)i[r]=Rt(e,r);return i}function Wt(e,t){for(var r=-1,n=e?e.length:0,i={};++r<n;){var a=e[r];t?i[a]=t[r]:i[a[0]]=a[1]}return i}function Kt(e,t){return We.fastBind||Pe&&arguments.length>2?Pe.call.apply(Pe,arguments):Xe(e,t,je.call(arguments,2))}function $t(e,t,r){var i,a,s,o=0,l=0,u=!1,c=null,d=null,f=!0;function p(){ve(c),ve(d),o=0,c=d=null}function h(){var t=f&&(!m||o>1);p(),t&&(!1!==u&&(l=new n),a=e.apply(s,i))}function g(){p(),(f||u!==t)&&(l=new n,a=e.apply(s,i))}if(t=Ie(0,t||0),!0===r){var m=!0;f=!1}else bt(r)&&(m=r.leading,u="maxWait"in r&&Ie(t,r.maxWait||0),f="trailing"in r?r.trailing:f);return function(){if(i=arguments,s=this,o++,ve(d),!1===u)m&&o<2&&(a=e.apply(s,i));else{var r=new n;c||m||(l=r);var f=u-(r-l);f<=0?(ve(c),c=null,l=r,a=e.apply(s,i)):c||(c=ke(g,f))}return t!==u&&(d=ke(h,t)),a}}function zt(e){var t=je.call(arguments,1);return ke(function(){e.apply(o,t)},1)}function Yt(e){return e}function Xt(e){Dt(mt(e),function(t){var r=Ge[t]=e[t];Ge.prototype[t]=function(){var e=this.__wrapped__,t=[e];Se.apply(t,arguments);var n=r.apply(Ge,t);return e&&"object"==(void 0===e?"undefined":a(e))&&e===n?this:new Ve(n)}})}Ue&&K&&"function"==typeof Te&&(zt=Kt(Te,e));var Qt=8==Ne(S+"08")?Ne:function(e,t){return Ne(St(e)?e.replace(w,""):e,t||0)};function Jt(){return this.__wrapped__}return Ge.after=function(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}},Ge.assign=dt,Ge.at=function(e){var r=-1,n=ye.apply(ce,je.call(arguments,1)),i=n.length,a=t(i);for(We.unindexedChars&&St(e)&&(e=e.split(""));++r<i;)a[r]=e[n[r]];return a},Ge.bind=Kt,Ge.bindAll=function(e){for(var t=arguments.length>1?ye.apply(ce,je.call(arguments,1)):mt(e),r=-1,n=t.length;++r<n;){var i=t[r];e[i]=Kt(e[i],e)}return e},Ge.bindKey=function(e,t){return Xe(e,t,je.call(arguments,2),d)},Ge.compact=function(e){for(var t=-1,r=e?e.length:0,n=[];++t<r;){var i=e[t];i&&n.push(i)}return n},Ge.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length;r--;)t=[e[r].apply(this,t)];return t[0]}},Ge.countBy=function(e,t,r){var n={};return t=Ge.createCallback(t,r),Dt(e,function(e,r,i){r=$(t(e,r,i)),Ee.call(n,r)?n[r]++:n[r]=1}),n},Ge.createCallback=function(e,t,r){if(null==e)return Yt;var n=void 0===e?"undefined":a(e);if("function"!=n){if("object"!=n)return function(t){return t[e]};var i=ot(e);return function(t){for(var r=i.length,n=!1;r--&&(n=yt(t[i[r]],e[i[r]],d)););return n}}return void 0===t||E&&!E.test(be.call(e))?e:1===r?function(r){return e.call(t,r)}:2===r?function(r,n){return e.call(t,r,n)}:4===r?function(r,n,i,a){return e.call(t,r,n,i,a)}:function(r,n,i){return e.call(t,r,n,i)}},Ge.debounce=$t,Ge.defaults=pt,Ge.defer=zt,Ge.delay=function(e,t){var r=je.call(arguments,2);return ke(function(){e.apply(o,r)},t)},Ge.difference=Ft,Ge.filter=xt,Ge.flatten=Bt,Ge.forEach=Dt,Ge.forIn=ht,Ge.forOwn=gt,Ge.functions=mt,Ge.groupBy=function(e,t,r){var n={};return t=Ge.createCallback(t,r),Dt(e,function(e,r,i){r=$(t(e,r,i)),(Ee.call(n,r)?n[r]:n[r]=[]).push(e)}),n},Ge.initial=function(e,t,r){if(!e)return[];var n=0,i=e.length;if("number"!=typeof t&&null!=t){var a=i;for(t=Ge.createCallback(t,r);a--&&t(e[a],a,e);)n++}else n=null==t||r?1:t||n;return oe(e,0,Me(Ie(0,i-n),i))},Ge.intersection=function(e){for(var t=arguments,r=t.length,n=-1,i=te(),a=-1,s=et(),o=e?e.length:0,l=[],u=te();++n<r;){var c=t[n];i[n]=s===z&&(c?c.length:0)>=p&&Z(n?t[n]:u)}e:for(;++a<o;){var d=i[0];if(c=e[a],(d?Y(d,c):s(u,c))<0){for(n=r,(d||u).push(c);--n;)if(((d=i[n])?Y(d,c):s(t[n],c))<0)continue e;l.push(c)}}for(;r--;)(d=i[r])&&se(d);return ae(i),ae(u),l},Ge.invert=vt,Ge.invoke=function(e,r){var n=je.call(arguments,2),i=-1,a="function"==typeof r,s=e?e.length:0,o=t("number"==typeof s?s:0);return Dt(e,function(e){o[++i]=(a?r:e[r]).apply(e,n)}),o},Ge.keys=ot,Ge.map=Ct,Ge.max=Lt,Ge.memoize=function(e,t){function r(){var n=r.cache,i=f+(t?t.apply(this,arguments):arguments[0]);return Ee.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}return r.cache={},r},Ge.merge=function e(t,r,n){var i=arguments,a=0,s=2;if(!bt(t))return t;if(n===d)var o=i[3],l=i[4],u=i[5];else{var c=!0;l=te(),u=te(),"number"!=typeof n&&(s=i.length),s>3&&"function"==typeof i[s-2]?o=Ge.createCallback(i[--s-1],i[s--],2):s>2&&"function"==typeof i[s-1]&&(o=i[--s])}for(;++a<s;)(at(i[a])?Dt:gt)(i[a],function(r,n){var i,a,s=r,c=t[n];if(r&&((a=at(r))||Et(r))){for(var f,p=l.length;p--;)if(i=l[p]==r){c=u[p];break}i||(o&&(f=void 0!==(s=o(c,r)))&&(c=s),f||(c=a?at(c)?c:[]:Et(c)?c:{}),l.push(r),u.push(c),f||(c=e(c,r,d,o,l,u)))}else o&&void 0===(s=o(c,r))&&(s=r),void 0!==s&&(c=s);t[n]=c});return c&&(ae(l),ae(u)),t},Ge.min=function(e,t,r){var n=1/0,i=n;if(!t&&at(e))for(var a=-1,s=e.length;++a<s;){var o=e[a];o<i&&(i=o)}else t=!t&&St(e)?Q:Ge.createCallback(t,r),lt(e,function(e,r,a){var s=t(e,r,a);s<n&&(n=s,i=e)});return i},Ge.omit=function(e,t,r){var n=et(),i="function"==typeof t,a={};if(i)t=Ge.createCallback(t,r);else var s=ye.apply(ce,je.call(arguments,1));return ht(e,function(e,r,o){(i?!t(e,r,o):n(s,r)<0)&&(a[r]=e)}),a},Ge.once=function(e){var t,r;return function(){return t?r:(t=!0,r=e.apply(this,arguments),e=null,r)}},Ge.pairs=function(e){for(var r=-1,n=ot(e),i=n.length,a=t(i);++r<i;){var s=n[r];a[r]=[s,e[s]]}return a},Ge.partial=function(e){return Xe(e,je.call(arguments,1))},Ge.partialRight=function(e){return Xe(e,je.call(arguments,1),null,d)},Ge.pick=function(e,t,r){var n={};if("function"!=typeof t)for(var i=-1,a=ye.apply(ce,je.call(arguments,1)),s=bt(e)?a.length:0;++i<s;){var o=a[i];o in e&&(n[o]=e[o])}else t=Ge.createCallback(t,r),ht(e,function(e,r,i){t(e,r,i)&&(n[r]=e)});return n},Ge.pluck=Rt,Ge.range=function(e,r,n){e=+e||0,n=+n||1,null==r&&(r=e,e=0);for(var i=-1,a=Ie(0,me((r-e)/n)),s=t(a);++i<a;)s[i]=e,e+=n;return s},Ge.reject=function(e,t,r){return t=Ge.createCallback(t,r),xt(e,function(e,r,n){return!t(e,r,n)})},Ge.rest=qt,Ge.shuffle=function(e){var r=-1,n=e?e.length:0,i=t("number"==typeof n?n:0);return Dt(e,function(e){var t=_e(Fe()*(++r+1));i[r]=i[t],i[t]=e}),i},Ge.sortBy=function(e,r,n){var i=-1,a=e?e.length:0,s=t("number"==typeof a?a:0);for(r=Ge.createCallback(r,n),Dt(e,function(e,t,n){var a=s[++i]=re();a.criteria=r(e,t,n),a.index=i,a.value=e}),a=s.length,s.sort(J);a--;){var o=s[a];s[a]=o.value,se(o)}return s},Ge.tap=function(e,t){return t(e),e},Ge.throttle=function(e,t,r){var n=!0,i=!0;!1===r?n=!1:bt(r)&&(n="leading"in r?r.leading:n,i="trailing"in r?r.trailing:i),(r=re()).leading=n,r.maxWait=t,r.trailing=i;var a=$t(e,t,r);return se(r),a},Ge.times=function(e,r,n){e=(e=+e)>-1?e:0;var i=-1,a=t(e);for(r=Ge.createCallback(r,n,1);++i<e;)a[i]=r(i);return a},Ge.toArray=function(e){return e&&"number"==typeof e.length?We.unindexedChars&&St(e)?e.split(""):oe(e):wt(e)},Ge.transform=function(e,t,r,n){var i=at(e);if(t=Ge.createCallback(t,n,4),null==r)if(i)r=[];else{var a=e&&e.constructor,s=a&&a.prototype;r=Je(s)}return(i?lt:gt)(e,function(e,n,i){return t(r,e,n,i)}),r},Ge.union=function(e){return at(e)||(arguments[0]=e?je.call(e):ce),Gt(ye.apply(ce,arguments))},Ge.uniq=Gt,Ge.unzip=Vt,Ge.values=wt,Ge.where=Nt,Ge.without=function(e){return Ft(e,je.call(arguments,1))},Ge.wrap=function(e,t){return function(){var r=[e];return Se.apply(r,arguments),t.apply(this,r)}},Ge.zip=function(e){return e?Vt(arguments):[]},Ge.zipObject=Wt,Ge.collect=Ct,Ge.drop=qt,Ge.each=Dt,Ge.extend=dt,Ge.methods=mt,Ge.object=Wt,Ge.select=xt,Ge.tail=qt,Ge.unique=Gt,Xt(Ge),Ge.chain=Ge,Ge.prototype.chain=function(){return this},Ge.clone=ft,Ge.cloneDeep=function(e,t,r){return ft(e,!0,t,r)},Ge.contains=Tt,Ge.escape=function(e){return null==e?"":$(e).replace(x,Ze)},Ge.every=kt,Ge.find=Pt,Ge.findIndex=function(e,t,r){var n=-1,i=e?e.length:0;for(t=Ge.createCallback(t,r);++n<i;)if(t(e[n],n,e))return n;return-1},Ge.findKey=function(e,t,r){var n;return t=Ge.createCallback(t,r),gt(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n},Ge.has=function(e,t){return!!e&&Ee.call(e,t)},Ge.identity=Yt,Ge.indexOf=Ut,Ge.isArguments=it,Ge.isArray=at,Ge.isBoolean=function(e){return!0===e||!1===e||xe.call(e)==I},Ge.isDate=function(e){return!!e&&"object"==(void 0===e?"undefined":a(e))&&xe.call(e)==M},Ge.isElement=function(e){return!!e&&1===e.nodeType},Ge.isEmpty=function(e){var t=!0;if(!e)return t;var r=xe.call(e),n=e.length;return r==O||r==q||(We.argsClass?r==R:it(e))||r==B&&"number"==typeof n&&_t(e.splice)?!n:(gt(e,function(){return t=!1}),t)},Ge.isEqual=yt,Ge.isFinite=function(e){return Le(e)&&!Re(parseFloat(e))},Ge.isFunction=_t,Ge.isNaN=function(e){return At(e)&&e!=+e},Ge.isNull=function(e){return null===e},Ge.isNumber=At,Ge.isObject=bt,Ge.isPlainObject=Et,Ge.isRegExp=function(e){return!(!e||!G[void 0===e?"undefined":a(e)])&&xe.call(e)==U},Ge.isString=St,Ge.isUndefined=function(e){return void 0===e},Ge.lastIndexOf=function(e,t,r){var n=e?e.length:0;for("number"==typeof r&&(n=(r<0?Ie(0,n+r):Me(r,n-1))+1);n--;)if(e[n]===t)return n;return-1},Ge.mixin=Xt,Ge.noConflict=function(){return e._=he,this},Ge.parseInt=Qt,Ge.random=function(e,t){null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0;var r=Fe();return e%1||t%1?e+Me(r*(t-e+parseFloat("1e-"+((r+"").length-1))),t):e+_e(r*(t-e+1))},Ge.reduce=Ot,Ge.reduceRight=It,Ge.result=function(e,t){var r=e?e[t]:o;return _t(r)?e[t]():r},Ge.runInContext=le,Ge.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:ot(e).length},Ge.some=Mt,Ge.sortedIndex=Ht,Ge.template=function(e,t,r){var n=Ge.templateSettings;e||(e=""),r=pt({},r,n);var i,a=pt({},r.imports,n.imports),s=ot(a),u=wt(a),c=0,d=r.interpolate||T,f="__p += '",p=W((r.escape||T).source+"|"+d.source+"|"+(d===A?_:T).source+"|"+(r.evaluate||T).source+"|$","g");e.replace(p,function(t,r,n,a,s,o){return n||(n=a),f+=e.slice(c,o).replace(P,ee),r&&(f+="' +\n__e("+r+") +\n'"),s&&(i=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=o+t.length,t}),f+="';\n";var h=r.variable,y=h;y||(f="with ("+(h="obj")+") {\n"+f+"\n}\n"),f=(i?f.replace(g,""):f).replace(m,"$1").replace(v,"$1;"),f="function("+h+") {\n"+(y?"":h+" || ("+h+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var b="\n/*\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+L+++"]")+"\n*/";try{var E=l(s,"return "+f+b).apply(o,u)}catch(e){throw e.source=f,e}return t?E(t):(E.source=f,E)},Ge.unescape=function(e){return null==e?"":$(e).replace(y,nt)},Ge.uniqueId=function(e){var t=++c;return $(null==e?"":e)+t},Ge.all=kt,Ge.any=Mt,Ge.detect=Pt,Ge.findWhere=Pt,Ge.foldl=Ot,Ge.foldr=It,Ge.include=Tt,Ge.inject=Ot,gt(Ge,function(e,t){Ge.prototype[t]||(Ge.prototype[t]=function(){var t=[this.__wrapped__];return Se.apply(t,arguments),e.apply(Ge,t)})}),Ge.first=jt,Ge.last=function(e,t,r){if(e){var n=0,i=e.length;if("number"!=typeof t&&null!=t){var a=i;for(t=Ge.createCallback(t,r);a--&&t(e[a],a,e);)n++}else if(null==(n=t)||r)return e[i-1];return oe(e,Ie(0,i-n))}},Ge.take=jt,Ge.head=jt,gt(Ge,function(e,t){Ge.prototype[t]||(Ge.prototype[t]=function(t,r){var n=e(this.__wrapped__,t,r);return null==t||r&&"function"!=typeof t?n:new Ve(n)})}),Ge.VERSION="1.3.1",Ge.prototype.toString=function(){return $(this.__wrapped__)},Ge.prototype.value=Jt,Ge.prototype.valueOf=Jt,lt(["join","pop","shift"],function(e){var t=ce[e];Ge.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),lt(["push","reverse","sort","unshift"],function(e){var t=ce[e];Ge.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),lt(["concat","slice","splice"],function(e){var t=ce[e];Ge.prototype[e]=function(){return new Ve(t.apply(this.__wrapped__,arguments))}}),We.spliceObjects||lt(["pop","shift","splice"],function(e){var t=ce[e],r="splice"==e;Ge.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return 0===e.length&&delete e[0],r?new Ve(n):n}}),Ge}!$||$.global!==$&&$.window!==$||(s=$);var ue=le();"object"==a(r("K2jg"))&&r("K2jg")?(s._=ue,(i=function(){return ue}.call(t,r,t,e))===o||(e.exports=i)):W&&!W.nodeType?K?(K.exports=ue)._=ue:W._=ue:s._=ue}(void 0)}.apply(t,[e,t]))||(e.exports=i)}).call(this,r("RoC8")(e),r("pCvA"))},"6+Qq":function(e,t,r){"use strict";(function(r){t.__esModule=!0,t.default=function(e){var t=void 0!==r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default}).call(this,r("pCvA"))},"7UkH":function(e,t,r){"use strict";t.__esModule=!0;var n=r("82EY");t.default=function(e){e.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},e.exports=t.default},"82EY":function(e,t,r){"use strict";t.__esModule=!0,t.extend=o,t.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(i,s)},t.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},t.createFrame=function(e){var t=o({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,a=/[&<>"'`=]/;function s(e){return n[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var l=Object.prototype.toString;t.toString=l;var u=function(e){return"function"==typeof e};u(/x/)&&(t.isFunction=u=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=u;var c=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=c},"9Icy":function(e,t,r){(function(t){e.exports=t.$=r("KLVm")}).call(this,r("pCvA"))},"9n26":function(e,t,r){"use strict";var n;void 0===(n=function(){return function(e,t){return function(r,n){this.toggleClass(e,t,!n)}}}.call(t,r,t,e))||(e.exports=n)},AIJh:function(e,t,r){"use strict";t.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];function i(e,t){var r=t&&t.loc,a=void 0,s=void 0;r&&(e+=" - "+(a=r.start.line)+":"+(s=r.start.column));for(var o=Error.prototype.constructor.call(this,e),l=0;l<n.length;l++)this[n[l]]=o[n[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{r&&(this.lineNumber=a,Object.defineProperty?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(e){}}i.prototype=new Error,t.default=i,e.exports=t.default},AQSU:function(e,t,r){var n,i;n=[r("O074"),r("ikLi")],void 0===(i=function(e,t){return function(e,t){var r=!1;e(document).mouseup(function(){r=!1}),e.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(r){if(!0===e.data(r.target,t.widgetName+".preventClickEvent"))return e.removeData(r.target,t.widgetName+".preventClickEvent"),r.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),r=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e),e}.apply(t,n))||(e.exports=i)},BaCQ:function(e,t,r){"use strict";var n,i;n=[r("+w1B")],void 0===(i=function(e){var t=e.Utils.escapeExpression;return function(e,r,n){return e=t(e),r=t(r),'<i class="icon icon_'+e+" "+((n=t(n))||"")+'">'+(r?"<span class=screen-reader-text>"+r+"</span>":"")+"</i>"}}.apply(t,n))||(e.exports=i)},BjwM:function(e,t,r){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t){function r(e,t){var r=E(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&o(e)}(e)&&m.call(e,"callee")&&(!y.call(e,"callee")||v.call(e)==d)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,a=!!n;for(var s in e)!t&&!m.call(e,s)||a&&("length"==s||i(s,n))||r.push(s);return r}function n(e,t,r){var n=e[t];m.call(e,t)&&s(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function i(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||h.test(e))&&e>-1&&e%1==0&&e<t}function a(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||g)}function s(e,t){return e===t||e!=e&&t!=t}function o(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}(e.length)&&!function(e){var t=l(e)?v.call(e):"";return t==f||t==p}(e)}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return o(e)?r(e):function(e){if(!a(e))return _(e);var t=[];for(var r in Object(e))m.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}var c=9007199254740991,d="[object Arguments]",f="[object Function]",p="[object GeneratorFunction]",h=/^(?:0|[1-9]\d*)$/,g=Object.prototype,m=g.hasOwnProperty,v=g.toString,y=g.propertyIsEnumerable,_=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),b=Math.max,A=!y.call({valueOf:1},"valueOf"),E=Array.isArray,S=function(e){return function(e,t){return t=b(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=b(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=r[n];return s[t]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(function(t,r){var n=-1,a=r.length,u=a>1?r[a-1]:void 0,c=a>2?r[2]:void 0;for(u=e.length>3&&"function"==typeof u?(a--,u):void 0,c&&function(e,t,r){if(!l(r))return!1;var n=typeof t;return!!("number"==n?o(r)&&i(t,r.length):"string"==n&&t in r)&&s(r[t],e)}(r[0],r[1],c)&&(u=a<3?void 0:u,a=1),t=Object(t);++n<a;){var d=r[n];d&&e(t,d)}return t})}(function(e,t){if(A||a(t)||o(t))!function(e,t,r,i){r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=i?i(r[o],e[o],o,r,e):void 0;n(r,o,void 0===l?e[o]:l)}}(t,u(t),e);else for(var r in t)m.call(t,r)&&n(e,r,t[r])});e.exports=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){r=void 0===r?1:r,e[t]=e[t]||0,e[t]+=r}},function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(t,r(5))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=i.default.methodFactory;i.default.methodFactory=function(e,t,r){var n=a(e,t,r);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);n.apply(void 0,e)}},i.default.setLevel(i.default.getLevel()),t.default=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if("string"!=typeof e||""===e)return["localhost"];var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[],r=t[4],n=void 0;return r&&(n=(r.match(/[^\.]+\.[^\.]+$/)||[])[0]),[r,n]};t.extractHostnameAndDomain=n,t.extractHostname=function(e){return n(e)[0]},t.extractDomain=function(e){return n(e)[1]}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.generateShortID=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=(e=e||"").match(/[^\r\n]+/g)||[];for(var t={},r=0;r<e.length;r++){var n=e[r].split(/\s*:\s*(.+)/);3===n.length&&(t[n[0]]=n[1])}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findMediaElement=t.getMuxPlayerId=void 0;var n=r(6),i=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||(0,n.generateShortID)()),e.muxId):e};t.getMuxPlayerId=i,t.findMediaElement=function(e){var t=void 0;return e&&void 0!==e.nodeName?e=i(t=e):t=document.querySelector(e),[t,e,t&&t.nodeName?t.nodeName.toLowerCase():""]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"1"===(i.default.doNotTrack||i.default.navigator.doNotTrack||i.default.navigator.msDoNotTrack)};var n=r(2),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){(function(t){var n,i=void 0!==t?t:"undefined"!=typeof window?window:{},a=r(21);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=n}).call(t,r(5))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n=r(40),i=r(41),a=r(14);e.exports={formats:a,parse:i,stringify:n}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,i){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(i.plainObjects||i.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var a=e;return Array.isArray(e)&&!Array.isArray(r)&&(a=t.arrayToObject(e,i)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,a){n.call(e,a)?e[a]&&"object"==typeof e[a]?e[a]=t.merge(e[a],r,i):e.push(r):e[a]=r}),e):Object.keys(r).reduce(function(e,a){var s=r[a];return n.call(e,a)?e[a]=t.merge(e[a],s,i):e[a]=s,e},a)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var a=t.charCodeAt(n);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=t.charAt(n):a<128?r+=i[a]:a<2048?r+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?r+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(n+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(n)),r+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return r},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),o=0;o<s.length;++o){var l=s[o],u=a[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:l}),r.push(u))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)void 0!==t[i]&&n.push(t[i]);r.obj[r.prop]=n}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},r={};return Object.keys(e).forEach(function(n){var i=!1;if(e.hasOwnProperty(n)&&void 0!==e[n]){var a=n.split("_"),o=a[0],l=u[o];l||(s.default.info("Data key word `"+a[0]+"` not expected in "+n),l=o+"_"),a.splice(1).forEach(function(e){"url"===e&&(i=!0),c[e]?l+=c[e]:(s.default.info("Data key word `"+e+"` not expected in "+n),l+="_"+e+"_")}),i?r[l]=e[n]:t[l]=e[n]}}),(0,l.default)(t,r)};var a=r(3),s=n(a),o=r(0),l=n(o),u=i({a:"env",b:"beacon",d:"ad",e:"event",f:"experiment",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),c=i({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cd:"code",cg:"category",cn:"config",co:"count",ce:"counter",cp:"complete",ct:"content",cu:"current",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",du:"duration",dv:"device",ec:"encoding",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",fi:"first",fm:"family",ft:"format",fq:"frequency",fr:"frame",fs:"fullscreen",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mx:"mux",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",ph:"playhead",pi:"plugin",pl:"preroll",po:"poster",pr:"preload",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"})},function(e,t,r){"use strict";e.exports=r(17).default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(2),s=n(a),o=r(8),l=r(3),u=n(l),c=r(9),d=n(c),f=r(19),p=n(f),h=r(48),g=n(h),m=r(49),v=n(m),y={},_=function e(t){var r=arguments;"string"==typeof t?e.hasOwnProperty(t)?s.default.setTimeout(function(){r=Array.prototype.splice.call(r,1),e[t].apply(null,r)},0):u.default.warn("`"+t+"` is an unknown task"):"function"==typeof t?s.default.setTimeout(function(){t(e)},0):u.default.warn("`"+t+"` is invalid.")};_.loaded=Date.now(),_.VERSION="2.6.0",_.API_VERSION="2.0",_.PLAYER_TRACKED=!1,_.monitor=function(e,t){return(0,g.default)(_,e,t)},_.destroyMonitor=function(e){var t=(0,o.findMediaElement)(e),r=i(t,1),n=r[0];n&&n.mux&&"function"==typeof n.mux.destroy?n.mux.destroy():u.default.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},_.addHLSJS=function(e,t){var r=(0,o.getMuxPlayerId)(e);y[r]?y[r].addHLSJS(t):u.default.error("A monitor for `"+r+"` has not been initialized.")},_.addDashJS=function(e,t){var r=(0,o.getMuxPlayerId)(e);y[r]?y[r].addDashJS(t):u.default.error("A monitor for `"+r+"` has not been initialized.")},_.removeHLSJS=function(e){var t=(0,o.getMuxPlayerId)(e);y[t]?y[t].removeHLSJS():u.default.error("A monitor for `"+t+"` has not been initialized.")},_.removeDashJS=function(e,t){var r=(0,o.getMuxPlayerId)(e);y[r]?y[r].removeDashJS(t):u.default.error("A monitor for `"+r+"` has not been initialized.")},_.init=function(e,t){var r=(0,o.getMuxPlayerId)(e);y[r]=new p.default(_,r,t)},_.emit=function(e,t,r){var n=(0,o.getMuxPlayerId)(e);y[n]?(y[n].emit(t,r),"destroy"===t&&delete y[n]):u.default.error("A monitor for `"+n+"` has not been initialized.")},(0,d.default)()&&u.default.info("The browser's Do Not Track flag is enabled - Mux beaconing may be disabled."),s.default.addEventListener("unload",function(){_.WINDOW_UNLOADING=!0},!1),_.checkDoNotTrack=d.default,_.log=u.default,_.utils=v.default,t.default=_},function(e,t,r){var n,i;!function(a,s){"use strict";void 0!==(i="function"==typeof(n=function(){function e(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function t(t){return"debug"===t&&(t="log"),typeof console!==o&&(void 0!==console[t]?e(console,t):void 0!==console.log?e(console,"log"):s)}function r(e,t){for(var r=0;r<l.length;r++){var n=l[r];this[n]=r<e?s:this.methodFactory(n,e,t)}this.log=this.debug}function n(e,t,n){return function(){typeof console!==o&&(r.call(this,t,n),this[e].apply(this,arguments))}}function i(e,r,i){return t(e)||n.apply(this,arguments)}function a(e,t,n){function a(){var e;if(typeof window!==o){try{e=window.localStorage[c]}catch(e){}if(typeof e===o)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(c)+"=");r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}var s,u=this,c="loglevel";e&&(c+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||i,u.getLevel=function(){return s},u.setLevel=function(t,n){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(s=t,!1!==n&&function(e){var t=(l[e]||"silent").toUpperCase();if(typeof window!==o){try{return void(window.localStorage[c]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(e){}}}(t),r.call(u,t,e),typeof console===o&&t<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){a()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var d=a();null==d&&(d=null==t?"WARN":t),u.setLevel(d,!1)}var s=function(){},o="undefined",l=["trace","debug","info","warn","error"],u=new a,c={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new a(e,u.getLevel(),u.methodFactory)),t};var d=typeof window!==o?window.log:void 0;return u.noConflict=function(){return typeof window!==o&&window.log===u&&(window.log=d),u},u})?n.call(t,r,t,e):n)&&(e.exports=i)}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(3),s=n(a),o=r(0),l=n(o),u=r(6),c=r(4),d=r(2),f=n(d),p=r(1),h=n(p),g=r(20),m=n(g),v=r(23),y=r(24),_=r(25),b=n(_),A=r(26),E=n(A),S=r(27),w=n(S),T=r(28),k=n(T),x=r(29),P=n(x),D=r(30),C=n(D),L=r(31),R=n(L),O=r(32),I=n(O),M=r(33),N=n(M),F=r(34),j=n(F),B=r(35),U=n(B),q=r(36),H=n(q),G=r(37),V=n(G),W=r(38),K=n(W),$=r(47),z=n($),Y=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled"],X=function(e,t,r){var n=this;this.DOM_CONTENT_LOADED_EVENT_END=f.default.performance&&f.default.performance.timing.domContentLoadedEventEnd,this.NAVIGATION_START=f.default.performance&&f.default.performance.timing.navigationStart,this.mux=e,this.id=t,(r=(0,l.default)({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,sampleRate:1,beaconDomain:"litix.io",disableCookies:!1,respectDoNotTrack:!0},r)).data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),s.default.setLevel(r.debug?"debug":"warn"),this.getPlayheadTime=r.getPlayheadTime,this.getStateData=r.getStateData||function(){},this.getAdData=r.getAdData||function(){},this.minimumRebufferDuration=r.minimumRebufferDuration,this.sustainedRebufferThreshold=r.sustainedRebufferThreshold,this.playbackHeartbeatTime=r.playbackHeartbeatTime,this.playbackEventDispatcher=new K.default(e,r.data.env_key,r),this.data={player_instance_id:(0,u.generateShortID)(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconDomain},this.data.view_sequence_number=1,this.data.player_sequence_number=1,this.oldEmit=this.emit,this.emit=function(e,t){t=(0,l.default)({viewer_time:Date.now()},t),this.oldEmit(e,t)},this.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),(0,l.default)(this.data,t),this._initializeViewData();var r=function(){void 0===this.data.view_start&&(this.data.view_start=Date.now(),this.emit("viewstart"))}.bind(this);this.one("play",r),this.one("adbreakstart",r)}),this.on("videochange",function(e,t){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",t)}),this.on("destroy",this.destroy);var i=this.destroy.bind(this);f.default.addEventListener("unload",i,!1),this.on("destroy",function(){f.default.removeEventListener("unload",i)}),this.on("playerready",function(e,t){(0,l.default)(this.data,t)}),Y.forEach(function(e){n.on(e,function(t,r){0!==e.indexOf("ad")&&this._updateStateData(),(0,l.default)(this.data,r),this._sanitizeData()}),n.on("after"+e,function(){this.send(e)})}),this.on("viewend",function(e,t){(0,l.default)(n.data,t)}),this.one("playerready",function(e){var t=Date.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),w.default.apply(this),V.default.apply(this),j.default.apply(this),C.default.apply(this),E.default.apply(this),N.default.apply(this),k.default.apply(this),P.default.apply(this),U.default.apply(this),R.default.apply(this),I.default.apply(this),H.default.apply(this),z.default.apply(this),r.hlsjs&&this.addHLSJS(r),r.dashjs&&this.addDashJS(r),this.emit("viewinit",r.data)};(0,l.default)(X.prototype,b.default.prototype),(0,l.default)(X.prototype,C.default.prototype),(0,l.default)(X.prototype,j.default.prototype),(0,l.default)(X.prototype,E.default.prototype),(0,l.default)(X.prototype,k.default.prototype),(0,l.default)(X.prototype,P.default.prototype),(0,l.default)(X.prototype,U.default.prototype),(0,l.default)(X.prototype,R.default.prototype),(0,l.default)(X.prototype,I.default.prototype),X.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),f.default.clearTimeout(this._heartBeatTimeout))},X.prototype.send=function(e){var t=(0,l.default)({},this.data);if(1===t.player_error_code&&(delete t.player_error_code,delete t.player_error_message),t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var r=(0,c.extractHostnameAndDomain)(t.video_source_url),n=i(r,2),a=n[0],s=n[1];t.video_source_domain=s,t.video_source_hostname=a}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat()},X.prototype._updateStateData=function(){(0,l.default)(this.data,this.getStateData()),this.getPlayheadTime&&(this.data.player_playhead_time=this.getPlayheadTime()),this._sanitizeData()},X.prototype._sanitizeData=function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time"].forEach(function(t){var r=parseInt(e.data[t],10);e.data[t]=isNaN(r)?void 0:r})},X.prototype._resetVideoData=function(e,t){var r=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("video_")&&delete r.data[e]})},X.prototype._resetViewData=function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1},X.prototype._resetErrorData=function(e,t){delete this.data.player_error_code,delete this.data.player_error_message},X.prototype._initializeViewData=function(){var e=this,t=this.data.view_id=(0,u.generateUUID)();this.data.video_id||(this.data.video_id=(0,m.default)(this.data.player_source_url));var r=function(){t===e.data.view_id&&(0,h.default)(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",r):r()},X.prototype._restartHeartBeat=function(){var e=this;f.default.clearTimeout(this._heartBeatTimeout),this.viewErrored||(this._heartBeatTimeout=f.default.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4))},X.prototype.addHLSJS=function(e){return e.hlsjs?this.hlsjs?void this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,void(0,v.monitorHlsJs)(this.mux,this.id,e.hlsjs,{},e.Hls||f.default.Hls)):void this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")},X.prototype.removeHLSJS=function(){this.hlsjs&&((0,v.stopMonitoringHlsJs)(this.hlsjs),this.hlsjs=void 0)},X.prototype.addDashJS=function(e){return e.dashjs?this.dashjs?void this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,void(0,y.monitorDashJS)(this.mux,this.id,e.dashjs)):void this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")},X.prototype.removeDashJS=function(){this.dashjs&&((0,y.stopMonitoringDashJS)(this.dashjs),this.dashjs=void 0)},t.default=X},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=a.default.createElement("a");t.href=e;var r=t.pathname.replace(/\.[^\/.]+$/,"");return o.default.encode(t.host+r).split("=")[0]};var i=r(10),a=n(i),s=r(22),o=n(s)},function(e,t){},function(e,t,r){(function(e,n){var i;!function(n){"object"==typeof e&&e&&e.exports;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new a(e)},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,i,a=e.length%3,l="",u=-1,c=e.length-a;++u<c;)t=e.charCodeAt(u)<<16,r=e.charCodeAt(++u)<<8,n=e.charCodeAt(++u),l+=o.charAt((i=t+r+n)>>18&63)+o.charAt(i>>12&63)+o.charAt(i>>6&63)+o.charAt(63&i);return 2==a?(t=e.charCodeAt(u)<<8,r=e.charCodeAt(++u),l+=o.charAt((i=t+r)>>10)+o.charAt(i>>4&63)+o.charAt(i<<2&63)+"="):1==a&&(i=e.charCodeAt(u),l+=o.charAt(i>>2)+o.charAt(i<<4&63)+"=="),l},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,i=0,a="",u=-1;++u<t;)n=o.indexOf(e.charAt(u)),r=i%4?64*r+n:n,i++%4&&(a+=String.fromCharCode(255&r>>(-2*i&6)));return a},version:"0.1.0"};void 0!==(i=function(){return u}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(11)(e),r(5))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringHlsJs=t.monitorHlsJs=void 0;var i=r(2),a=n(i),s=r(7),o=n(s),l=r(4),u=function(e){if(!e)return{};var t=a.default.performance.timing.navigationStart;return{bytesLoaded:e.total,requestStart:Math.round(t+e.trequest),responseStart:Math.round(t+e.tfirst),responseEnd:Math.round(t+e.tload)}},c=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return(0,o.default)(e.getAllResponseHeaders())};t.monitorHlsJs=function(e,t,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments[4]),i=e.log;if(a.default.performance&&a.default.performance.timing){var s=function(r,n){return e.emit(t,r,n)},o=function(e,t){var r=t.levels,n=t.audioTracks,i=t.url,a=t.stats,o=t.networkDetails,d={},f={};r.forEach(function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),n.forEach(function(e,t){f[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var p=u(a),h=p.bytesLoaded,g=p.requestStart,m=p.responseStart,v=p.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:h,request_start:g,request_response_start:m,request_response_end:v,request_type:"manifest",request_hostname:(0,l.extractHostname)(i),request_response_headers:c(o),request_rendition_lists:{media:d,audio:f,video:{}}})};r.on(n.Events.MANIFEST_LOADED,o);var d=function(e,t){var r=t.details,n=t.level,i=t.networkDetails,a=t.stats,o=u(a),d=o.bytesLoaded,f=o.requestStart,p=o.responseStart,h=o.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:d,request_start:f,request_response_start:p,request_response_end:h,request_current_level:n,request_type:"manifest",request_hostname:(0,l.extractHostname)(r.url),request_response_headers:c(i)})};r.on(n.Events.LEVEL_LOADED,d);var f=function(e,t){var r=t.details,n=t.networkDetails,i=t.stats,a=u(i),o=a.bytesLoaded,d=a.requestStart,f=a.responseStart,p=a.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:d,request_response_start:f,request_response_end:p,request_type:"manifest",request_hostname:(0,l.extractHostname)(r.url),request_response_headers:c(n)})};r.on(n.Events.AUDIO_TRACK_LOADED,f);var p=function(e,t){var n=t.stats,i=t.networkDetails,a=t.frag,o=u(n),d=o.bytesLoaded,f=o.requestStart,p=o.responseStart,h=o.responseEnd,g={request_event_type:e,request_bytes_loaded:d,request_start:f,request_response_start:p,request_response_end:h,request_hostname:i?(0,l.extractHostname)(i.responseURL):void 0,request_response_headers:c(i),request_media_duration:a.duration};"main"===a.type?(g.request_type="media",g.request_current_level=a.level,g.request_video_width=(r.levels[a.level]||{}).width,g.request_video_height=(r.levels[a.level]||{}).height):g.request_type=a.type,s("requestcompleted",g)};r.on(n.Events.FRAG_LOADED,p);var h=function(e,t){var r=t.details,i=t.response,a=t.context,o=t.frag;if(r===n.ErrorDetails.MANIFEST_LOAD_ERROR||r===n.ErrorDetails.MANIFEST_LOAD_TIMEOUT||r===n.ErrorDetails.FRAG_LOAD_ERROR||r===n.ErrorDetails.FRAG_LOAD_TIMEOUT||r===n.ErrorDetails.LEVEL_LOAD_ERROR||r===n.ErrorDetails.LEVEL_LOAD_TIMEOUT){var u=o&&o.url||a&&a.url||"";s("requestfailed",{request_error:r,request_url:u,request_hostname:(0,l.extractHostname)(u),request_type:r===n.ErrorDetails.FRAG_LOAD_ERROR||r===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":"manifest",request_error_code:i&&i.code,request_error_text:i&&i.text})}};r.on(n.Events.ERROR,h);var g=function(e,t){var r=t.frag,n=r&&r._url||"";s("requestcanceled",{request_cancel:e,request_url:n,request_type:"media",request_hostname:(0,l.extractHostname)(n)})};r.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,g),r._stopMuxMonitor=function(){r.off(n.Events.MANIFEST_LOADED,o),r.off(n.Events.LEVEL_LOADED,d),r.off(n.Events.AUDIO_TRACK_LOADED,f),r.off(n.Events.FRAG_LOADED,p),r.off(n.Events.ERROR,h),r.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,g),r.off(n.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(n.Events.DESTROYING,r._stopMuxMonitor)}else i.warn("window.performance.timing not supported. Not tracking HLS.js.")},t.stopMonitoringHlsJs=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringDashJS=t.monitorDashJS=void 0;var i=r(2),a=n(i),s=r(7),o=n(s),l=r(4),u=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var r=e.getRequests({state:"executed"});if(0===r.length)return{};var n=r[r.length-1],i=(0,l.extractHostname)(n.url),a=n.bytesLoaded,s=new Date(n.requestStartDate).getTime(),u=new Date(n.firstByteDate).getTime(),c=new Date(n.requestEndDate).getTime(),d=Number.isNaN(n.duration)?0:n.duration,f=t.getMetricsFor(n.mediaType).HttpList,p=void 0;return f.length>0&&(p=(0,o.default)(f[f.length-1]._responseHeaders||"")),{requestStart:s,requestResponseStart:u,requestResponseEnd:c,requestBytesLoaded:a,requestResponseHeaders:p,requestMediaDuration:d,requestHostname:i}};t.monitorDashJS=function(e,t,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.log);if(r&&r.on){var i=function(r,n){return e.emit(t,r,n)},s=function(e){var t=e.type,r=e.data,n=r||{},a=n.url;i("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:(0,l.extractHostname)(a)})};r.on("manifestLoaded",s);var o={},c=function(e){var t=e.type,n=e.fragmentModel,a=e.chunk,s=a||{},l=s.mediaInfo,c=l||{},d=c.type,f=c.bitrateList,p={};(f=f||[]).forEach(function(e,t){p[t]={},p[t].width=e.width,p[t].height=e.height,p[t].bitrate=e.bandwidth,p[t].attrs={}}),"video"===d?o.video=p:"audio"===d?o.audio=p:o.media=p;var h=u(n,r),g=h.requestStart,m=h.requestResponseStart,v=h.requestResponseEnd,y=h.requestResponseHeaders,_=h.requestMediaDuration,b=h.requestHostname;i("requestcompleted",{request_event_type:t,request_start:g,request_response_start:m,request_response_end:v,request_bytes_loaded:-1,request_type:d+"_init",request_response_headers:y,request_hostname:b,request_media_duration:_,request_rendition_lists:o})};r.on("initFragmentLoaded",c);var d=function(e){var t=e.type,n=e.fragmentModel,a=e.chunk,s=a||{},o=s.mediaInfo,l=s.start,c=o||{},d=c.type,f=u(n,r),p=f.requestStart,h=f.requestResponseStart,g=f.requestResponseEnd,m=f.requestBytesLoaded,v=f.requestResponseHeaders,y=f.requestMediaDuration,_=f.requestHostname,b=function(e,t){var r=t.getQualityFor(e),n=t.getCurrentTrackFor(e).bitrateList;return n?{currentLevel:r,renditionWidth:n[r].width||null,renditionHeight:n[r].height||null,renditionBitrate:n[r].bandwidth}:{}}(d,r),A=b.currentLevel,E=b.renditionWidth,S=b.renditionHeight,w=b.renditionBitrate;i("requestcompleted",{request_event_type:t,request_start:p,request_response_start:h,request_response_end:g,request_bytes_loaded:m,request_type:d,request_response_headers:v,request_hostname:_,request_media_start_time:l,request_media_duration:y,request_current_level:A,request_labeled_bitrate:w,request_video_width:E,request_video_height:S})};r.on("mediaFragmentLoaded",d);var f=function(e){var t=e.error,r=e.event,n=(r=r||{}).request||{},s=a.default.event&&a.default.event.currentTarget||{};i("requestfailed",{request_error:t+"_"+r.id+"_"+n.type,request_url:r.url,request_hostname:(0,l.extractHostname)(r.url),request_type:n.mediaType,request_error_code:s.status,request_error_type:s.statusText})};r.on("error",f),r._stopMuxMonitor=function(){r.off("manifestLoaded",s),r.off("initFragmentLoaded",c),r.off("mediaFragmentLoaded",d),r.off("error",f),delete r._stopMuxMonitor}}else n.warn("Invalid dash.js player reference. Monitoring blocked.")},t.stopMonitoringDashJS=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){},i=0;n.prototype.on=function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++i,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t},n.prototype.off=function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(e,n){e._eventEmitterGuid===t._eventEmitterGuid&&r.splice(n,1)})},n.prototype.one=function(e,t,r){var n=this;t._eventEmitterGuid=t._eventEmitterGuid||++i;var a=function i(){n.off(e,i),t.apply(r||this,arguments)};a._eventEmitterGuid=t._eventEmitterGuid,this.on(e,a)},n.prototype.emit=function(e,t){var r=this;if(this._listeners){t=t||{};var n=this._listeners["before*"]||[],i=this._listeners[e]||[],a=this._listeners["after"+e]||[],s=function(t,n){(t=t.slice()).forEach(function(t){t.call(r,{type:e},n)})};s(n,t),s(i,t),s(a,t)}},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,this.on("playing",function(){this._playheadShouldBeProgressing=!0}),this.on("play",this._startPlaybackHeartbeatInterval),this.on("adbreakstart",this._startPlaybackHeartbeatInterval),this.on("adplay",this._startPlaybackHeartbeatInterval),this.on("seeking",this._startPlaybackHeartbeatInterval),this.on("devicewake",this._startPlaybackHeartbeatInterval),this.on("pause",this._stopPlaybackHeartbeatInterval),this.on("ended",this._stopPlaybackHeartbeatInterval),this.on("viewend",this._stopPlaybackHeartbeatInterval),this.on("error",this._stopPlaybackHeartbeatInterval),this.on("adpause",this._stopPlaybackHeartbeatInterval),this.on("adbreakend",this._stopPlaybackHeartbeatInterval),this.on("seeked",function(){this.data.player_is_paused&&this._stopPlaybackHeartbeatInterval()}),this.on("timeupdate",function(){null!==this._playbackHeartbeatInterval&&this.emit("playbackheartbeat")}),this.on("devicesleep",function(e,t){null!==this._playbackHeartbeatInterval&&(i.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend",{viewer_time:t.viewer_time}),this._playbackHeartbeatInterval=null)})};a.prototype._startPlaybackHeartbeatInterval=function(){var e=this;null===this._playbackHeartbeatInterval&&(this.emit("playbackheartbeat"),this._playbackHeartbeatInterval=i.default.setInterval(function(){e.emit("playbackheartbeat")},this.playbackHeartbeatTime))},a.prototype._stopPlaybackHeartbeatInterval=function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(i.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)},t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",function(){e.viewErrored=!1}),this.on("error",function(){e.viewErrored=!0})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){this._watchTimeTrackerLastCheckedTime=null,this.on("playbackheartbeat",this._updateWatchTime),this.on("playbackheartbeatend",this._clearWatchTimeState)};a.prototype._updateWatchTime=function(e,t){var r=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=r),(0,i.default)(this.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r},a.prototype._clearWatchTimeState=function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null},t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){this._playbackTimeTrackerLastPlayheadPosition=-1,this.on("playbackheartbeat",this._updatePlaybackTime),this.on("playbackheartbeatend",this._clearPlaybackTimeState),this.on("seeking",this._clearPlaybackTimeState)};a.prototype._updatePlaybackTime=function(){var e=this.data.player_playhead_time;if(this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition){var t=e-this._playbackTimeTrackerLastPlayheadPosition;t<=1e3&&(0,i.default)(this.data,"view_content_playback_time",t)}this._playbackTimeTrackerLastPlayheadPosition=e},a.prototype._clearPlaybackTimeState=function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1},t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){this.on("playbackheartbeat",this._updatePlayheadTime),this.on("playbackheartbeatend",this._updatePlayheadTime),this.on("timeupdate",this._updatePlayheadTime),this.on("destroy",function(){this.off("timeupdate",this._updatePlayheadTime)})};n.prototype._updatePlayheadTime=function(e,t){if(t.player_playhead_time)this.data.player_playhead_time=t.player_playhead_time;else if(this.getPlayheadTime){var r=this.getPlayheadTime();void 0!==r&&(this.data.player_playhead_time=r)}},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,this.on("playbackheartbeat",this._checkIfRebuffering),this.on("playbackheartbeatend",this._cleanupRebufferTracker),this.on("seeking",function(){this._cleanupRebufferTracker(null,{viewer_time:Date.now()})})};a.prototype._checkIfRebuffering=function(e,t){if(this.isSeeking||this.isAdBreak||!this._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else{if(null===this._lastCheckedTime)return this._prepareRebufferTrackerState(t.viewer_time),void this._updateRebufferMetrics();if(this._lastPlayheadTime===this.data.player_playhead_time){var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;r>=this.sustainedRebufferThreshold&&(this._rebuffering?this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime):(this._rebuffering=!0,(0,i.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(r),this.emit("rebufferstart"))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0)}},a.prototype._clearRebufferTrackerState=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null},a.prototype._prepareRebufferTrackerState=function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e},a.prototype._cleanupRebufferTracker=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime),this.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return void this._updateRebufferMetrics();var n=this.data.player_playhead_time-this._lastPlayheadTime,a=t.viewer_time-this._lastPlayheadTimeUpdatedTime;n>0&&a-n>this.minimumRebufferDuration?((0,i.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(a-n),this.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+a-n})):this._updateRebufferMetrics()}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()},a.prototype._updateRebufferMetrics=function(e){e>0&&(0,i.default)(this.data,"view_rebuffer_duration",e),this.data.view_watch_time>=0&&this.data.view_rebuffer_count>0&&(this.data.view_rebuffer_frequency=this.data.view_rebuffer_count/this.data.view_watch_time,this.data.view_rebuffer_percentage=this.data.view_rebuffer_duration/this.data.view_watch_time)},t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){this.on("viewinit",function(){var e=this.data,t=e.view_id,r=function(e,r){var n=r.viewer_time;"playing"===e.type&&void 0===this.data.view_time_to_first_frame?this.calculateTimeToFirstFrame(n||Date.now(),t):"adplaying"!==e.type||void 0!==this.data.view_time_to_first_frame&&!this.inPrerollPosition()||this.calculateTimeToFirstFrame(n||Date.now(),t)};this.one("playing",r),this.one("adplaying",r),this.one("viewend",function(){this.off("playing",r),this.off("adplaying",r)})})};n.prototype.calculateTimeToFirstFrame=function(e,t){t===this.data.view_id&&(this._updateWatchTime(null,{viewer_time:e}),this.data.view_time_to_first_frame=this.data.view_watch_time,(this.data.player_autoplay_on||this.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.data.view_aggregate_startup_time=this.data.view_start+this.data.view_watch_time-this.NAVIGATION_START))},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",function(){this._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach(function(t){e.on(t,function(){if(this._lastPlayheadPosition>=0&&this.data.player_playhead_time>=0&&this._lastPlayerWidth>=0&&this._lastSourceWidth>0&&this._lastPlayerHeight>=0&&this._lastSourceHeight>0){var e=this.data.player_playhead_time-this._lastPlayheadPosition;if(e<0)return void(this._lastPlayheadPosition=-1);var t=Math.min(this._lastPlayerWidth/this._lastSourceWidth,this._lastPlayerHeight/this._lastSourceHeight),r=Math.max(0,t-1),n=Math.max(0,1-t);this.data.view_max_upscale_percentage=Math.max(this.data.view_max_upscale_percentage||0,r),this.data.view_max_downscale_percentage=Math.max(this.data.view_max_downscale_percentage||0,n),(0,i.default)(this.data,"view_total_content_playback_time",e),(0,i.default)(this.data,"view_total_upscaling",r*e),(0,i.default)(this.data,"view_total_downscaling",n*e)}this._lastPlayheadPosition=-1})}),["playing","hb"].forEach(function(t){e.on(t,function(){this._lastPlayheadPosition=this.data.player_playhead_time,this._lastPlayerWidth=this.data.player_width,this._lastPlayerHeight=this.data.player_height,this._lastSourceWidth=this.data.video_source_width,this._lastSourceHeight=this.data.video_source_height})})};var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.isSeeking=!1,this.on("seeking",function(e,t){(0,o.default)(this.data,t),this._lastSeekingTime=Date.now(),!1===this.isSeeking&&(this.isSeeking=!0,this.send("seeking"))}),this.on("seeked",function(){this.isSeeking=!1;var e=this._lastSeekingTime||Date.now(),t=Date.now()-e;(0,a.default)(this.data,"view_seek_count",1),(0,a.default)(this.data,"view_seek_duration",t);var r=this.data.view_max_seek_time||0;this.data.view_max_seek_time=Math.max(r,t)}),this.on("viewend",function(){this.isSeeking=!1})};var i=r(1),a=n(i),s=r(0),o=n(s)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=r(1),s=n(a),o=r(4),l=r(0),u=n(l),c=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},d=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],f=function(){var e=this;this.on("viewinit",function(){this.isAdBreak=!1,this._currentAdRequestNumber=0,this._currentAdResponseNumber=0,this._adRequests=[],this._adResponses=[],this._adHasPlayed=!1,this._wouldBeNewAdPlay=!0,this._prerollPlayTime=void 0}),d.forEach(function(t){return e.on(t,e._updateAdData)});var t=function(){e.isAdBreak=!1};this.on("adbreakstart",function(){this.isAdBreak=!0}),this.on("play",t),this.on("playing",t),this.on("viewend",t),this.on("adrequest",function(e,t){t=(0,u.default)({ad_request_id:"generatedAdRequestId"+this._currentAdRequestNumber++},t),c(this._adRequests,t),(0,s.default)(this.data,"view_ad_request_count"),this.inPrerollPosition()&&(this.data.view_preroll_requested=!0,this._adHasPlayed||(0,s.default)(this.data,"view_preroll_request_count"))}),this.on("adresponse",function(e,t){t=(0,u.default)({ad_request_id:"generatedAdRequestId"+this._currentAdResponseNumber++},t),c(this._adResponses,t);var r=this.findAdRequest(t.ad_request_id);r&&(0,s.default)(this.data,"view_ad_request_time",Math.max(0,t.viewer_time-r.viewer_time))}),this.on("adplay",function(e,t){this._adHasPlayed=!0,this._wouldBeNewAdPlay&&(this._wouldBeNewAdPlay=!1,(0,s.default)(this.data,"view_ad_played_count")),this.inPrerollPosition()&&!this.data.view_preroll_played&&(this.data.view_preroll_played=!0,this._adRequests.length>0&&(this.data.view_preroll_request_time=Math.max(0,t.viewer_time-this._adRequests[0].viewer_time)),this.data.view_start&&(this.data.view_startup_preroll_request_time=Math.max(0,t.viewer_time-this.data.view_start)),this._prerollPlayTime=t.viewer_time)}),this.on("adplaying",function(e,t){this.inPrerollPosition()&&void 0===this.data.view_preroll_load_time&&void 0!==this._prerollPlayTime&&(this.data.view_preroll_load_time=t.viewer_time-this._prerollPlayTime,this.data.view_startup_preroll_load_time=t.viewer_time-this._prerollPlayTime)}),this.on("adended",function(){this._wouldBeNewAdPlay=!0}),this.on("aderror",function(){this._wouldBeNewAdPlay=!0})};f.prototype.inPrerollPosition=function(){return void 0===this.data.view_content_playback_time||this.data.view_content_playback_time<=1e3},f.prototype.findAdRequest=function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]},f.prototype._updateAdData=function(e,t){if(this.inPrerollPosition()){if(!this.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=(0,o.extractHostnameAndDomain)(t.ad_tag_url),n=i(r,2),a=n[0],s=n[1];this.data.view_preroll_ad_tag_domain=s,this.data.view_preroll_ad_tag_hostname=a}if(!this.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var l=(0,o.extractHostnameAndDomain)(t.ad_asset_url),u=i(l,2),c=u[0],d=u[1];this.data.view_preroll_ad_asset_domain=d,this.data.view_preroll_ad_asset_hostname=c}}},t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this,t=void 0,r=void 0,n=function(){t&&((0,i.default)(e.data,"view_waiting_rebuffer_duration",Date.now()-t),t=!1,window.clearInterval(r))},a=!1,s=function(){a=!1,n()};this.on("waiting",function(){a&&((0,i.default)(e.data,"view_waiting_rebuffer_count",1),t=Date.now(),r=window.setInterval(function(){if(t){var r=Date.now();(0,i.default)(e.data,"view_waiting_rebuffer_duration",r-t),t=r}},250))}),this.on("playing",function(){n(),a=!0}),this.on("pause",s),this.on("seeking",s)};var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.one("playbackheartbeat",a),this.on("playbackheartbeatend",function(){e.off("before*",s),e.one("playbackheartbeat",a)})};var n=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){this.lastWallClockTime=Date.now(),this.on("before*",s)},s=function(e){var t=Date.now(),r=this.lastWallClockTime;this.lastWallClockTime=t,t-r>3e4&&(this.emit("devicesleep",{viewer_time:r}),(0,i.default)(this.data,{viewer_time:r}),this.send("devicesleep"),this.emit("devicewake",{viewer_time:t}),(0,i.default)(this.data,{viewer_time:t}),this.send("devicewake"))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(39),s=r(3),o=n(s),l=r(43),u=n(l),c=r(9),d=n(c),f=r(15),p=n(f),h=r(44),g=n(h),m=r(46),v=n(m),y=r(0),_=n(y),b=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id"],A=["viewstart","error","ended","viewend"],E=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mux=e,this.envKey=t,this.eventQueue=new g.default((0,u.default)(t,r.beaconDomain)),this.previousBeaconData=null,this.lastEventTime=null,this.sampleRate=r.sampleRate,this.disableCookies=r.disableCookies,this.respectDoNotTrack=r.respectDoNotTrack,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed_version:this.mux.VERSION,page_url:window.location.href,viewer_application_name:v.default.name,viewer_application_version:v.default.version,viewer_application_engine:v.default.layout,viewer_device_name:v.default.product,viewer_device_category:"",viewer_device_manufacturer:v.default.manufacturer,viewer_os_family:v.default.os&&v.default.os.family,viewer_os_architecture:v.default.os&&v.default.os.architecture,viewer_os_version:v.default.os&&v.default.os.version},this.viewerData=this.disableCookies?{}:(0,a.getAndUpdateViewerData)()};E.prototype.send=function(e,t){if(e){if(this.respectDoNotTrack&&(0,d.default)())return o.default.info("Not sending `"+e+"` because Do Not Track is enabled in your browser");if(!t||"object"!==(void 0===t?"undefined":i(t)))return o.default.error("A data object was expected in send() but was not provided");var r=this.disableCookies?{}:(0,a.getAndUpdateSessionData)(),n={};(0,_.default)(n,this.pageLevelData),(0,_.default)(n,t),(0,_.default)(n,r),(0,_.default)(n,this.viewerData),n.event=e,n.env_key=this.envKey,n.user_id&&(n.viewer_user_id=n.user_id,delete n.user_id);var s=n.mux_sample_number>=this.sampleRate,l=this._deduplicateBeaconData(e,n),u=(0,p.default)(l);if(this.lastEventTime=Date.now(),s)return o.default.info("Not sending event due to sample rate restriction",e,n,u);if(!this.envKey)return o.default.info("Not sending event due to missing environment key",e,n,u);if(!this.rateLimited)if(o.default.info("Sending event",e,n,u),this.rateLimited=!this.eventQueue.queueEvent(e,u),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(A.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return n.event="eventrateexceeded",u=(0,p.default)(n),this.eventQueue.queueEvent(n.event,u),o.default.error("Beaconing disabled due to rate limit.")}},E.prototype.destroy=function(){this.eventQueue.destroy(!1)};var S=function(e,t,r,n){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===(void 0===r?"undefined":i(r))&&"object"===(void 0===n?"undefined":i(n))&&Object.keys(r||{}).length===Object.keys(n||{}).length)};E.prototype._deduplicateBeaconData=function(e,t){var r=this,n={},i=t.view_id;if(!i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||Date.now()-this.lastEventTime>=6e5)n=(0,_.default)({},t),i&&(this.previousBeaconData=n),i&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.keys(t).forEach(function(e){var i=t[e];(i!==r.previousBeaconData[e]||b.indexOf(e)>-1||S(a,e,i,r.previousBeaconData[e]))&&(n[e]=i,r.previousBeaconData[e]=i)})}return n},t.default=E},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAndUpdateSessionData=t.getAndUpdateViewerData=void 0;var i=r(12),a=n(i),s=r(42),o=n(s),l=r(6),u=function(){var e=void 0;try{e=a.default.parse(o.default.get("muxData")||"")}catch(t){e={}}return e},c=function(e){o.default.set("muxData",a.default.stringify(e),{expires:7300})};t.getAndUpdateViewerData=function(){var e=u();return e.mux_viewer_id=e.mux_viewer_id||(0,l.generateUUID)(),e.msn=e.msn||Math.random(),c(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},t.getAndUpdateSessionData=function(){var e=u(),t=Date.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=(0,l.generateUUID)(),e.sst=t),e.sex=t+15e5,c(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}},function(e,t,r){"use strict";var n=r(13),i=r(14),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,o={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,r,i,a,s,l,u,c,d,f,p,h){var g=t;if("function"==typeof u)g=u(r,g);else if(g instanceof Date)g=f(g);else if(null===g){if(a)return l&&!h?l(r,o.encoder):r;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||n.isBuffer(g))return l?[p(h?r:l(r,o.encoder))+"="+p(l(g,o.encoder))]:[p(r)+"="+p(String(g))];var m,v=[];if(void 0===g)return v;if(Array.isArray(u))m=u;else{var y=Object.keys(g);m=c?y.sort(c):y}for(var _=0;_<m.length;++_){var b=m[_];s&&null===g[b]||(v=Array.isArray(g)?v.concat(e(g[b],i(r,b),i,a,s,l,u,c,d,f,p,h)):v.concat(e(g[b],r+(d?"."+b:"["+b+"]"),i,a,s,l,u,c,d,f,p,h)))}return v};e.exports=function(e,t){var r=e,s=t?n.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===s.delimiter?o.delimiter:s.delimiter,c="boolean"==typeof s.strictNullHandling?s.strictNullHandling:o.strictNullHandling,d="boolean"==typeof s.skipNulls?s.skipNulls:o.skipNulls,f="boolean"==typeof s.encode?s.encode:o.encode,p="function"==typeof s.encoder?s.encoder:o.encoder,h="function"==typeof s.sort?s.sort:null,g=void 0!==s.allowDots&&s.allowDots,m="function"==typeof s.serializeDate?s.serializeDate:o.serializeDate,v="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:o.encodeValuesOnly;if(void 0===s.format)s.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,s.format))throw new TypeError("Unknown format option provided.");var y,_,b=i.formatters[s.format];"function"==typeof s.filter?(_=s.filter,r=_("",r)):Array.isArray(s.filter)&&(_=s.filter,y=_);var A,E=[];if("object"!=typeof r||null===r)return"";A=s.arrayFormat in a?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var S=a[A];y||(y=Object.keys(r)),h&&y.sort(h);for(var w=0;w<y.length;++w){var T=y[w];d&&null===r[T]||(E=E.concat(l(r[T],T,S,c,d,f?p:null,_,h,g,m,b,v)))}var k=E.join(u),x=!0===s.addQueryPrefix?"?":"";return k.length>0?x+k:""}},function(e,t,r){"use strict";var n=r(13),i=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=n.split(t.delimiter,s),l=0;l<o.length;++l){var u,c,d=o[l],f=d.indexOf("]="),p=-1===f?d.indexOf("="):f+1;-1===p?(u=t.decoder(d,a.decoder),c=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,p),a.decoder),c=t.decoder(d.slice(p+1),a.decoder)),i.call(r,u)?r[u]=[].concat(r[u]).concat(c):r[u]=c}return r},o=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(n),o=s?n.slice(0,s.index):n,l=[];if(o){if(!r.plainObjects&&i.call(Object.prototype,o)&&!r.allowPrototypes)return;l.push(o)}for(var u=0;null!==(s=a.exec(n))&&u<r.depth;){if(u+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+n.slice(s.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s)a=(a=[]).concat(n);else{a=r.plainObjects?Object.create(null):{};var o="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(o,10);!isNaN(l)&&s!==o&&String(l)===o&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[])[l]=n:a[o]=n}n=a}return n}(l,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:a.delimiter,r.depth="number"==typeof r.depth?r.depth:a.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:a.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:a.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:a.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:a.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:a.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:a.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var i="string"==typeof e?s(e,r):e,l=r.plainObjects?Object.create(null):{},u=Object.keys(i),c=0;c<u.length;++c){var d=u[c],f=o(d,i[d],r);l=n.merge(l,f,r)}return n.compact(l)}},function(e,t,r){"use strict";var n,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){var o=!1;if(void 0!==(i="function"==typeof(n=s)?n.call(t,r,t,e):n)&&(e.exports=i),o=!0,"object"===a(t)&&(e.exports=s(),o=!0),!o){var l=window.Cookies,u=window.Cookies=s();u.noConflict=function(){return window.Cookies=l,u}}}(function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t};return function t(r){function n(t,i,a){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},n.defaults,a)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*a.expires),a.expires=o}try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(t){}return i=r.write?r.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(s={});for(var l=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var d=l[c].split("="),f=d.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var p=d[0].replace(u,decodeURIComponent);if(f=r.read?r.read(f,p):r(f,p)||f.replace(u,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(t){}if(t===p){s=f;break}t||(s[p]=f)}catch(t){}}return s}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,r){n(t,"",e(r,{expires:-1}))},n.withConverter=t,n}(function(){})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e=e||"",t=t||"litix.io",e.match(/^[a-z0-9]+$/)?"https://"+e+"."+t:"https://img.litix.io/a.gif"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),a=n(i),s=r(3),o=n(s),l=r(45),u=n(l),c=r(0),d=n(c),f=r(15),p=n(f),h=!!a.default.XMLHttpRequest&&"withCredentials"in new a.default.XMLHttpRequest,g={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:5e3},m=function(e,t){this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=(0,d.default)({},g,t)};m.prototype.queueEvent=function(e,t){var r=(0,d.default)({},t);return h?(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):(u.default.send(this._beaconUrl,r),!0)},m.prototype.flushEvents=function(){h&&(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},m.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),a.default.clearTimeout(this._sendTimeout)},m.prototype._clearBeaconQueue=function(){var e=a.default.navigator,t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,r=this._eventQueue.slice(t);if(t>0&&(0,d.default)(r[r.length-1],(0,p.default)({mux_view_message:"event queue truncated"})),e.sendBeacon)e.sendBeacon(this._beaconUrl,JSON.stringify({events:r}));else if(a.default.XMLHttpRequest){var n=new a.default.XMLHttpRequest;n.open("POST",this._beaconUrl),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify({events:r}))}else u.default.send(this._beaconUrl,r[r.length-1])},m.prototype._sendBeaconQueue=function(){var e=this;if(a.default.XMLHttpRequest&&!this._postInFlight){var t=new a.default.XMLHttpRequest,r=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0,t.onreadystatechange=function(){4===t.readyState&&(200!==t.status?(e._eventQueue=r.concat(e._eventQueue),e._failureCount+=1,o.default.info("Error sending beacon: "+t.status),o.default.info(t.responseText)):e._failureCount=0,e._postInFlight=!1)},t.open("POST",this._beaconUrl),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({events:r}))}},m.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},m.prototype._startBeaconSending=function(){var e=this;a.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=a.default.setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(12),a=n(i),s=r(2),o=n(s),l={send:function(e,t){function r(){n.src=s+(i?"&rc="+i:"")}var n=new Image,i=0,s=e+"?"+a.default.stringify(t);return n.addEventListener("error",function(){i>3||o.default.setTimeout(function(){i++,r()},5e3*i)}),r(),n}};t.default=l},function(e,t,r){(function(e,n){var i;(function(){"use strict";function a(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function s(e){return e=f(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:a(e)}function o(e,t){for(var r in e)S.call(e,r)&&t(e[r],r,e)}function l(e){return null==e?a(e):w.call(e).slice(8,-1)}function u(e,t){var r=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!e[t])}function c(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function d(e,t){var r=null;return function(e,t){var r=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=_)for(;++r<n;)t(e[r],r,e);else o(e,t)}(e,function(n,i){r=t(r,n,i,e)}),r}function f(e){return String(e).replace(/^ +| +$/g,"")}var p={function:!0,object:!0},h=p[typeof window]&&window||this,g=h,m=p[typeof t]&&t,v=p[typeof e]&&e&&!e.nodeType&&e,y=m&&v&&"object"==typeof n&&n;!y||y.global!==y&&y.window!==y&&y.self!==y||(h=y);var _=Math.pow(2,53)-1,b=/\bOpera/,A=this,E=Object.prototype,S=E.hasOwnProperty,w=E.toString,T=function e(t){function r(e){return d(e,function(e,r){var n=r.pattern||c(r);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(r.label&&!RegExp(n,"i").test(r.label)?r.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),r=r.label||r,e=s(e[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),e})}var n=h,i=t&&"object"==typeof t&&"String"!=l(t);i&&(n=t,t=null);var a=n.navigator||{},p=a.userAgent||"";t||(t=p);var m,v,y=i||A==g,_=i?!!a.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(w.toString()),E=i?"Object":"ScriptBridgingProxyObject",S=i?"Object":"Environment",T=i&&n.java?"JavaPackage":l(n.java),k=i?"Object":"RuntimeObject",x=/\bJava/.test(T)&&n.java,P=x&&l(n.environment)==S,D=x?"a":"",C=x?"b":"",L=n.document||{},R=n.operamini||n.opera,O=b.test(O=i&&R?R["[[Class]]"]:l(R))?O:R=null,I=t,M=[],N=null,F=t==p,j=F&&R&&"function"==typeof R.version&&R.version(),B=d([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,r){return e||RegExp("\\b"+(r.pattern||c(r))+"\\b","i").exec(t)&&(r.label||r)}),U=d(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,r){return e||RegExp("\\b"+(r.pattern||c(r))+"\\b","i").exec(t)&&(r.label||r)}),q=r([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),H=d({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,r,n){return e||(r[q]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(q)]||RegExp("\\b"+c(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n}),G=d(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,r){var n=r.pattern||c(r);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,r){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),e=s(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,n,r.label||r)),e});if(B&&(B=[B]),H&&!q&&(q=r([H])),(m=/\bGoogle TV\b/.exec(q))&&(q=m[0]),/\bSimulator\b/i.test(t)&&(q=(q?q+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(t)&&M.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(t)?(m=e(t.replace(/like iPhone OS/,"")),H=m.manufacturer,q=m.product):/^iP/.test(q)?(U||(U="Safari"),G="iOS"+((m=/ OS ([\d_]+)/i.exec(t))?" "+m[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(G)?H&&"Google"!=H&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(q))||/\bAndroid\b/.test(G)&&/^Chrome/.test(U)&&/\bVersion\//i.test(t)?(U="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==U?(/\bMobi/i.test(t)||(G="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&M.unshift("accelerated")):"PaleMoon"==U&&(m=/\bFirefox\/([\d.]+)\b/.exec(t))?M.push("identifying as Firefox "+m[1]):"Firefox"==U&&(m=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(G||(G="Firefox OS"),q||(q=m[1])):!U||(m=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!q&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(m+"/")+8))&&(U=null),(m=q||H||G)&&(q||H||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:m)+" Browser")):"Electron"==U&&(m=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&M.push("Chromium "+m):G="Kubuntu",j||(j=function(e){return d(e,function(e,r){return e||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",c(U),"(?:Firefox|Minefield|NetFront)"])),(m=("iCab"==B&&parseFloat(j)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(B)&&"WebKit"||!B&&/\bMSIE\b/i.test(t)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==B&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(B=[m]),"IE"==U&&(m=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(U+=" Mobile",G="Windows Phone "+(/\+$/.test(m)?m:m+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(U="IE Mobile",G="Windows Phone 8.x",M.unshift("desktop mode"),j||(j=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=U&&"Trident"==B&&(m=/\brv:([\d.]+)/.exec(t))&&(U&&M.push("identifying as "+U+(j?" "+j:"")),U="IE",j=m[1]),F){if(u(n,"global"))if(x&&(m=x.lang.System,I=m.getProperty("os.arch"),G=G||m.getProperty("os.name")+" "+m.getProperty("os.version")),y&&u(n,"system")&&(m=[n.system])[0]){G||(G=m[0].os||null);try{m[1]=n.require("ringo/engine").version,j=m[1].join("."),U="RingoJS"}catch(t){m[0].global.system==n.system&&(U="Narwhal")}}else"object"==typeof n.process&&!n.process.browser&&(m=n.process)?"object"==typeof m.versions?"string"==typeof m.versions.electron?(M.push("Node "+m.versions.node),U="Electron",j=m.versions.electron):"string"==typeof m.versions.nw&&(M.push("Chromium "+j,"Node "+m.versions.node),U="NW.js",j=m.versions.nw):(U="Node.js",I=m.arch,G=m.platform,j=(j=/[\d.]+/.exec(m.version))?j[0]:"unknown"):P&&(U="Rhino");else l(m=n.runtime)==E?(U="Adobe AIR",G=m.flash.system.Capabilities.os):l(m=n.phantom)==k?(U="PhantomJS",j=(m=m.version||null)&&m.major+"."+m.minor+"."+m.patch):"number"==typeof L.documentMode&&(m=/\bTrident\/(\d+)/i.exec(t))?(j=[j,L.documentMode],(m=+m[1]+4)!=j[1]&&(M.push("IE "+j[1]+" mode"),B&&(B[1]=""),j[1]=m),j="IE"==U?String(j[1].toFixed(1)):j[0]):"number"==typeof L.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(M.push("masking as "+U+" "+j),U="IE",j="11.0",B=["Trident"],G="Windows");G=G&&s(G)}if(j&&(m=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(j)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(F&&a.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(N=/b/i.test(m)?"beta":"alpha",j=j.replace(RegExp(m+"\\+?$"),"")+("beta"==N?C:D)+(/\d+\+?/.exec(m)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(G))U="Firefox Mobile";else if("Maxthon"==U&&j)j=j.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(q))"Xbox 360"==q&&(G=null),"Xbox 360"==q&&/\bIEMobile\b/.test(t)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||q||/Browser|Mobi/.test(U))||"Windows CE"!=G&&!/Mobi/i.test(t))if("IE"==U&&F)try{null===n.external&&M.unshift("platform preview")}catch(t){M.unshift("embedded")}else(/\bBlackBerry\b/.test(q)||/\bBB10\b/.test(t))&&(m=(RegExp(q.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||j)?(m=[m,/BB10/.test(t)],G=(m[1]?(q=null,H="BlackBerry"):"Device Software")+" "+m[0],j=null):this!=o&&"Wii"!=q&&(F&&R||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==U&&(G&&!/^Win/.test(G)&&j>5.5||/\bWindows XP\b/.test(G)&&j>8||8==j&&!/\bTrident\b/.test(t)))&&!b.test(m=e.call(o,t.replace(b,"")+";"))&&m.name&&(m="ing as "+m.name+((m=m.version)?" "+m:""),b.test(U)?(/\bIE\b/.test(m)&&"Mac OS"==G&&(G=null),m="identify"+m):(m="mask"+m,U=O?s(O.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(m)&&(G=null),F||(j=null)),B=["Presto"],M.push(m));else U+=" Mobile";(m=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(m=[parseFloat(m.replace(/\.(\d)$/,".0$1")),m],"Safari"==U&&"+"==m[1].slice(-1)?(U="WebKit Nightly",N="alpha",j=m[1].slice(0,-1)):j!=m[1]&&j!=(m[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(j=null),m[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==m[0]&&537.36==m[2]&&parseFloat(m[1])>=28&&"WebKit"==B&&(B=["Blink"]),F&&(_||m[1])?(B&&(B[1]="like Chrome"),m=m[1]||((m=m[0])<530?1:m<532?2:m<532.05?3:m<533?4:m<534.03?5:m<534.07?6:m<534.1?7:m<534.13?8:m<534.16?9:m<534.24?10:m<534.3?11:m<535.01?12:m<535.02?"13+":m<535.07?15:m<535.11?16:m<535.19?17:m<536.05?18:m<536.1?19:m<537.01?20:m<537.11?"21+":m<537.13?23:m<537.18?24:m<537.24?25:m<537.36?26:"Blink"!=B?"27":"28")):(B&&(B[1]="like Safari"),m=(m=m[0])<400?1:m<500?2:m<526?3:m<533?4:m<534?"4+":m<535?5:m<537?6:m<538?7:m<601?8:"8"),B&&(B[1]+=" "+(m+="number"==typeof m?".x":/[.+]/.test(m)?"":"+")),"Safari"==U&&(!j||parseInt(j)>45)&&(j=m)),"Opera"==U&&(m=/\bzbov|zvav$/.exec(G))?(U+=" ",M.unshift("desktop mode"),"zvav"==m?(U+="Mini",j=null):U+="Mobile",G=G.replace(RegExp(" *"+m+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(B&&B[1])&&(M.unshift("desktop mode"),U="Chrome Mobile",j=null,/\bOS X\b/.test(G)?(H="Apple",G="iOS 4.3+"):G=null),j&&0==j.indexOf(m=/[\d.]+$/.exec(G))&&t.indexOf("/"+m+"-")>-1&&(G=f(G.replace(m,""))),B&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(G)&&/\bSafari\b/.test(B[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(U)&&B[1])&&(m=B[B.length-1])&&M.push(m),M.length&&(M=["("+M.join("; ")+")"]),H&&q&&q.indexOf(H)<0&&M.push("on "+H),q&&M.push((/^on /.test(M[M.length-1])?"":"on ")+q),G&&(m=/ ([\d.+]+)$/.exec(G),v=m&&"/"==G.charAt(G.length-m[0].length-1),G={architecture:32,family:m&&!v?G.replace(m[0],""):G,version:m?m[1]:null,toString:function(){var e=this.version;return this.family+(e&&!v?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(m=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(I))&&!/\bi686\b/i.test(I)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+m),"")),U&&(/\bWOW64\b/i.test(t)||F&&/\w(?:86|32)$/.test(a.cpuClass||a.platform)&&!/\bWin64; x64\b/i.test(t))&&M.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==U&&parseFloat(j)>=39&&(G.architecture=64),t||(t=null);var V={};return V.description=t,V.layout=B&&B[0],V.manufacturer=H,V.name=U,V.prerelease=N,V.product=q,V.ua=t,V.version=U&&j,V.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},V.parse=e,V.toString=function(){return this.description||""},V.version&&M.unshift(j),V.name&&M.unshift(U),G&&U&&(G!=String(G).split(" ")[0]||G!=U.split(" ")[0]&&!q)&&M.push(q?"("+G+")":"on "+G),M.length&&(V.description=M.join(" ")),V}();h.platform=T,void 0!==(i=function(){return T}.call(t,r,t,e))&&(e.exports=i)}).call(this)}).call(t,r(11)(e),r(5))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0,t=0,r=0,n=0,i=0,a=0,s=0;this.on("requestcompleted",function(a,s){var o=s.request_start,l=s.request_response_start,u=s.request_response_end,c=s.request_bytes_loaded;n++;var d=l-o,f=u-l;if(d>0&&f>0&&c>0){var p=c/f*8e3;i++,e+=d,t+=c,r+=f,this.data.view_min_request_throughput=Math.min(this.data.view_min_request_throughput||1/0,p),this.data.view_average_request_throughput=t/r*8e3,this.data.view_max_request_latency=Math.max(this.data.view_max_request_latency||0,d),this.data.view_average_request_latency=e/i,this.data.view_request_count=n}}),this.on("requestfailed",function(e,t){n++,a++,this.data.view_request_count=n,this.data.view_request_failed_count=a}),this.on("requestcanceled",function(e,t){n++,s++,this.data.view_request_count=n,this.data.view_request_canceled_count=s})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e,t,r){var i=(0,s.findMediaElement)(t),u=n(i,3),c=u[0],d=u[1],f=u[2],p=e.log,h=e.utils.getComputedStyle,g=e.utils.secondsToMs;return c?"video"!==f&&"audio"!==f?p.error("The element of `"+d+"` was not a media element."):((r=r||{}).data=(0,a.default)({player_software:"HTML5 Video Element",player_software_version:"No Versions",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:"2.6.0"},r.data),r.getPlayheadTime=function(){return g(c.currentTime)},r.getStateData=function(){return{player_is_paused:c.paused,player_playhead_time:g(c.currentTime),player_width:parseInt(h(c,"width")),player_height:parseInt(h(c,"height")),player_autoplay_on:c.autoplay,player_preload_on:c.preload,video_poster_url:c.poster,video_source_url:c.currentSrc,video_source_duration:g(c.duration),video_source_height:c.videoHeight,video_source_width:c.videoWidth}},c.mux=c.mux||{},c.mux.destroy=function(){Object.keys(c.mux.listeners).forEach(function(e){c.removeEventListener(e,c.mux.listeners[e],!1)}),delete c.mux.listeners,e.emit(d,"destroy")},c.mux.swapElement=function(t){var r=(0,s.findMediaElement)(t),i=n(r,3),o=i[0],l=i[1],u=i[2];return o?"video"!==u&&"audio"!==u?e.log.error("The element of `"+l+"` was not a media element."):(o.muxId=c.muxId,delete c.muxId,o.mux=o.mux||{},o.mux.listeners=(0,a.default)({},c.mux.listeners),delete c.mux.listeners,Object.keys(o.mux.listeners).forEach(function(e){c.removeEventListener(e,o.mux.listeners[e],!1),o.addEventListener(e,o.mux.listeners[e],!1)}),o.mux.swapElement=c.mux.swapElement,o.mux.destroy=c.mux.destroy,delete c.mux,void(c=o)):e.log.error("No element was found with the `"+l+"` query selector.")},c.mux.addHLSJS=function(t){e.addHLSJS(d,t)},c.mux.addDashJS=function(t){e.addDashJS(d,t)},c.mux.removeHLSJS=function(){e.removeHLSJS(d)},c.mux.removeDashJS=function(){e.removeDashJS(d)},e.init(d,r),e.emit(d,"playerready"),c.paused||(e.emit(d,"play"),c.readyState>2&&e.emit(d,"playing")),c.mux.listeners={},void o.forEach(function(t){c.mux.listeners[t]=function(){var r={};"error"===t&&(r.player_error_code=c.error&&c.error.code,r.player_error_message=c.error&&l[c.error.code]),e.emit(d,t,r)},c.addEventListener(t,c.mux.listeners[t],!1)})):p.error("No element was found with the `"+d+"` query selector.")};var i=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r(8),o=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],l={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(50),a=n(i),s=r(1),o=n(s),l=r(51),u=n(l),c=r(52),d=n(c),f=r(0),p=n(f),h=r(7),g=n(h),m=r(4),v={};v.safeCall=a.default,v.safeIncrement=o.default,v.getComputedStyle=u.default,v.secondsToMs=d.default,v.assign=p.default,v.headersStringToObject=g.default,v.extractHostnameAndDomain=m.extractHostnameAndDomain,t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){var a=n;if(e&&"function"==typeof e[t])try{a=e[t].apply(e,r)}catch(e){i.default.info("safeCall error",e)}return a};var n=r(3),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i.default.defaultView&&i.default.defaultView.getComputedStyle)return i.default.defaultView.getComputedStyle(e,null).getPropertyValue(t)};var n=r(10),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.floor(1e3*e)}}])},"C/ht":function(e,t,r){"use strict";var n,i;n=[r("d6sQ"),r("VObA")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__expandable Embeddable__subtitles",propsDefaults:{activeSubtitle:null,languages:[]},propsEvents:{"change:activeSubtitle":"renderActiveSubtitle","change:languages":"render"},initialize:function(){this.adoptView(e),this.initializeProps(),this.initializeState()},render:function(){var e=this.props.get("languages");return e&&e.length&&(this.$el.html(t({languages:e})),this.renderActiveSubtitle()),this},renderActiveSubtitle:function(){var e=this.props.get("activeSubtitle"),t="Embeddable__subtitles__language--active checkable--checked",r=this.find("a.Embeddable__subtitles__language");r.removeClass(t),e&&r.filter("[data-code="+e+"]").addClass(t)}})}.apply(t,n))||(e.exports=i)},DGZq:function(e,t,r){"use strict";(function(e){var n,i;n=[r("lU1m")],void 0===(i=function(e){var t={get:function(){return e.get("_ga")},getClientId:function(){var e=String(t.get()),r=e.split(".")[2]+"."+e.split(".")[3];return-1===r.indexOf("undefined")?r:void 0}};return t}.apply(t,n))||(e.exports=i)}).call(this,r("RoC8")(e))},Dx5M:function(e,t,r){"use strict";var n,i;n=[r("d6sQ"),r("MRb2")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__expandable Embeddable__playlist",initialize:function(e){this.talks=e.talks,this.initializeState(),this.initializeProps()},render:function(){return this.$el.html(t({talks:this.talks.toJSON()})),this}})}.apply(t,n))||(e.exports=i)},EFFf:function(e,t,r){"use strict";var n;void 0===(n=function(){return function(e){throw new Error("Error in TED: "+e)}}.call(t,r,t,e))||(e.exports=n)},ELgS:function(e,t,r){var n;!function(){var r=this,i="_q",a=[];function s(e,t){var r=e.split(".").reverse(),n=r.length,i=t;for(t=null;n&&i;)t=i,i=i[r[n-=1]];return!!i&&{p:i,c:t}}function o(e,t,r){for(var n,i=t.length;i--&&!n;)n=s(e,t[i]);n&&n.p.apply||function(e){throw new Error(e)}("No such method: "+e),n.p.apply(n.c,r)}function l(e,t){o(e[0],[r,t.modules],e.slice(1))}function u(e){return a.slice.apply(e)}function c(e,t){for(var r=-1,n=e.length;++r<n;)t.callback(u(e[r]),t)}function d(e){e||(e={}),e.q=e.q||i,"string"==typeof e.q&&(e.q=r[e.q]),e.callback=e.callback||l,e.modules=e.modules||[],c(e.q.splice(0),e),e.q.push=function(){c(u(arguments),e)}}void 0===(n=function(){return d}.apply(t,[]))||(e.exports=n)}()},EUOL:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("jn94")],void 0===(i=function(e,t,r){var n,i,a=[320,480,600,768,1024,1200],s=1024,o=e("html").is(".oldie"),l=a.length,u=[{at:0,its:"oh"},{at:480,its:"xs"},{at:768,its:"sm"},{at:1024,its:"lg"}],c=u.length;function d(){var e=0,t=l;if(n=window.innerHeight,i=window.innerWidth||document.documentElement.clientWidth,o)e=s;else for(;t--;)!e&&i>=a[t]&&(e=a[t]);r("breakpoint").publishUnique(e),r("height").publishUnique(n),r("width").publishUnique(i)}return e(window).on("resize",t.throttle(d,100)),d(),r("breakpoint").subscribe(function(e){for(var t,n=c;n--;)!t&&e>=u[n].at&&(t=u[n].its);r("sizeGroup").publishUnique(t)}),r}.apply(t,n))||(e.exports=i)},HQPd:function(e,t,r){"use strict";var n,i;n=[r("5cge"),r("yAjw")],void 0===(i=function(e,t){return t.Model.extend({toPlayer:function(){var t=this.toJSON(),r=t.resources||{},n=r.hls||{},i=r.h264&&r.h264[0]||{};return{id:t.id,mediaIdentifier:t.mediaIdentifier,resources:{hls:{stream:n.stream,metadata:n.metadata,adUrl:n.adUrl,maiTargeting:n.maiTargeting||{}},h264:[{file:i.file}]},duration:t.duration,introDuration:t.introDuration,adDuration:t.adDuration,postAdDuration:t.postAdDuration,nativeLanguage:t.nativeLanguage,languages:e.map(t.languages||[],function(e){return{langaugeName:e.languageName,languageCode:e.languageCode,isRtl:e.isRtl}})}}})}.apply(t,n))||(e.exports=i)},IVfQ:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t.default},Ivfv:function(e,t,r){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===(n=function(){return function(e){var t=Array.prototype.slice.call(e,0),r=t[t.length-1];return r&&"object"===(void 0===r?"undefined":i(r))&&r.data&&r.hash&&r.name&&t.pop(),t}}.call(t,r,t,e))||(e.exports=n)},JNxy:function(e,t,r){var n=r("O074"),i=r("Yfm1"),a=r("BjwM");function s(e){return window.JSON?window.JSON.stringify(e):e}function o(e){var t={};return function(r){var i,a=r&&t[r];if(!a){i=n.Callbacks(e&&e.hasOwnProperty(r)?e[r]:"memory");var o=function(){var e=Array.prototype.slice.call(arguments,0);try{i.fire.apply(i,e)}catch(e){window.console&&window.console.warn&&window.console.warn(e)}};a={publish:o,subscribe:i.add,unsubscribe:i.remove,once:function(){var e=arguments;return i.add(function t(){!function e(t,r,i){var a,s;for(a=0,s=r.length;a<s;a++)n.isArray(r[a])?e(t,r[a],i):r[a].apply(t,i)}(i,e,arguments),i.remove(t)})}};var l=null,u=null;i.add(function(e){l=e,u=s(e)}),a.publishUnique=function(e){s(e)!==u&&o.call(i,e)},a.read=function(){return l},r&&(t[r]=a)}return a}}function l(e){var t=e.options;return function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}({serviceHost:"https://www.ted.com",volume:e.config.get("volume"),autoplay:0,supressSubtitles:!!t.customSubtitles,fullscreenEnabled:e.canFullScreen?0:1})}function u(e){var t=this,r=n("<div></div>").css({display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"});function i(){setTimeout(function(){t.$ad.show(),t.$unpauser.hide()},2e3)}t.$ad=r.clone(),t.$unpauser=r.clone(),t.$ad.on("click",function(){t.$unpauser.show(),t.$ad.hide(),e.pause(),e.topic("play").once(i)}),t.$unpauser.on("click",function(){e.play()}),n(e.el).after(t.$ad),n(e.el).after(t.$unpauser)}function c(e){return e=e||window&&window.location&&window.location.href||"",Boolean(e.match(/[?&]rid(?:[=&].*)?$/))}n.extend(u.prototype,{el:function(){return this.$ad.get(0)},show:function(){this.$ad.show(),this.$unpauser.hide()},hide:function(){this.$ad.hide(),this.$unpauser.hide()}}),u.forPlayer=function(e){return e._clickOverlay||(e._clickOverlay=new u(e)),e._clickOverlay};var d="ted.parappa";function f(e){var t,r={context:String(e&&e.context||""),event:String(e&&e.event||""),message:String(e&&e.message||""),details:e&&e.details||{}},i=d;0===r.context.indexOf(d)?i=r.context:0===r.context.indexOf("/")?i+=r.context:r.context&&(i+="/"+r.context),i=encodeURIComponent(i).replace(/%2F/g,"/");try{t=JSON.parse(JSON.stringify(r.details))}catch(e){t={}}var a,s={context:"ted_player_wrapper",context_new:i,event:r.event,message:r.message,version:"3.5.7",location:window&&window.location&&window.location.href||"parappa:blank",details:t};try{a=JSON.stringify(s)}catch(e){a='{"message":"Client does not support JSON.stringify"}'}n.ajax({type:"POST",url:"https://error-collector.ted.com/",headers:{"Content-Type":"application/json"},data:a,dataType:"text",mimeType:"text/plain"})}var p,h={},g=[],m=[];function v(){if(p)return p;var e=n.Deferred();p=e.promise();var t=+new Date,r=!1;return n.ajax({url:"https://imasdk.googleapis.com/js/sdkloader/ima3_dai.js",dataType:"script",timeout:1e4}).done(function(){var n=window.google,i=!(n&&n.ima&&n.ima.dai&&n.ima.dai.api&&n.ima.dai.api.StreamManager),a=Math.round((+new Date-t)/100)/10;if(a>=2&&f({message:"IMA SDK library loaded after "+a+" seconds",event:"ima-lib",details:{state:i?"corrupt":"success",duration:a}}),!r)return i?e.reject(new Error("IMA API not found")):e.resolve(n)}).fail(function(){f({message:"IMA SDK library timed out",event:"ima-lib",details:{state:"timeout",duration:10}})}),setTimeout(function(){r=!0,e.reject(new Error("IMA SDK could not load"))},2e3),p}function y(e){return Math.round((+new Date-e)/100)/10}function _(e){return Math.max(e.end-e.start,0)}function b(e){e.dai=e.dai||{},e.dai.request&&e.dai.request.reject(new Error("DAI request replaced")),e.dai.companions&&e.dai.companions.reject(new Error("DAI request replaced")),e.dai.streamId=void 0;var t=n.Deferred();e.dai.companions=t,t.always(function(){e.dai.companions=null});var r=n.Deferred();e.dai.request=r,r.always(function(){e.dai.request=null}),r.fail(function(e){t.reject(e)});var i=[r.promise(),t.promise()];return e.options.dai?(v().done(function(t){var n=e.currentTalk.mediaIdentifier;if(h.isMediaExcluded(n))r.reject(new Error("DAI is disabled for this media"));else if(h.isTalkExcluded(e.currentTalk.id))r.reject(new Error("DAI is disabled for this talk"));else{var i=function(e,t){if(e.dai.streamManager)return e.dai.streamManager;var r=new t.ima.dai.api.StreamManager(e.el);return r.setClickElement(u.forPlayer(e).el()),r.addEventListener([t.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,t.ima.dai.api.StreamEvent.Type.ERROR,t.ima.dai.api.StreamEvent.Type.LOADED,t.ima.dai.api.StreamEvent.Type.STARTED],function(r){switch(r.type){case t.ima.dai.api.StreamEvent.Type.STARTED:var n={creativeId:(h=r.getAd()).getCreativeId(),lineItemId:h.getAdId(),adSystem:h.getAdSystem(),dealId:h.getDealId(),advertiserName:h.getAdvertiserName(),title:h.getTitle(),universalAdIdRegistry:h.getUniversalAdIdRegistry(),universalAdIds:h.getUniversalAdIds().join(","),wrapperAdIds:h.getWrapperAdIds().join(","),wrapperAdSystems:h.getWrapperAdSystems().join(","),wrapperAdCreativeIds:h.getWrapperCreativeIds().join(",")};e.topic("currentAd").publish(n);for(var i={},a=h.getCompanionAds(),s=-1,o=a.length;++s<o;){var l=a[s].getContent();l&&(i[a[s].getWidth()+"x"+a[s].getHeight()]=l)}e.dai.companions&&e.dai.companions.resolve(i),"5018375894"!==n.lineItemId&&f({message:"IMA DAI ad started",event:"ima-ad",details:{dai:{ad:n,streamId:String(e.dai&&e.dai.streamId||"")}}});break;case t.ima.dai.api.StreamEvent.Type.LOADED:if(e.dai.requestStartTime){var u=y(e.dai.requestStartTime);e.dai.requestStartTime=null,u>=2&&f({message:"IMA DAI stream loaded after "+u+" seconds",event:"ima-stream",details:{state:"success",duration:u}})}if(e.dai.request){var c=r.getStreamData();e.dai.streamId=c&&c.streamId||"UNKNOWN",e.dai.request.resolve(c)}break;case t.ima.dai.api.StreamEvent.Type.ERROR:if(e.dai.requestStartTime&&(u=y(e.dai.requestStartTime),e.dai.requestStartTime=null,u>=2&&f({message:"IMA DAI stream error after "+u+" seconds",event:"ima-stream",details:{state:"error",duration:u}})),e.options.dai=!1,e.dai.request)return void e.dai.request.reject(new Error("DAI stream error"));var d=Number(e.topic("currentTime").read());e._setSourceFromCurrentTalk(),d>3&&(e.seek(d-1),e.play());break;case t.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED:var p,h=r.getStreamData();try{p=h&&h.cuepoints&&JSON.stringify(h.cuepoints)||""}catch(e){p=""}if(e.topic("streamCuepoints").publish(p),h&&h.cuepoints&&h.cuepoints.length){var g=h.cuepoints[0];h.cuepoints.length>1?(e.topic("streamPrerollDuration").publishUnique(_(g)),e.topic("streamPostrollDuration").publishUnique(_(h.cuepoints[h.cuepoints.length-1]))):g.start<1?(e.topic("streamPrerollDuration").publishUnique(_(g)),e.topic("streamPostrollDuration").publishUnique(0)):(e.topic("streamPrerollDuration").publishUnique(0),e.topic("streamPostrollDuration").publishUnique(_(g)))}}},!1),e.dai.streamManager=r,r}(e,t),a=new t.ima.dai.api.VODStreamRequest;a.contentSourceId=e.options.contentSourceId,a.videoId=n;var s={sz:"854x480",ciu_szs:"300x250,120x60"},o=e.options&&e.options.maiAdUnitId;o&&(s.iu=o);var l=[],d=e.currentTalk.resources&&e.currentTalk.resources.hls&&e.currentTalk.resources.hls.maiTargeting;if(d)for(var p in d)l.push(encodeURIComponent(p)+"="+encodeURIComponent(d[p]));c()&&l.push("recommended=1"),d&&d.talk&&(s.description_url="https://www.ted.com/talks/"+d.talk),e.options.dfptest&&l.push("dfptest="+encodeURIComponent(e.options.dfptest)),s.cust_params=l.join("&"),a.adTagParameters=s,e.dai.requestStartTime=+new Date,i.requestStream(a),setTimeout(function(){e.dai.request&&r.reject(new Error("DAI stream timeout"))},2e3)}}).fail(r.reject),i):(r.reject(new Error("DAI is currently disabled")),i)}h.isMediaExcluded=function(e){return-1!==g.indexOf(e)},h.isTalkExcluded=function(e){return-1!==m.indexOf(Number(e))};var A={};function E(e,t){e.topic("talk.subtitles").publish(t)}function S(e){var t=new n.Deferred,r=t.promise(),i=function(e){var t,r,i=new n.Deferred,a=i.promise();try{t=e.currentTalk.resources.hls,r=t.stream}catch(t){return e.throwError({type:"init",message:"Missing HLS stream resource.",severity:"fatal"}),i.reject(),a}function s(){E(e,A.getSubtitlesFromTalk(e.currentTalk)),e.topic("streamSource").publish(r),e.topic("streamPrerollDuration").publish(0),e.topic("streamPostrollDuration").publish(0),i.resolve()}if(!e.options.dai)return s(),a;if(!e.options||!e.options.maiAdUnitId)return e.throwError({type:"init",message:"Missing maiAdUnitId.",severity:"fatal"}),i.reject(),a;e.topic("streamPrerollDuration").publish(0),e.topic("streamPostrollDuration").publish(0);var o=b(e);return o[0].done(function(t){E(e,A.getSubtitlesFromTalkAndDaiAd(e.currentTalk,t)),e.topic("streamSource").publish(t.url),i.resolve()}).fail(function(t){e.options.dai=!1,s()}),o[1].done(function(t){e.topic("ad.companions").publish(t)}),a}(e);return function r(){var a=!!e.options.dai,s=function(e){var t,r=new n.Deferred,i=r.promise();e.topic;try{t=e.currentTalk.resources.hls.metadata}catch(t){return e.throwError({type:"init",message:"Missing HLS metadata URL for current talk",severity:"fatal"}),r.reject(),i}if(e.options.dai&&e.options.daiMetadataPreroll&&-1===t.indexOf("preroll=")){var a=-1===t.indexOf("?")?"?":"&";t+=a+"preroll="+e.options.daiMetadataPreroll}return n.getJSON(t).then(function(t){var n=t.timing,i=n&&n.content&&n.content.start>0?+n.content.start:0;e.topic("streamIntroDuration").publish(i),r.resolve()}).fail(function(n,i,a){e.throwError({type:"init",message:"Error retrieving HLS metadata",severity:"fatal",details:{request:{url:t},response:{status:n.status,statusText:i}}}),r.reject()}),i}(e);n.when(s,i).done(function(){!!e.options.dai!==a&&e.options.daiMetadataPreroll?r():(e._setSource(e.topic("streamSource").read()),e.setTitle(e.currentTalk&&e.currentTalk.name),t.resolve())}).fail(function(){t.reject()})}(),r}A.getTrackQueryForStream=function(e){var t=String(e).split("?")[1];return t?"?"+t.replace(/uniqueId=[^&]*/i,"").replace(/preroll=[^&]*/i,"").replace(/postroll=[^&]*/i,"").replace(/&+/,"&").replace(/^&/,"").replace(/&$/,""):""},A.getSubtitlesFromTalk=function(e){if(!e||!e.languages||!e.languages.length)return[];var t=[],r="";try{r=A.getTrackQueryForStream(e.resources.hls.stream)}catch(e){}for(var n=e.languages.length;n--;){var i=e.languages[n];t.push({label:i.languageName,src:"https://hls.ted.com/talks/"+e.id+"/subtitles/"+i.languageCode+"/full.vtt"+r,srclang:i.languageCode})}return t},A.getSubtitlesFromTalkAndDaiAd=function(e,t){if(!(e&&e.languages&&e.languages.length&&t&&t.subtitles&&t.subtitles.length))return[];for(var r={},n=e.languages.length;n--;){var i=e.languages[n];r[i.languageCode]=i.languageName}for(var a=[],s=t.subtitles.length;s--;){var o=t.subtitles[s];r[o.language]&&a.push({label:r[o.language],src:o.webvtt,srclang:o.language})}return a},A.buildTracks=function(e){var t=n();if(!e||!e.length)return t;for(var r=e.length;r--;){var i=e[r];t=t.add(n("<track>").attr("kind","subtitles").attr("label",i.label).attr("src",i.src).attr("srclang",i.srclang))}return t};var w,T,k,x,P,D,C="undefined",L="object",R="application/x-shockwave-flash",O="SWFObjectExprInst",I=window,M=document,N=navigator,F=!1,j=[function(){F?function(){var e=M.getElementsByTagName("body")[0],t=ae(L);t.setAttribute("type",R);var r=e.appendChild(t);if(r){var n=0;!function(){if(typeof r.GetVariable!=C){var i=r.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),W.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);t.parentElement&&e.removeChild(t),r=null,Y()}()}else Y()}():Y()}],B=[],U=[],q=[],H=!1,G=!1,V=!0,W=function(){var e=typeof M.getElementById!=C&&typeof M.getElementsByTagName!=C&&typeof M.createElement!=C,t=N.userAgent.toLowerCase(),r=N.platform.toLowerCase(),n=/win/.test(r||t),i=/mac/.test(r||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s=!1,o=[0,0,0],l=null;if(typeof N.plugins!=C&&typeof N.plugins["Shockwave Flash"]==L)!(l=N.plugins["Shockwave Flash"].description)||typeof N.mimeTypes!=C&&N.mimeTypes[R]&&!N.mimeTypes[R].enabledPlugin||(F=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof I.ActiveXObject!=C)try{var u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");u&&(l=u.GetVariable("$version"))&&(s=!0,l=l.split(" ")[1].split(","),o=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)])}catch(e){}return{w3:e,pv:o,wk:a,ie:s,win:n,mac:i}}();W.w3&&((typeof M.readyState!=C&&"complete"==M.readyState||typeof M.readyState==C&&(M.getElementsByTagName("body")[0]||M.body))&&K(),H||(typeof M.addEventListener!=C&&M.addEventListener("DOMContentLoaded",K,!1),W.ie&&W.win&&(M.attachEvent("onreadystatechange",function(){"complete"==M.readyState&&(M.detachEvent("onreadystatechange",arguments.callee),K())}),I==top&&function(){if(!H){try{M.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}K()}}()),W.wk&&function(){H||(/loaded|complete/.test(M.readyState)?K():setTimeout(arguments.callee,0))}(),z(K)));function K(){if(!H){try{var e=M.getElementsByTagName("body")[0].appendChild(ae("span"));e.parentNode.removeChild(e)}catch(e){return}H=!0;for(var t=j.length,r=0;r<t;r++)j[r]()}}function $(e){H?e():j[j.length]=e}function z(e){if(typeof I.addEventListener!=C)I.addEventListener("load",e,!1);else if(typeof M.addEventListener!=C)M.addEventListener("load",e,!1);else if(typeof I.attachEvent!=C)!function(e,t,r){e.attachEvent(t,r),q[q.length]=[e,t,r]}(I,"onload",e);else if("function"==typeof I.onload){var t=I.onload;I.onload=function(){t(),e()}}else I.onload=e}function Y(){var e=B.length;if(e>0)for(var t=0;t<e;t++){var r=B[t].id,n=B[t].callbackFn,i={success:!1,id:r};if(W.pv[0]>0){var a=ie(r);if(a)if(!se(B[t].swfVersion)||W.wk&&W.wk<312)if(B[t].expressInstall&&Q()){var s={};s.data=B[t].expressInstall,s.width=a.getAttribute("width")||"0",s.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(s.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(s.align=a.getAttribute("align"));for(var o={},l=a.getElementsByTagName("param"),u=l.length,c=0;c<u;c++)"movie"!=l[c].getAttribute("name").toLowerCase()&&(o[l[c].getAttribute("name")]=l[c].getAttribute("value"));J(s,o,r,n)}else Z(a),n&&n(i);else le(r,!0),n&&(i.success=!0,i.ref=X(r),n(i))}else if(le(r,!0),n){var d=X(r);d&&typeof d.SetVariable!=C&&(i.success=!0,i.ref=d),n(i)}}}function X(e){var t=null,r=ie(e);if(r&&"OBJECT"==r.nodeName)if(typeof r.SetVariable!=C)t=r;else{var n=r.getElementsByTagName(L)[0];n&&(t=n)}return t}function Q(){return!G&&se("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function J(e,t,r,n){G=!0,k=n||null,x={success:!1,id:r};var i=ie(r);if(i){"OBJECT"==i.nodeName?(w=ee(i),T=null):(w=i,T=r),e.id=O,(typeof e.width==C||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==C||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var a=W.ie&&W.win?"ActiveX":"PlugIn",s="MMredirectURL="+I.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+M.title;if(typeof t.flashvars!=C?t.flashvars+="&"+s:t.flashvars=s,W.ie&&W.win&&4!=i.readyState){var o=ae("div");r+="SWFObjectNew",o.setAttribute("id",r),i.parentNode.insertBefore(o,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}te(e,t,r)}}function Z(e){if(W.ie&&W.win&&4!=e.readyState){var t=ae("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(ee(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(ee(e),e)}function ee(e){var t=ae("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(L)[0];if(r){var n=r.childNodes;if(n)for(var i=n.length,a=0;a<i;a++)1==n[a].nodeType&&"PARAM"==n[a].nodeName||8==n[a].nodeType||t.appendChild(n[a].cloneNode(!0))}}return t}function te(e,t,r){var n,i=ie(r);if(W.wk&&W.wk<312)return n;if(i)if(typeof e.id==C&&(e.id=r),W.ie&&W.win){var a="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?a+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(a+=" "+s+'="'+e[s]+'"'));var o="";for(var l in t)t[l]!=Object.prototype[l]&&(o+='<param name="'+l+'" value="'+t[l]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+o+"</object>",U[U.length]=e.id,n=ie(e.id)}else{var u=ae(L);for(var c in u.setAttribute("type",R),e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,e[c]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&re(u,d,t[d]);i.parentNode.replaceChild(u,i),n=u}return n}function re(e,t,r){var n=ae("param");n.setAttribute("name",t),n.setAttribute("value",r),e.appendChild(n)}function ne(e){var t=ie(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?function(e){var t=ie(e);if(t){for(var r in t)"function"==typeof t[r]&&(t[r]=null);t.parentNode.removeChild(t)}}(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function ie(e){var t=null;try{t=M.getElementById(e)}catch(e){}return t}function ae(e){return M.createElement(e)}function se(e){var t=W.pv,r=e.split(".");return r[0]=parseInt(r[0],10),r[1]=parseInt(r[1],10)||0,r[2]=parseInt(r[2],10)||0,t[0]>r[0]||t[0]==r[0]&&t[1]>r[1]||t[0]==r[0]&&t[1]==r[1]&&t[2]>=r[2]}function oe(e,t,r,n){if(!W.ie||!W.mac){var i=M.getElementsByTagName("head")[0];if(i){var a=r&&"string"==typeof r?r:"screen";if(n&&(P=null,D=null),!P||D!=a){var s=ae("style");s.setAttribute("type","text/css"),s.setAttribute("media",a),P=i.appendChild(s),W.ie&&W.win&&typeof M.styleSheets!=C&&M.styleSheets.length>0&&(P=M.styleSheets[M.styleSheets.length-1]),D=a}W.ie&&W.win?P&&typeof P.addRule==L&&P.addRule(e,t):P&&typeof M.createTextNode!=C&&P.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function le(e,t){if(V){var r=t?"visible":"hidden";H&&ie(e)?ie(e).style.visibility=r:oe("#"+e,"visibility:"+r)}}function ue(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=C?encodeURIComponent(e):e}W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=q.length,t=0;t<e;t++)q[t][0].detachEvent(q[t][1],q[t][2]);for(var r=U.length,n=0;n<r;n++)ne(U[n]);for(var i in W)W[i]=null;for(var a in W=null,swfobject)swfobject[a]=null;swfobject=null});var ce={registerObject:function(e,t,r,n){if(W.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=r,i.callbackFn=n,B[B.length]=i,le(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(W.w3)return X(e)},embedSWF:function(e,t,r,n,i,a,s,o,l,u){var c={success:!1,id:t};W.w3&&!(W.wk&&W.wk<312)&&e&&t&&r&&n&&i?(le(t,!1),$(function(){r+="",n+="";var d={};if(l&&typeof l===L)for(var f in l)d[f]=l[f];d.data=e,d.width=r,d.height=n;var p={};if(o&&typeof o===L)for(var h in o)p[h]=o[h];if(s&&typeof s===L)for(var g in s)typeof p.flashvars!=C?p.flashvars+="&"+g+"="+s[g]:p.flashvars=g+"="+s[g];if(se(i)){var m=te(d,p,t);d.id==t&&le(t,!0),c.success=!0,c.ref=m}else{if(a&&Q())return d.data=a,void J(d,p,t,u);le(t,!0)}u&&u(c)})):u&&u(c)},switchOffAutoHideShow:function(){V=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:se,createSWF:function(e,t,r){return W.w3?te(e,t,r):void 0},showExpressInstall:function(e,t,r,n){W.w3&&Q()&&J(e,t,r,n)},removeSWF:function(e){W.w3&&ne(e)},createCSS:function(e,t,r,n){W.w3&&oe(e,t,r,n)},addDomLoadEvent:$,addLoadEvent:z,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return ue(t);for(var r=t.split("&"),n=0;n<r.length;n++)if(r[n].substring(0,r[n].indexOf("="))==e)return ue(r[n].substring(r[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(G){var e=ie(O);e&&w&&(e.parentNode.replaceChild(w,e),T&&(le(T,!0),W.ie&&W.win&&(w.style.display="block")),k&&k(x)),G=!1}}},de=Math.floor(9999*Math.random());function fe(e){return e.id||(e.id="ted-player-"+de++),e.id}var pe={flash:function(e){var t={bgcolor:"#000000",quality:"high",wmode:"opaque",allowscriptaccess:"always",allowfullscreen:"true"},r=e.options,n=fe(r.el);if("OBJECT"!==r.el.nodeName){var i=l(e),a=r.attrs;t.flashvars=i,a.data=r.swf,ce.createSWF(a,t,n)}e.el=document.getElementById(n),e.topic("ready.dom").publish()},h264:function(e){var t,r=e.options,i=n("<video>"),a=fe(r.el);e.currentTalk=r.talks[0],t=e.currentTalk.resources.h264[0].file,i.attr(r.attrs),i.attr("preload","none"),i.attr("id",a),n(r.el).replaceWith(i),e.el=i[0],e.setTitle(e.currentTalk.name),e._setSource(t),e.topic("ready.dom").publish()},hls:function(e){var t=e.options,r=n("<video>"),i=fe(t.el);e.currentTalk=t.talks[0],r.attr(t.attrs),r.attr("id",i),n(t.el).replaceWith(r),e.el=r[0],e.setTitle(e.currentTalk.name),S(e).always(function(){e.topic("ready.dom").publish()})},hlsjs:function(e){var t=e.options,r=n("<video>"),i=fe(t.el);e.currentTalk=t.talks[0],r.attr(t.attrs),r.attr("id",i),r.attr("crossorigin","anonymous"),n(t.el).replaceWith(r),e.el=r[0],e.setTitle(e.currentTalk.name),S(e).always(function(){e.topic("ready.dom").publish()})}};var he=window.navigator&&window.navigator.userAgent||"";function ge(){return!!he.match(/(Android|iPad|iPhone|iPod|KaiOS|UCBrowser)/gi)}ge.isKaiOS=function(){return!!he.match(/\bKaiOS\/([\d\.]+)/i)};var me=document,ve=me.createElement("video"),ye=me.createElement("track"),_e={fullScreenMode:function(){return ve.requestFullScreen?!!me.fullscreenEnabled&&"standard":ve.mozRequestFullScreen?!!me.mozFullScreenEnabled&&"moz":ve.webkitRequestFullScreen?!!me.webkitFullscreenEnabled&&"webkit":ve.webkitEnterFullscreen?"webkitVideo":!!ve.msRequestFullscreen&&(!!me.msFullscreenEnabled&&"ms")},canPlaybackRate:function(){return!(!ve.playbackRate||ve.playbackRate!==ve.defaultPlaybackRate)},canPopOut:function(){return"function"==typeof ve.webkitSupportsPresentationMode},canVolume:function(){return!ge()||ge.isKaiOS()},canHtml5Subtitle:function(){return!!(((ve&&ye&&"function"==typeof ve.addTextTrack&&"kind")in ye&&"crossOrigin")in ve)}},be=document.createElement("video");function Ae(e){return be.canPlayType(e).replace(/^no$/,"")}function Ee(e){var t=navigator.userAgent.toLowerCase(),r=t.indexOf("windows nt")>-1&&t.indexOf("; arm;")>-1,n=e.modes||(String(window.navigator&&window.navigator.userAgent||"").match(/\bEdge\/[\d\.]+/i)?["hlsjs","hls","h264"]:["hls","hlsjs","h264"]),a=(String(t).match(/\sandroid ([\d]+)/)||[])[1],s=(String(t).match(/\schrome\/([\d]+)/)||[])[1],o=t.indexOf("windows nt 6.")>-1&&t.indexOf("; rv:11.")>-1&&-1===t.indexOf("; Touch"),l=!(r||-1!==t.indexOf("android")||!ce.hasFlashPlayerVersion(e.flashVersion)),u={flash:function(){return l},h264:function(){return!(!be.canPlayType||!Ae('video/mp4; codecs="avc1.42E01E"'))},hls:function(){return!(!be.canPlayType||-1!==t.indexOf("kaios")||-1!==t.indexOf("android")||-1!==t.indexOf("googletv")||!Ae("application/vnd.apple.mpegURL")&&!Ae("application/x-mpegURL"))},hlsjs:function(){return!(!be.canPlayType||-1!==t.indexOf("windows phone")||a&&!(a>=5)||s&&!(s>=34)||o&&l&&"hlsjs"!==e.mode||!i.isSupported())}};if(e.mode&&-1!==u[e.mode])return!!u[e.mode]()&&e.mode;try{for(var c=-1,d=n.length;++c<d;)if(u[n[c]]())return n[c]}catch(e){}return!1}var Se=["hls","hlsjs","h264"];var we=["el","talks"];function Te(e,t,r,i){var a,s=0;"boolean"!=typeof t&&(i=r,r=t,t=void 0);var o=function(){var n=this,o=+new Date-s,l=arguments;function u(){s=+new Date,r.apply(n,l)}i&&!a&&u(),a&&clearTimeout(a),void 0===i&&o>e?u():!0!==t&&(a=setTimeout(i?function(){a=void 0}:u,void 0===i?e-o:e))};return n.guid&&(o.guid=r.guid=r.guid||n.guid++),o}var ke=Math.pow(2,53)-1;function xe(e,t){e.topic("ad").publish({contentSourceId:(e.options||{}).contentSourceId,videoId:(e.currentTalk||{}).mediaIdentifier,companions:t||{},custParams:n.extend({},(((e.currentTalk||{}).resources||{}).hls||{}).maiTargeting||{},e.options&&e.options.dfptest?{dfptest:e.options.dfptest}:{},c()?{recommended:"1"}:{}),token:Math.floor(Math.random()*ke).toString(36)+"-"+(new Date).getTime().toString(36)})}function Pe(e){e.ads={last:{}},e.topic("ad").subscribe(function(t){t&&e.ads&&(e.ads.last=t)}),e.topic("ad.companions").subscribe(function(t){var r=!!t&&Object.getOwnPropertyNames(t).length>0,n=(e.currentTalk||{}).mediaIdentifier,i=e.ads&&e.ads.last&&n!==e.ads.last.videoId;(r||i)&&xe(e,t)}),xe(e)}function De(e,t,r){var n=e.options.talks,i=n.length;for(r||(r=0);i--;)if(n[i].id==t)return n[i+r]}var Ce=Te(100,function(e,t){e("streamTime").publishUnique(t)}),Le=Te(100,function(e,t){e("postrollRemaining").publishUnique(t)});function Re(e){var t,r,n,i=e.topic,a=!1,s=e.config.get("muted");i("muted").subscribe(function(e){s=e}),i("ready.flashInterface").once(function(){var t=e.currentTalk||e.options.talks[0];e.currentTalk=t,e._setSource(t.id,t.resources.hls.stream,0,0,0),e.setTitle(t.name)}),i("ready.flashTalk").once(function(){i("ready.handlers").publish(),e.capQualityToStage(e.options.capQualityToStage)}),window.onPlayerEvent=function(o,l){try{!function(o,l){switch(o){case"player.error":e.throwError({type:"flash",message:l&&l.message||"Flash player error",severity:l&&l.severity||void 0});break;case"player.pause":r=!1,i("pause").publish();break;case"player.seeked":e._isFirstPlaying||i("seeked").publish();break;case"player.seeking":e._isFirstPlaying||(i("seeking").publish(),r&&(n=!0));break;case"player.play":e._isFirstPlaying=!1,i("ready.seekable").publishUnique(!0),a&&(i("bufferPlayable").publish(),a=!1),r=!0,!e._isRequestedPlay&&n||i("play").publish(),n=!1,e._isRequestedPlay=!1;break;case"player.complete":r=!1,i("complete").publish(e.currentTalk);break;case"player.talk.complete":r=!1,i("talkComplete").publish(e.currentTalk);break;case"player.ready":i("ready.flashInterface").publish();break;case"player.loaded":i("ready.sourceSet").publishUnique(!0),i("ready.flashTalk").publish();var u=De(e,l.talkId);e.currentTalk=u,i("talk").publishUnique(u),i("talk.language").publishUnique(u),t&&e.el.playVideo(),t=!0;break;case"player.metadata":i("streamDuration").publishUnique(l.duration);break;case"player.timeupdate":Ce(i,l.time);break;case"player.volumechange":var c=Math.round(1e3*+l.volume)/1e3;(c>0||!s)&&i("volume").publishUnique(c);break;case"player.ad.postroll.start":i("postrollStart").publish();break;case"player.ad.postroll.end":i("postrollComplete").publish();break;case"player.ad.postroll.duration":i("postrollDuration").publish(l.duration);break;case"player.ad.postroll.remaining":Le(i,l.time);break;case"player.buffer.empty":a||(a=!0,i("bufferUnplayable").publish());break;case"player.subtitle.display":i("subtitleCue.unnormalized").publish(l.text);break;case"player.metrics":i("metricsData").publish(l);break;case"player.metrics.toggle":i("metricsToggle").publish()}}(o,l)}catch(t){if(!t)return;e.throwError({type:"flash",message:t.message})}};var o=e.options.history,l=[];if(o&&o.length)for(var u=-1,c=o.length;++u<c;)window.onPlayerEvent.apply(l.slice.apply(o[u]))}function Oe(e,t){if(!e.languages||!t)return!1;for(var r=e.languages.length;r--;)if(e.languages[r].languageCode===t)return e.languages[r];return!1}function Ie(e){var t=e.options.talks.length;return t<=1||e.currentTalk.id===e.options.talks[t-1].id}function Me(e){var t,r=e.topic;function n(){return e.options.customSubtitles&&!r("subtitleCue.unavailable").read()?"hidden":"showing"}function i(){var e=n();t&&t.mode!==e&&(t.mode=e)}function a(){t&&r("subtitleCue.unnormalized").publish("hidden"===t.mode&&(t.activeCues&&t.activeCues[0]&&t.activeCues[0].text?String(t.activeCues[0].text):""))}function s(e){e&&(e.mode="disabled",e.removeEventListener("cuechange",a))}r("subtitleCue.unavailable").subscribe(i),r("subtitle.track").subscribe(function(e){e&&e!==t&&(s(t),function(e){e&&(e.addEventListener("cuechange",a),e.mode=n())}(t=e))}),r("subtitle").subscribe(function(e){!e&&t&&(s(t),t=void 0)}),r("nativeControls").subscribe(function(e){r("subtitleCue.unavailable").publish(e)}),r("subtitleCue.unnormalized").subscribe(Te(5e3,i))}function Ne(e){var t=e.topic,r=e.el,i=n(r);!function(e){var t=e.topic,r={};t("play").subscribe(function(){r={}}),t("talkComplete.unnormalized").subscribe(function(){var n=e.currentTalk||{};r.id&&n.id==r.id||t("talkComplete").publish(n),r=n})}(e),function(e){e.topic("bufferUnplayable.unnormalized").subscribe(function(t){e.topic(t?"bufferUnplayable":"bufferPlayable").publish()})}(e);var a=!1;function s(){t("bufferUnplayable.unnormalized").publishUnique(!1)}function o(){var r=e.currentTalk&&e.currentTalk.id;t("bufferUnplayable.unnormalized").read()||t("play.unnormalized").read()!==r||a&&t("play").publish()}function l(){a&&t("streamDuration").publishUnique(r.duration)}function u(){t("video.seekable").publishUnique(r.readyState>=2)}function c(){var r=t("subtitle.pending").read();null!==r&&e.subtitle(r)}t("ready.sourceSet").subscribe(function(e){a=e}),n.each(["seeked","seeking"],function(e,r){i.on(r,function(){a&&t(r).publish()})}),i.on("pause",function(){a&&t("pause").publish()}),i.on("canplay",s),i.on("canplaythrough",s),i.on("timeupdate",Te(100,function(){a&&t("streamTime").publishUnique(r.currentTime)})),i.on("durationchange",l),i.on("ended",function(){a&&(t("talkComplete.unnormalized").publish(),t("complete").publish(e.currentTalk))}),i.on("error",function(t){var n=r&&r.error&&r.error.code;MediaError&&MediaError.MEDIA_ERR_DECODE===n&&"hls"===e.mode&&e.recover()&&e.topic("recovering").read()||MediaError&&MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED===n&&"hls"===e.mode&&e.dai&&e.dai.streamId&&e.options.dai&&e.recover()&&e.topic("recovering").read()}),i.on("volumechange",function(){a&&(t("volume").publishUnique(Math.round(1e3*+r.volume)/1e3),t("muted").publishUnique(r.muted))}),i.on("webkitpresentationmodechanged",function(e,r){t("popOut").publishUnique("picture-in-picture"===e.target.webkitPresentationMode)}),i.on("loadstart",function(){a&&t("bufferUnplayable.unnormalized").publishUnique(!0)}),i.on("waiting",function(){a&&t("bufferUnplayable.unnormalized").publishUnique(!0)}),i.on("suspend",function(){a&&t("bufferUnplayable.unnormalized").publishUnique(!1)}),i.on("canplay",u),i.on("canplaythrough",u),i.on("loadeddata",u),i.on("loadedmetadata",u),i.on("loadstart",u),t("video.seekable").subscribe(function(e){e&&l()}),i.on("loadeddata",c),t("talk.language").subscribe(c),i.on("play",function(){t("play.unnormalized").publish(e.currentTalk&&e.currentTalk.id)}),t("play.unnormalized").subscribe(o),t("bufferPlayable").subscribe(o),t("talk.id").subscribe(function(){t("talk").publishUnique(e.currentTalk)}),t("ready").subscribe(function(){e.currentTalk&&t("talk.id").publishUnique(e.currentTalk.id)}),t("complete").subscribe(function(){var t=Number(e.topic("streamDuration").read());Number(e.topic("streamTime").read())<t-2&&e.throwError({message:"Premature publication of completion"})}),Me(e),r.textTracks&&r.textTracks.addEventListener&&r.textTracks.addEventListener("change",Te(100,function(n,i,a){for(var s,o,l=r.textTracks.length,u=!1,c=!1;l--;)o=!1,((s=r.textTracks[l])&&"hidden"===s.mode||"showing"===s.mode)&&(o=Oe(e.currentTalk,(s.language||"").toLowerCase())),o&&(u=o,c=s);c&&t("subtitle.track").publish(c),t("subtitle").publishUnique(u)},!0))}function Fe(e){var t=e.el,r=e.topic;n(t).on("canplay",function(){r("talk.language").publish(e.currentTalk)})}function je(e){var t=e.topic;t("talk.subtitles").subscribe(function(r){n(e.el).append(A.buildTracks(r)),t("talk.language").publish(e.currentTalk)}),t("streamTime").subscribe(function(r){var n="",i="",a="",s="",o="";if(e.hlsjs&&e.options.metrics){try{n=Math.floor(e.hlsjs.abrController&&e.hlsjs.abrController.bwEstimator?e.hlsjs.abrController.bwEstimator.getEstimate():e.hlsjs.config.abrEwmaDefaultEstimate);var l=je.splitBuffered(e.el.buffered,r,Math.max(0,e.hlsjs.config.maxBufferHole,e.hlsjs.config.maxFragLookUpTolerance));a=l[0],i=l[1];var u=je.splitBuffered(e.el.buffered,r,0);o=u[0],s=u[1]}catch(e){}t("metricsData").publish({bandwidth:n,bufferLength:i,backBufferLength:a,intolerantBufferLength:s,intolerantBackBufferLength:o,currentLevel:e.hlsjs.currentLevel,nextLevel:e.hlsjs.nextLevel,loadLevel:e.hlsjs.loadLevel,nextLoadLevel:e.hlsjs.nextLoadLevel})}})}je.splitBuffered=function(e,t,r){if(!e||!e.length)return[0,0];var n,i,a,s,o,l=e.length;for(o=-1;++o<l&&(n=e.start(o),i=e.end(o),!(Math.max(t,s||0)+r<n));)(!a||s+r<n)&&(a=n,s=i),t-r<i&&(s=i);return[Math.max(t-a,0),Math.max(s-t,0)]};var Be=a||window.mux,Ue=+new Date;function qe(e){var t=(e=e||{}).options||{},r="hlsjs"===e.mode;Be.monitor(e.el,{debug:t.muxDebug||!1,hlsjs:r?e.hlsjs:void 0,Hls:r?i:void 0,data:function(e){var t=((e=e||{}).currentTalk||e.talks&&e.talks[0]||{}).mediaIdentifier,r=e.options||{},n=e.options.subproperty,i="PaRappa: "+({flash:"Flash",h264:"MP4",hls:"HLS (built-in)",hlsjs:"hls.js"}[e.mode]||"no")+" tech"+(n?" ("+n+")":""),a={env_key:r.muxEnvKey,page_type:"embed"===n?"iframe":"watchpage",player_name:i,player_version:"3.5.7",player_init_time:Ue,video_id:e.postrolling?void 0:t,video_title:e.postrolling?"Ad":t};n&&(a.sub_property_id=n),e.dai&&e.dai.streamId&&e.options.dai&&(a.video_variant_name="DAI Stream",a.video_variant_id=e.dai.streamId);var s=String(window.navigator&&window.navigator.userAgent||"").match(/\bKaiOS\/([\d\.]+)/i);return s&&(a.viewer_application_name="KaiOS Browser",a.viewer_os_family="KaiOS",a.viewer_os_version=s[2]),a}(e)})}function He(e){window.console&&window.console.warn&&window.console.warn("PaRappa: "+e)}function Ge(e){if((e.options||{}).mux)if(Be&&Be.monitor&&"function"==typeof Be.monitor)if((e.options||{}).muxEnvKey){var t,r=e.topic;r("ready.sourceSet").subscribe(function(){t!==e.el.src&&(!function(e){qe(e)}(e),t=e.el.src)}),r("prerollStart").subscribe(n),r("prerollComplete").subscribe(i),r("postrollStart").subscribe(n),r("postrollComplete").subscribe(i),r("prerollComplete").subscribe(function(){Be.emit(e.el,"playing")}),function(e){if("hlsjs"===e.mode){var t,r,n,i=e.topic;a(),i("error").subscribe(function(e){e&&e.details&&e.details.code&&("fatal"===e.severity||"abortive"===e.severity)&&(t=e.details.code,r=e.message,s())}),i("bufferUnplayable").subscribe(function(){n=!0,s()}),i("bufferPlayable").subscribe(function(){n=!1,s()})}function a(){t=null,r=null,n=!1}function s(){t&&r&&n&&(Be.emit(e.el,"error",{player_error_code:t,player_error_message:r}),a())}}(e)}else He("Mux environment key is missing.");else He("Mux library is missing.");function n(t){Be.emit(e.el,"adplaying",{ad_asset_url:"https://admanager.google.com/5641#delivery/CreativeDetail/creativeId="+t.creativeId})}function i(){Be.emit(e.el,"adended")}}function Ve(e){var t=e.mode,r=e.topic;switch(t){case"flash":Re(e);break;case"h264":Ne(e),Ge(e);break;case"hls":Pe(e),Ne(e),Fe(e),Ge(e);break;case"hlsjs":Pe(e),Ne(e),Fe(e),je(e),Ge(e);break;default:return void e.throwError({type:"init",message:"No handlers found for unrecognized player mode: "+t,severity:"fatal"})}"flash"!==t&&r("ready.handlers").publish(),r("duration").subscribe(function(t){e.currentTalk&&(e.currentTalk.duration=t)}),r("complete").subscribe(function(){Ie(e)?r("ended").publish(e.currentTalk):e.playNext()}),r("popOut").subscribe(function(t){e.config.set("popOut",t)}),r("play").once(function(){e.config.get("popOut")&&e.popOut(!0)}),r("play").once(function(){var t=r("streamPrerollDuration").read(),n=r("streamPostrollDuration").read();!t&&n>0&&e.throwError({message:"Stream has postroll without preroll",severity:"warning"})}),function(t){var r,n=0,i=0,a=null,s=0,o=0,l=.2,c=.06,d=!1,f=!1,p=!1,h=!1,g=!1;function m(){(g=e.el.getAttribute("controls"))&&e.el.removeAttribute("controls"),u.forPlayer(e).show()}function v(){u.forPlayer(e).hide(),g&&e.nativeControls(!0)}function y(){var e,u=r-s-o;!r||r<l||(t("duration").publishUnique(u),i=n-s,t("currentTime").publishUnique(Math.max(0,i)),null!==a&&t("contentTime").publishUnique(Math.round(1e3*(i-a))),t("progress").publishUnique(i/u),s>0&&n>c&&n<=s&&(t("prerollDuration").publishUnique(s),t("prerollRemaining").publishUnique(Math.max(0,s-n)),p||(e=t("currentAd").read())&&(p=!0,m(),t("prerollStart").publish(e))),p&&s>0&&(n<=c||n>s)&&(p=!1,v(),t("prerollComplete").publish(t("currentAd").read()||null),t("currentAd").publish(null)),!d&&i>c&&i<u&&(d=!0,t("tedStart").publish()),a>0&&i>c&&i<=a&&(t("introDuration").publishUnique(a),f||(f=!0,t("introStart").publish())),f&&a>0&&(i<=c||i>a)&&(f=!1,t("introComplete").publish()),d&&i>=u&&(d=!1,t("talkComplete.unnormalized").publish(),t("tedComplete").publish()),o>0&&i>=u&&(t("postrollDuration").publishUnique(o),t("postrollRemaining").publishUnique(Math.max(0,r-n)),h||(e=t("currentAd").read())&&(h=!0,m(),t("postrollStart").publish(e))),h&&o>0&&(n>=r||i<u)&&(h=!1,v(),t("postrollComplete").publish(t("currentAd").read()),t("currentAd").publish(null)))}function _(){t("video.seekable").read()&&t("duration").read()>=l&&t("ready.seekable").publishUnique(!0)}t("streamTime").subscribe(function(e){n=e,y()}),t("video.seekable").subscribe(_),t("streamDuration").subscribe(function(e){!e||e<l||(r=e,y(),_())}),t("streamIntroDuration").subscribe(function(e){a=e,y()}),t("streamPrerollDuration").subscribe(function(e){s=e>0?+e:0,y()}),t("streamPostrollDuration").subscribe(function(e){o=e>0?+e:0,y()}),t("talk").subscribe(function(e){n=0,d=!1,f=!1,p=!1,h=!1,t("progress").publishUnique(0),null!==a&&t("contentTime").publishUnique(0)}),t("progress").publishUnique(0),null!==a&&t("contentTime").publishUnique(0)}(r),function(e){var t=!1,r=!1;function n(){e("streamAds").publishUnique({preroll:t,postroll:r})}e("streamPrerollDuration").subscribe(function(e){t=e>0,n()}),e("streamPostrollDuration").subscribe(function(e){r=e>0,n()})}(r),r("talk.language").subscribe(function(t){if(e.subtitle){var r=Oe(t,e.config.get("languageCode"));r||"string"!=typeof e.options.defaultSubtitles||(r=Oe(t,e.options.defaultSubtitles)),r||!t.isSubtitleRequired&&t.nativeLanguage===e.options.nativeLanguage&&!0!==e.options.defaultSubtitles||(r=Oe(t,e.options.nativeLanguage)),r?e.subtitle(r.languageCode,!1):e.subtitle(!1,!1)}}),r("ready.sourceSet").subscribe(function(){r("ready.sourceSetting").publishUnique(!1)}),function(e){var t,r=e.options.customSubtitles,n=!0,i=e.topic;function a(){t&&i("subtitleCue").publishUnique("")}function s(){r&&n&&i("subtitleCue").publishUnique(t&&String(t).replace("\n","<br />")||!1)}i("seeking").subscribe(a),i("talk").subscribe(a),i("talkComplete").subscribe(a),i("subtitleCue.unavailable").subscribe(function(e){e?(n=!1,a()):(n=!0,s())}),i("subtitleCue.unnormalized").subscribe(function(e){t=e,s()}),i("subtitle").subscribe(function(e){e||a()})}(e)}function We(e,t){return t+(-1===t.indexOf("?"+e)&&-1===t.indexOf("&"+e)?(-1===t.indexOf("?")?"?":"&")+e:"")}function Ke(e){var t=String(e).match(/\/\/([^/]+)/);return e&&"string"==typeof e&&t&&t[1]?t[1]:""}var $e={};n.each({pause:"pauseVideo",seek:"seek",sendAds:"sendAds",capQualityToStage:"capQualityToStage"},function(e,t){$e[e]=function(){var e=this.el[t];e&&e.apply(this.el,[].slice.call(arguments))}}),$e.play=function(){this._isRequestedPlay=!0,this.lastPlayedTalkId==(this.currentTalk&&this.currentTalk.id)?this.el.resumeVideo():(this._isFirstPlaying=!0,this.el.playVideo())},$e.playTalk=function(e){var t=De(this,e);t&&this.currentTalk!=t?(this._isFirstPlaying=!0,this.currentTalk=t,this._setSource(t.id,t.resources.hls.stream,0,0,0)):this.play()},$e.mute=function(e){this.el.volume(e?0:this.config.get("volume"))},$e.subtitle=function(e,t){var r=Oe(this.currentTalk,e);r?this.el.setLanguage(r.languageCode,r.isRtl):this.el.setLanguage(null,null),!1!==t&&this.config.set("languageCode",!!r&&r.languageCode),this.topic("subtitle").publishUnique(r)},$e.volume=function(e){this.el.volume(e)},$e._playbackRate=function(){},$e._setSource=function(e,t){if(this._unsetSource(),this.topic("ready.sourceSetting").publishUnique(!0),this.el.load)this.el.load(e,function(e){return e=We("network=tv",e=We("qr",e=We("preroll=Blank",e)))}(t),0,0,0),this.topic("streamHost").publish(Ke(t));else{var r=this;window.setTimeout(function(){$e._setSource.call(r,e,t)},200)}},$e._setSourceFromCurrentTalk=function(){var e=this.currentTalk;this._setSource(e.id,e.resources.hls.stream,0,0,0)},$e._unsetSource=function(){this.topic("ready.sourceSet").publishUnique(!1)},$e._setSource.early=!0,$e._setSourceFromCurrentTalk.early=!0,$e._unsetSource.early=!0;var ze="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABZVtZGF0AAACvwYF//+73EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDEyOSByMjIyOE0gYjMwNGE3YyAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTIgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0xIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMTMgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTEgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz0xMiBsb29rYWhlYWRfdGhyZWFkcz0yIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MiBrZXlpbnQ9MjUwIGtleWludF9taW49MjMgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT04NTAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAB5ZYiEADv//vau/MsrdH6VLh1Ze7NR8uhJcv2IMH1oAAADAAADAAADAAEPmDjyj2JJkegAAAMAAnQAZQBBgDMAPYBTQIOAzgHeA3gIEBoAQwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwBWQQAAABVBmiRsQ7/+jLAAAAMAAAMAAAMAAdUAAAATQZ5CeIX/AAADAAADAAADAACXgQAAABMBnmF0Qr8AAAMAAAMAAAMAAO6AAAAAEwGeY2pCvwAAAwAAAwAAAwAA7oEAAAAbQZpoSahBaJlMCHf//oywAAADAAADAAADAAHVAAAAFUGehkURLC//AAADAAADAAADAACXgQAAABMBnqV0Qr8AAAMAAAMAAAMAAO6BAAAAEwGep2pCvwAAAwAAAwAAAwAA7oAAAAAbQZqsSahBbJlMCHf//oywAAADAAADAAADAAHVAAAAFUGeykUVLC//AAADAAADAAADAACXgQAAABMBnul0Qr8AAAMAAAMAAAMAAO6AAAAAEwGe62pCvwAAAwAAAwAAAwAA7oAAAAAcQZrwSahBbJlMCCP//qmWAAADAAADAAADAAA8IQAAABVBnw5FFSw3/wAAAwAAAwAAAwAAYsEAAAATAZ8tdEL/AAADAAADAAADAACXgQAAABMBny9qQ38AAAMAAAMAAAMAAGLAAAAAHUGbNEmoQWyZTAgx//7WpVAAAAMAAAMAAAMAAPuAAAAAFUGfUkUVLBP/AAADAAADAAADAAAJuQAAABMBn3F0QQ8AAAMAAAMAAAMAACtgAAAAEwGfc2pBTwAAAwAAAwAAAwAABSQAAAAdQZt3SahBbJlMCDX//tqmWAAAAwAAAwAAAwAA+4EAAAAVQZ+WQg1/AAADAAADAAADAAADAC2gAAAAFgGftWkQY/8AAAMAAAMAAAMAAAMArYEAAAQybW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAA+oAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAA1x0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+oAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAA1YAAAHgAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPqAAAD6AABAAAAAALUbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAAu1AAALuBVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACf21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAj9zdGJsAAAAl3N0c2QAAAAAAAAAAQAAAIdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAA1YB4ABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAMWF2Y0MBZAAe/+EAGWdkAB6s2UDYPebwEQAAAwB9AAAXag8WLZYBAAVo6+yyLAAAABhzdHRzAAAAAAAAAAEAAAAYAAAB9AAAABRzdHNzAAAAAAAAAAEAAAABAAAA0GN0dHMAAAAAAAAAGAAAAAEAAAPoAAAAAQAACcQAAAABAAAD6AAAAAEAAAAAAAAAAQAAAfQAAAABAAAJxAAAAAEAAAPoAAAAAQAAAAAAAAABAAAB9AAAAAEAAAnEAAAAAQAAA+gAAAABAAAAAAAAAAEAAAH0AAAAAQAACcQAAAABAAAD6AAAAAEAAAAAAAAAAQAAAfQAAAABAAAJxAAAAAEAAAPoAAAAAQAAAAAAAAABAAAB9AAAAAEAAAfQAAAAAQAAA+gAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAGAAAAAEAAAB0c3RzegAAAAAAAAAAAAAAGAAAA0AAAAAZAAAAFwAAABcAAAAXAAAAHwAAABkAAAAXAAAAFwAAAB8AAAAZAAAAFwAAABcAAAAgAAAAGQAAABcAAAAXAAAAIQAAABkAAAAXAAAAFwAAACEAAAAZAAAAGgAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1NS40My4xMDA=",Ye={play:function(){this.topic("talk").publishUnique(this.currentTalk),this.el.play()},pause:function(){this.el.pause()},playTalk:function(e){var t=De(this,e);!t||this.currentTalk&&this.currentTalk.id==t.id?this.play():(this.currentTalk=t,this.topic("talk.id").publishUnique(t.id),this._setSource(t.resources.h264[0].file),this.setTitle(t.name),this.el.play())},mute:function(e){this.el.muted=e},seek:function(e){this.el.currentTime=e},volume:function(e){this.el.volume=e},_playbackRate:function(e){this.el.playbackRate=e},_setSource:function(e){this._unsetSource(),this.topic("ready.sourceSetting").publishUnique(!0);var t=this.currentTalk;this.topic("streamIntroDuration").publish(Number(t.introDuration)||null),this.el.src=e,this.topic("ready.sourceSet").publishUnique(!0),this.topic("streamHost").publish(Ke(e))},_setSourceFromCurrentTalk:function(){var e=this.currentTalk;this._setSource(e.resources.h264[0].file),this.setTitle(e.name)},_unsetSource:function(e){this.topic("ready.sourceSet").publishUnique(!1),this.el.src=ze}};Ye._setSource.early=!0,Ye._setSourceFromCurrentTalk.early=!0,Ye._unsetSource.early=!0;var Xe={play:function(){this.topic("talk.id").publishUnique(this.currentTalk.id),this.el.play()},pause:function(){this.el.pause()},playTalk:function(e){var t=De(this,e),r=this.topic;this.el;if(!t||this.currentTalk&&this.currentTalk.id==t.id)this.play();else{var n=this;this.currentTalk=t,S(this).done(function(){n.play()}).always(function(){r("talk.id").publishUnique(t.id)})}},mute:function(e){this.el.muted=e},seek:function(e){var t=this,r=t.el,n=t.playToken;r.addEventListener("loadeddata",function i(){t.playToken!==n||r.currentTime>=e?r.removeEventListener("loadeddata",i):r.seekable&&1===r.seekable.length&&r.seekable.end(0)>=e&&(r.removeEventListener("loadeddata",i),r.currentTime=e)}),r.currentTime=e},subtitle:function(e,t){var r=this.el,n=r.textTracks.length,i=Oe(this.currentTalk,e);if(n<=0)this.topic("subtitle.pending").publishUnique(e);else{e=(i&&i.languageCode||"").toLowerCase();for(var a,s=!1;n--;)(a=r.textTracks[n])&&(a.language||"").toLowerCase()===e?(this.topic("subtitle.track").publish(a),s=!0):a.mode="disabled";s||(i=!1),!1!==t&&this.config.set("languageCode",!!i&&e),this.topic("subtitle.pending").publishUnique(null),this.topic("subtitle").publishUnique(i)}},volume:function(e){this.el.volume=e},_playbackRate:function(e){this.el.playbackRate=e},_setSource:function(e){this._unsetSource(),this.topic("ready.sourceSetting").publishUnique(!0),this.el.src=e,this.topic("ready.sourceSet").publishUnique(!0),this.topic("streamHost").publish(Ke(e))},_setSourceFromCurrentTalk:function(){this._unsetSource(),this.topic("ready.sourceSetting").publishUnique(!0),S(this,this.el)},_unsetSource:function(e){this.topic("ready.sourceSet").read()&&(this.topic("ready.sourceSet").publishUnique(!1),this.el.src=ze)}};Xe._setSource.early=!0,Xe._setSourceFromCurrentTalk.early=!0,Xe._unsetSource.early=!0;var Qe={NONE:"NONE",FALLBACK:"FALLBACK",MEDIA:"MEDIA"};function Je(e,t){var r={attempts:0,epochOfLastAttempt:null,streamTimeOfLastAttempt:null};function n(t){switch(t){case Qe.FALLBACK:return void function(){e.options.dai=!1;var t=Number(e.topic("currentTime").read());e._setSourceFromCurrentTalk(),t>3&&(e.seek(t-1),e.play())}();case Qe.MEDIA:return void function(){var t=e.topic("streamTime").read();r.streamTimeOfLastAttempt!==t&&(r={attempts:0,epochOfLastAttempt:null,streamTimeOfLastAttempt:null}),r.attempts++,r.epochOfLastAttempt=+new Date,r.streamTimeOfLastAttempt=t,r.attempts>1&&e.hlsjs.swapAudioCodec(),e.hlsjs.recoverMediaError(),e.el&&e.el.play()}();default:return}}function a(t){var n=e.topic("streamTime").read();return t.fatal?e.options.dai?{type:Qe.FALLBACK,reason:"DAI is enabled; fall back to stream without DAI."}:t.type===i.ErrorTypes.NETWORK_ERROR?{type:Qe.NONE,reason:"Network recovery already attempted by hls.js."}:t.type===i.ErrorTypes.MEDIA_ERROR?r.streamTimeOfLastAttempt!==n?{type:Qe.MEDIA,attempts:0,reason:"First media failure at this position."}:r.attempts>20?{type:Qe.NONE,attempts:r.attempts,reason:"Too many media recovery attempts were made."}:r.epochOfLastAttempt&&function(e,t){return Math.abs(+new Date-e)<t}(r.epochOfLastAttempt,1e3)?{type:Qe.NONE,attempts:r.attempts,reason:"Too soon after last media recovery attempt."}:{type:Qe.MEDIA,attempts:r.attempts,reason:"Trying media again."}:{type:Qe.NONE,reason:"No recovery path for this error."}:{type:Qe.NONE,reason:"Error is not fatal."}}function s(e){var r=a(e),n={code:function(e){switch(e){case i.ErrorTypes.NETWORK_ERROR:return 2;case i.ErrorTypes.MEDIA_ERROR:return 3;default:return 100}}(e.type),streamUrl:t,request:{},response:{},recovery:r},s={message:"hls.js error: "+e.type+": "+e.details,severity:"info",details:n};switch(e.fatal&&(s.severity=r.type===Qe.NONE?"fatal":"warning"),e.details){case i.ErrorDetails.MANIFEST_LOAD_ERROR:case i.ErrorDetails.LEVEL_LOAD_ERROR:n.request.url=e.url,n.response.status=e.response&&e.response.code||"",n.response.statusText=e.response&&e.response.text||"";break;case i.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case i.ErrorDetails.LEVEL_LOAD_TIMEOUT:n.request.url=e.url;break;case i.ErrorDetails.MANIFEST_PARSING_ERROR:n.request.url=e.url,n.reason=e.reason;break;case i.ErrorDetails.LEVEL_SWITCH_ERROR:n.level=e.level,n.reason=e.reason;break;case i.ErrorDetails.FRAG_LOAD_ERROR:case i.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case i.ErrorDetails.FRAG_LOAD_TIMEOUT:n.request.url=e.frag&&e.frag.url||"",n.response.status=e.response&&e.response.code||"",n.response.statusText=e.response&&e.response.text||"";break;case i.ErrorDetails.FRAG_PARSING_ERROR:n.reason=e.reason;break;case i.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR:n.request.url=e.url;break;case i.ErrorDetails.BUFFER_ADD_CODEC_ERROR:n.errMessage=e.err&&e.err.message||"",n.mimeType=e.mimeType;break;case i.ErrorDetails.BUFFER_APPEND_ERROR:n.request.url=e.frag&&e.frag.url||"";break;case i.ErrorDetails.BUFFER_SEEK_OVER_HOLE:n.hole=e.hole}return s}return function(t,r){var i=s(r);e.throwError(i),n(i.details.recovery.type)}}function Ze(e){var t=this;n.extend(t,{hls:e,restrictedLevels:[],_onFpsDropLevelCapping:function(e,r){t.onFpsDropLevelCapping(r)},_onManifestParsed:function(e,r){t.onManifestParsed(r)},_onMediaAttaching:function(e,r){t.onMediaAttaching(r)}}),e.on(i.Events.FPS_DROP_LEVEL_CAPPING,t._onFpsDropLevelCapping),e.on(i.Events.MANIFEST_PARSED,t._onManifestParsed),e.on(i.Events.MEDIA_ATTACHING,t._onMediaAttaching)}n.extend(Ze.prototype,{destroy:function(){var e=this.hls;e&&(e.off(i.Events.FPS_DROP_LEVEL_CAPPING,this._onFpsDropLevelCapping),e.off(i.Events.MANIFEST_PARSED,this._onManifestParsed),e.off(i.Events.MEDIA_ATTACHING,this._onMediaAttaching)),this.media=null,this.restrictedLevels=[],this.autoLevelCapping=-1,this.timer&&(this.timer=clearInterval(this.timer))},detectPlayerSize:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.config.capQualityToStage&&(t.autoLevelCapping=this.getMaxLevel(e-1)),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},onFpsDropLevelCapping:function(e){this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)},onManifestParsed:function(e){if(!ge()){var t=this.hls;this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),this.timer&&clearInterval(this.timer),this.timer=setInterval(n.proxy(this.detectPlayerSize,this),2e3),this.detectPlayerSize()}},onMediaAttaching:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},getMediaHeight:function(){var e=0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight),e},getMaxLevel:function(e){var t,r,n,i,a,s=0,o=0;for(t=Math.max(480,this.getMediaHeight()),o=0;o<=e&&(n=(r=this.levels[o]).height,i=this.levels[o+1],!(n>t))&&!this.isLevelRestricted(o)&&!(a&&a.height===n&&t-n<100&&(!i||i.height>t));o++)s=o,a=r;return s},isLevelRestricted:function(e){return-1!==this.restrictedLevels.indexOf(e)}});var et=0,tt=1;function rt(e){e.on(i.Events.MANIFEST_PARSED,function(){e.firstLevel=et,e.autoLevelCapping=tt})}var nt=(window.navigator&&window.navigator.userAgent||"").match(/\bKaiOS\b/gi)?{autoLevelEnabled:!1,startLevel:et,capQualityToStage:!1,capLevelController:rt,maxMaxBufferLength:300,maxBufferSize:5e6}:{},it={};function at(e){return e&&"object"==typeof e}function st(e){if(!e||!e.length)return[];for(var t,r=e.filter(at),i=r.length;i--;){var a=String(r[i].resources&&r[i].resources.hls&&r[i].resources.hls.stream);-1===a.indexOf("preroll=")||a.indexOf("preroll=Blank");t=n.extend({index:i},r[i]),r[i]=t}return r}function ot(e,t){if(!t||!t.id)return e.throwError({type:"init",message:"Talk has no ID.",severity:"fatal"}),!1;if(!t.mediaIdentifier)return e.throwError({type:"init",message:"Talk "+t.id+" has no media identifier.",severity:"fatal"}),!1;if(!t.resources)return e.throwError({type:"init",message:"Talk "+t.id+" has no associated media.",severity:"fatal"}),!1;var r=!1,n=!1;switch(e.mode){case"hls":case"hlsjs":case"flash":r=!0;break;case"h264":n=!0}return!!(t.resources.hls&&t.resources.hls.stream||(e.throwError({type:"init",message:"Talk "+t.id+" has no hls stream resource.",severity:r?"fatal":"warning"}),!r))&&(!!(t.resources.hls&&t.resources.hls.metadata||(e.throwError({type:"init",message:"Talk "+t.id+" has no hls metadata resource.",severity:r?"fatal":"warning"}),!r))&&!(!(t.resources.h264&&t.resources.h264[0]&&t.resources.h264[0].file)&&(e.throwError({type:"init",message:"Talk "+t.id+" has no h264 file resource.",severity:n?"fatal":"warning"}),n)))}function lt(e,t){if(!t||!t.length)return e.throwError({type:"init",message:"No talks sent to player.",severity:"fatal"}),!1;for(var r=!0,n=t.length;n--;)r=ot(e,t[n])&&r;return!!r}n.extend(it,Xe),it._setSource=function(e){var t=this;e.match(/\/\/hls\.ted\.com\//i)&&(e+=(-1===e.indexOf("?")?"?":"&")+"qr"),t._unsetSource(),t.topic("ready.sourceSetting").publishUnique(!0);var r={autoStartLoad:!1,capQualityToStage:t.options.capQualityToStage,capLevelController:Ze,subtitleStreamController:!1,subtitleTrackController:!1,timelineController:!1,enableCEA708Captions:!1,enableWebVTT:!1},a=t.config.get("hlsjsStartLevel");a>0&&(r.startLevel=a);var s=n.extend({},r);t.dai&&t.dai.streamId&&t.options.dai&&n.extend(s,{fragLoadingMaxRetry:0,fragLoadingMaxRetryTimeout:3e3,fragLoadingTimeOut:3e3,levelLoadingMaxRetry:0,levelLoadingMaxRetryTimeout:3e3,levelLoadingTimeOut:3e3,manifestLoadingMaxRetry:0,manifestLoadingTimeOut:3e3}),n.extend(s,nt,t.options.hlsjsConfig||{}),t.hlsjs=new i(s),t.dai&&t.dai.streamId&&t.options.dai&&t.hlsjs.once(i.Events.FRAG_LOADED,function(){t.hlsjs.config.fragLoadingMaxRetry=2,t.hlsjs.config.fragLoadingMaxRetryTimeout=15e3,t.hlsjs.config.fragLoadingTimeOut=12e3,t.hlsjs.config.levelLoadingMaxRetry=2,t.hlsjs.config.levelLoadingMaxRetryTimeout=6e3}),function(e){var t,r;function n(){t=!1,r=0}n(),e.hlsjs.on(i.Events.MANIFEST_PARSED,n);var a=e.hlsjs.abrController._findBestLevel;e.hlsjs.abrController._findBestLevel=function(e,n,i,s,o,l,u,c,d){return n<1&&0===r&&(t=!0),t&&r<3?(r++,e):a(e,n,i,s,o,l,u,c,d)}}(t);var o=t.options.hlsjsEvents||{};for(var l in o)o.hasOwnProperty(l)&&t.hlsjs.on(i.Events[l],function(e,r){o[l].call(t.hlsjs,r)});t.hlsjs.on(i.Events.MANIFEST_PARSED,function(){t.topic("ready.sourceSet").publishUnique(!0);var e=Math.max(0,Number(t.topic("ready.seeking").read())-5);t.hlsjs.startLoad(e||-1)}),t.hlsjs.on(i.Events.LEVEL_LOADED,function(e,r){t.config.set("hlsjsStartLevel",r.level)}),t.hlsjs.on(i.Events.LEVEL_SWITCHING,function(e,r){r&&r.bitrate>0&&t.topic("metricsData.bitrate").publishUnique(r.bitrate)}),t.hlsjs.on(i.Events.ERROR,Je(t,e)),n(t.el).attr("crossorigin","anonymous"),t.hlsjs.loadSource(e),t.hlsjs.attachMedia(t.el),t.topic("streamHost").publish(Ke(e))},it._unsetSource=function(){this.topic("ready.sourceSet").read()&&(this.hlsjs&&(this.hlsjs.destroy(),delete this.hlsjs),this.el&&n(this.el).removeAttr("crossorigin").attr("src",ze).find("track").remove(),this.topic("ready.sourceSet").publishUnique(!1))},it.capQualityToStage=function(e){this.hlsjs&&(this.hlsjs.config.capQualityToStage=e)},it._setSource.early=!0,it._unsetSource.early=!0,it.capQualityToStage.early=!0;var ut={standard:{cancel:"cancelFullScreen",change:"fullscreenchange",enabled:"fullscreenEnabled",error:"fullscreenerror",element:"fullscreenElement",request:"requestFullScreen"},moz:{cancel:"mozCancelFullScreen",change:"mozfullscreenchange",enabled:"mozFullScreenEnabled",error:"mozfullscreenerror",element:"mozFullScreenElement",request:"mozRequestFullScreen"},ms:{cancel:"msExitFullscreen",change:"MSFullscreenChange",enabled:"msFullscreenEnabled",error:"MSFullscreenError",element:"msFullscreenElement",request:"msRequestFullscreen"},webkit:{cancel:"webkitCancelFullScreen",change:"webkitfullscreenchange",enabled:"webkitFullscreenEnabled",error:"webkitfullscreenerror",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen"}};function ct(e){return e.topic("ready.dom").subscribe(function(){!function(e){var t=document,r=e.fullScreenMode,i=ut[r];e.topic("fullScreen").subscribe(function(t){e.isFullScreen=t,e.topic(t?"enterFullScreen":"exitFullScreen").publish()}),"webkitVideo"===r?n(e.el).on("webkitpresentationmodechanged",function(){e.topic("fullScreen").publishUnique("fullscreen"===e.el.webkitPresentationMode)}):i&&n(t).on(i.change,function(){t[i.element]===e.fullScreenElement?e.topic("fullScreen").publishUnique(!0):!t[i.element]&&e.isFullScreen&&e.topic("fullScreen").publishUnique(!1)})}(e)}),{requestFullScreen:function(t){e.fullScreenElement||(e.fullScreenElement=t||e.el),function(e){var t=e.fullScreenMode;"webkitVideo"===t?function(e){var t=e.el;function r(){t.webkitEnterFullscreen()}t.readyState>=1?r():(t.addEventListener("loadedmetadata",r,!1),e.play())}(e):ut[t]?e.fullScreenElement[ut[t].request]():e.throwError({type:"client",message:"Full screen mode not supported",severity:"warning"})}(e)},cancelFullScreen:function(){!function(e){var t=e.fullScreenMode,r=window.document;"webkitVideo"===t?e.el.webkitExitFullscreen():ut[t]&&r[ut[t].cancel]()}(e)}}}function dt(e){if(!e)return"";if(e.id)return String(e.id);for(var t=e.length,r=[];t--;)e[t]&&e[t].id&&r.push(String(e[t].id));return r.reverse().join(",")}var ft={flash:$e,h264:Ye,hls:Xe,hlsjs:it};function pt(e){var t=e.mode,r=ft[t],i=[],a=!1;function s(t,r){var n=e.topic("ready").read(),a=e.topic("ready.sourceSet").read();t.wiper&&i.splice(0,i.length),t.sourcer&&n&&!a&&!e.topic("ready.sourceSetting").read()?t.apply(e,r):t.early||n&&a?t.apply(e,r):i.push({callback:t,args:r}),n&&!a&&t.resourcer&&!e.topic("ready.sourceSetting").read()&&e._setSourceFromCurrentTalk()}function o(t){return function(){return s(t,[].slice.call(arguments)),e}}if(r){e.topic("ready.sourceSet").subscribe(p),e.topic("ready.dequeued").subscribe(p),e.topic("ready").subscribe(p),e.topic("play").subscribe(function(){e.lastPlayedTalkId=e.currentTalk&&e.currentTalk.id}),r.play=function(){var t=r.play,n=!1;return e.topic("ended").subscribe(function(){n=!0}),e.topic("play").subscribe(function(){n=!1}),function(){n&&r.seek(0),t.call(e)}}(),r.playNext=function(){var t=De(e,e.currentTalk.id,1);t&&e.playTalk(t.id)},r.playPrev=function(){var t=De(e,e.currentTalk.id,-1);t&&e.playTalk(t.id)},r.playbackRate=function(t){e.topic("playbackRate").publish(t)},r.popOut=function(t){e.canPopOut&&e.el.webkitSetPresentationMode&&e.el.webkitSetPresentationMode(t?"picture-in-picture":"inline")};var l=null;r.recover=function(){var t=e.topic("currentTime").read(),r=e.topic("contentTime").read();l&&Math.abs(t-l)<.1||(e.throwError({message:"Attempting playback recovery",severity:"warning"}),e.options.dai=!1,e.topic("ready.sourceSet").subscribe(function t(n){n&&e.topic("recovering").read()&&(e.topic("ready.sourceSet").unsubscribe(t),e.topic("recovering").publishUnique(!1),e.contentTime(r),e.play())}),e.topic("recovering").publishUnique(!0),l=t,e._setSourceFromCurrentTalk())},r.volume=function(){var t=r.volume;return function(r){(r=Math.round(1e3*+r)/1e3)<0&&(r=0),r>1&&(r=1),t.call(e,r),e.topic("volume").publishUnique(r)}}(),r.mute=function(){var t=r.mute;return function(r){r=!!r,t.call(e,r),e.topic("muted").publishUnique(r)}}(),r.seek=function(){var t=r.seek,n=0,i=0;return e.topic("streamPrerollDuration").subscribe(function(e){i=e||0}),e.topic("streamDuration").subscribe(function(e){n=e||0}),function(r){r=Math.max(0,Math.min(Number(r)+i,n-.5)),t.call(e,r)}}(),r.seek=function(){var t=r.seek,n=!1,i=!1;function a(t){n=t,e.topic("ready.seeking").publishUnique(t)}return e.topic("ready.seekable").subscribe(function(r){r&&(!1!==n&&(t.call(e,n),a(!1)),i=!0)}),function(r){i?t.call(e,r):a(r)}}(),r.contentTime=function(t){var r=e.topic("streamIntroDuration").read();null!==r&&e.seek(t/1e3+r)},r.toggle=function(){e.paused?e.play():e.pause()},r.capQualityToStage=function(){var t=r.capQualityToStage||n.noop;return function(r){e.options.capQualityToStage=!!r,t.call(e,!!r)}}();var c,d=ct(e);for(var f in r.requestFullScreen=d.requestFullScreen,r.cancelFullScreen=d.cancelFullScreen,r.nativeControls=function(t){e.canNativeControls&&(t?e.el.setAttribute("controls","controls"):e.el.removeAttribute("controls"),e.topic("nativeControls").publishUnique(!!t))},r.nativeFullScreen=function(t){e.canNativeFullScreen&&(t?(c=e.el.getAttribute("controls"),r.requestFullScreen(e.el),r.nativeControls(!0)):(c||r.nativeControls(!1),r.cancelFullScreen()))},r.setTalks=function(t){if(t&&t.length){e.oldTalks||(e.oldTalks=dt(e.options.talks));var r=dt(t);if(r!==e.oldTalks){e.topic("ready").publishUnique(!1),e.topic("ready.seekable").publishUnique(!1),e._unsetSource(),u.forPlayer(e).hide();var n=st(t);if(lt(e,n)){e.options.talks=n,e.oldTalks=r,e.topic("ad").publishUnique(null),e.topic("contentTime").publishUnique(null),e.topic("currentAd").publishUnique(null),e.topic("currentTime").publishUnique(null),e.topic("streamIntroDuration").publishUnique(null),e.topic("introDuration").publishUnique(null),e.topic("streamDuration").publishUnique(null),e.topic("streamTime").publishUnique(null),e.topic("duration").publishUnique(null),e.topic("metricsData").publishUnique(null),e.topic("streamPrerollDuration").publishUnique(null),e.topic("prerollDuration").publishUnique(null),e.topic("prerollRemaining").publishUnique(null),e.topic("streamPostrollDuration").publishUnique(null),e.topic("postrollDuration").publishUnique(null),e.topic("postrollRemaining").publishUnique(null),e.topic("progress").publishUnique(null),e.topic("recovering").publishUnique(!1),e.topic("subtitleCue").publishUnique(null),e.topic("streamAds").publishUnique({preroll:!1,postroll:!1});var i=t[0];e.currentTalk=i,e._setSourceFromCurrentTalk()}}else window.console.warn("PaRappa ignoring duplicative setTalks request.")}},r.setTitle=function(t){e.el&&e.el.setAttribute&&e.el.setAttribute("title",t||"TED: Ideas worth spreading")},r.cancelFullScreen.early=!0,r.play.resourcer=!0,r.seek.resourcer=!0,r.contentTime.resourcer=!0,r.setTalks.sourcer=!0,r.playNext.sourcer=!0,r.playPrev.sourcer=!0,r.playTalk.sourcer=!0,r.playNext.wiper=!0,r.playPrev.wiper=!0,r.playTalk.wiper=!0,r.setTalks.wiper=!0,r)r.hasOwnProperty(f)&&(e[f]=o(r[f]))}else e.throwError({type:"init",message:"No actions found for unrecognized player mode: "+t,severity:"fatal"});function p(){var t=e.topic("ready").read(),r=e.topic("ready.sourceSet").read();t&&r&&i.length&&function(){var t;if(a)return!1;t=i.splice(0,i.length),a=!0;for(var r=-1,n=t.length;++r<n;)s(t[r].callback,t[r].args);a=!1,e.topic("ready.dequeued").publish(!0)}()}}var ht=1;function gt(e){gt.init(e)}var mt=Math.pow(2,53)-1;gt.makeToken=function(){return["001",Math.floor(Math.random()*mt).toString(36),(new Date).getTime().toString(36)].join("-")},gt.init=function(e){var t=e.topic;t("ready.sourceSetting").subscribe(function(r){if(r){var n=gt.makeToken();e.playToken=n,t("playToken").publishUnique(n)}})};var vt,yt=window,_t=yt&&yt.console,bt=_t&&_t.log;function At(e){var t=!0;function r(t){return e&&e.topic(t).read()||""}e.one("play",function(){t=!1}),e.throwError=function(i){var a,s,o={type:String(i&&i.type||"unknown"),message:String(i&&i.message||"Something happened"),severity:String(i&&i.severity||"warning"),details:i&&i.details||{}};switch(t&&"fatal"===o.severity&&(o.severity="abortive"),o.details=n.extend({},function(){var t=e.mode,n={subproperty:e.options.subproperty||"<MISSING>",playerMode:t,playToken:e.playToken||"",streamUrl:e.el&&e.el.src||"",tedTime:r("tedTime"),streamTime:r("streamTime"),streamDuration:r("streamDuration")};n.dai={streamId:String(e.options.dai&&e.dai&&e.dai.streamId||""),streamCuepoints:r("streamCuepoints"),streamPrerollDuration:r("streamPrerollDuration"),streamPostrollDuration:r("streamPostrollDuration")};var i=r("currentAd");return i&&(n.dai.ad=i),"hlsjs"===t&&e.hlsjs&&(n.streamUrl=e.hlsjs.url,n.hlsjs={loadLevel:e.hlsjs.loadLevel}),n}(),o.details),o.severity){case"abortive":case"fatal":a=1,s="#F2D2CF";break;case"warning":a=2,s="#FCF1CC";break;default:a=3,s="#999999"}e.options&&i&&!1!==i.report&&e.options.logLevel>=a&&(f({message:o.message,details:n.extend({errorType:o.type,errorSeverity:o.severity},o.details)}),e.options.logConsole>0&&bt&&(1===e.options.logConsole?_t.log("%cPaRappa: "+o.message,"color: "+s):_t.log(o))),e.topic("error").publish(o)}}function Et(e){this._options=e,this._inited=!1}function St(e){this.fallback={},this.adapter=e,this.isStorable=function(e){if(!(e&&e.getItem&&e.setItem&&window.JSON&&JSON.parse&&JSON.stringify))return!1;try{var t=Math.floor(99999*Math.random()).toString(36),r="parappa-test-"+t;if(e.setItem(r,t),e.getItem(r,t)!==t)return!1;e.removeItem(r)}catch(e){return!1}return!0}(e)}n.extend(Et.prototype,{_init:function(){if(!this._inited){var e=this._options.storageAdapter.getObject(this._options.storageProperty);this.internal=n.extend({},this._options.defaults,e),this._inited=!0}},get:function(e){return this._init(),this.internal[e]},set:function(e,t){this._init(),this.internal[e]=t,this._options.storageAdapter.setObject(this._options.storageProperty,this.internal)}}),n.extend(St.prototype,{getItem:function(e){return this.isStorable?this.adapter.getItem(e):this.fallback[e]},getObject:function(e){var t=this.getItem(e);try{if(t=JSON.parse(t),"object"===n.type(t))return t}catch(e){}return{}},setItem:function(e,t){this.isStorable?this.adapter.setItem(e,t):this.fallback[e]=t},setObject:function(e,t){"object"===n.type(t)&&this.setItem(e,JSON.stringify(t))}});var wt=function(){var e=document.createElement("video");return e&&e.defaultPlaybackRate?e.defaultPlaybackRate:1}();try{vt=window.localStorage}catch(e){}vt=new St(vt);var Tt={attrs:{},customSubtitles:!1,dai:!String(window.navigator&&window.navigator.userAgent||"").match(/Trident\/\d/),daiMetadataPreroll:"newshortintro_053119",contentSourceId:"2503702",defaultSubtitles:!1,defaultPlaybackRate:wt,defaultVolume:.5,el:null,flashVersion:"11.1.0",maiAdUnitId:"/5641/ted3/web",metrics:!1,modes:void 0,mux:!0,muxDebug:!1,muxEnvKey:"44ser87uhle6mo61s1qtpin7j",nativeLanguage:"en",storageAdapter:vt,storageProperty:"playerconfig",subproperty:null,hlsjsConfig:{},hlsjsEvents:{},imasdkDebug:!1,logLevel:2,logConsole:1,capQualityToStage:!0,swf:"https://pb.tedcdn.com/assets/player/flash_hls/player_4_01_002.swf"},kt=function(e){var t={},r=function(e){var t=e.match(/[?&]parappa\.mode=(\w+)/);return t&&-1!==Se.indexOf(t[1])&&t[1]}(e=e||window&&window.location&&window.location.href);return r&&(t.mode=r),t.dfptest=function(e){var t=e.match(/[?&]dfptest=([^&]+)/);return t&&t[1]&&decodeURIComponent(t[1])}(e)||void 0,e.match(/[?&]parappa\.imasdkDebug=(true|1)\b/i)&&(t.imasdkDebug=!0),t}();function xt(e){var t=this;this.topic=o({bufferPlayable:void 0,bufferUnplayable:void 0,complete:void 0,ended:void 0,idle:void 0,introStart:void 0,introComplete:void 0,play:void 0,pause:void 0,prerollStart:void 0,prerollComplete:void 0,postrollStart:void 0,postrollComplete:void 0,seeked:void 0,seeking:void 0,talkComplete:void 0,tedStart:void 0,tedComplete:void 0}),At(t);var r=!1;this.topic("error").subscribe(function(e){"abortive"===e.severity&&(r=!0)}),function(e){var t=new n.Deferred;e.on("error",function(r){!r||"fatal"!==r.severity&&"abortive"!==r.severity||t.rejectWith(e,[r])}),e.on("ready",function(){"pending"===t.state()&&t.resolveWith(e,[e])}),n.extend(e,t.promise())}(t),e=n.extend({},Tt,e,kt),this.options=e,e.subproperty||(e.subproperty=null,t.throwError({type:"init",message:"Missing subproperty config value",severity:"warning"})),function(e,t){for(var r=!0,n=we.length;n--;)e[we[n]]||(t({type:"init",message:"Required option property is missing: "+we[n],severity:"fatal"}),r=!1)}(e,t.throwError),e.mode=Ee(e),e.mode?(e.talks=st(e.talks),this.options=e,this.config=new Et(n.extend({defaults:{languageCode:!1,muted:!1,volume:e.defaultVolume,playbackRate:e.defaultPlaybackRate,hlsjsStartLevel:e.hlsjsConfig.startLevel,popOut:!1}},e)),function(e){var t=e.options.mode,r="hls"===t||"hlsjs"===t||"h264"===t;e.fullScreenMode=_e.fullScreenMode(),e.canFullScreen=!1!==e.fullScreenMode,e.canNativeControls=r,e.canNativeFullScreen=e.canNativeControls&&e.canFullScreen,e.canPlaybackRate=!!r&&_e.canPlaybackRate(),e.canPopOut="flash"!==t&&_e.canPopOut(),e.canSubtitle="flash"===t||"hls"===t||"hlsjs"===t&&_e.canHtml5Subtitle(),e.canVolume="flash"===t||_e.canVolume(),e.mode=t,e.talks=e.options.talks,e.paused=!0,e.on("play",function(){e.paused=!1}).on("pause",function(){e.paused=!0})}(this),pt(t),function(e){var t=!1;e.on("ready",function(){e.volume(e.config.get("volume")),e.mute(e.config.get("muted"))}).on("muted",function(r){t=r,e.config.set("muted",r)}).on("volume",function(r){e.config.set("volume",r),r>0&&t&&e.mute(!1)})}(t),function(e){var t=!1;function r(){return e.config.get("playbackRate")}function n(){t?e._playbackRate(ht):e._playbackRate(r())}function i(){t=!1,n()}function a(){t=!0,n()}e.on("ready",function(){e.playbackRate(r())}),e.on("play",n),e.on("prerollStart",a),e.on("postrollStart",a),e.on("prerollComplete",i),e.on("postrollComplete",i),e.on("playbackRate",function(t){e.config.set("playbackRate",t),n()})}(t),gt(t),lt(t,e.talks),r||(this.topic("ready.dom").once(function(){var e=!1,n=!1;function i(){!r&&e&&n&&t.topic("ready").publishUnique(!0)}window.setTimeout(function(){Ve(t),t.topic("ready.sourceSet").subscribe(function(t){e=t,i()}),t.topic("ready.handlers").once(function(){n=!0,i()})},10)}),function(e){if(pe[e.mode])return pe[e.mode](e);e.throwError({type:"init",message:"Cannot replace element for unrecognized player mode: "+e.mode,severity:"fatal"})}(this))):t.throwError({type:"client",message:"Client does not support any player mode.",severity:"fatal"})}n.extend(xt.prototype,{off:function(e,t){return this.topic(e).unsubscribe(t),this},on:function(e,t){return this.topic(e).subscribe(t),this},one:function(e,t){return this.topic(e).once(t),this},isLastTalk:function(){return Ie(this)}}),xt.getSupportedMode=function(){return Ee(Tt)},e.exports=xt},Jg3A:function(e,t,r){(function(){!function(e,n){(function(e,t,r,n){var i=e.Backbone,a=[],s=a.push,o=a.slice,l=a.splice;t.VERSION="1.0.0",t.$=n,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(e,t,r){if(!d(this,"on",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:r,ctx:r||this}),this},once:function(e,t,n){if(!d(this,"once",e,[t,n])||!t)return this;var i=this,a=r.once(function(){i.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,n)},off:function(e,t,n){var i,a,s,o,l,u,c,f;if(!this._events||!d(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(o=e?[e]:r.keys(this._events),l=0,u=o.length;l<u;l++)if(e=o[l],s=this._events[e]){if(this._events[e]=i=[],t||n)for(c=0,f=s.length;c<f;c++)a=s[c],(t&&t!==a.callback&&t!==a.callback._callback||n&&n!==a.context)&&i.push(a);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!d(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&f(r,t),n&&f(n,arguments),this},stopListening:function(e,t,r){var n=this._listeners;if(!n)return this;var i=!t&&!r;for(var a in"object"==typeof t&&(r=this),e&&((n={})[e._listenerId]=e),n)n[a].off(t,r,this),i&&delete this._listeners[a];return this}},c=/\s+/,d=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(c.test(r)){for(var a=r.split(c),s=0,o=a.length;s<o;s++)e[t].apply(e,[a[s]].concat(n));return!1}return!0},f=function(e,t){var r,n=-1,i=e.length,a=t[0],s=t[1],o=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a,s);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a,s,o);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t)}};r.each({listenTo:"on",listenToOnce:"once"},function(e,t){u[t]=function(t,n,i){var a=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=r.uniqueId("l"));return a[s]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),u.bind=u.on,u.unbind=u.off,r.extend(t,u);var p=t.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=r.uniqueId("c"),this.attributes={},r.extend(this,r.pick(t,h)),t.parse&&(i=this.parse(i,t)||{}),(n=r.result(this,"defaults"))&&(i=r.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},h=["url","urlRoot","collection"];r.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return r.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return r.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,a,s,o,l,u,c,d;if(null==e)return this;if("object"==typeof e?(a=e,n=t):(a={})[e]=t,n||(n={}),!this._validate(a,n))return!1;for(i in s=n.unset,l=n.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=r.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]),a)t=a[i],r.isEqual(d[i],t)||o.push(i),r.isEqual(c[i],t)?delete this.changed[i]:this.changed[i]=t,s?delete d[i]:d[i]=t;if(!l){o.length&&(this._pending=!0);for(var f=0,p=o.length;f<p;f++)this.trigger("change:"+o[f],this,d[o[f]],n)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!r.isEmpty(this.changed):r.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&r.clone(this.changed);var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var a in e)r.isEqual(i[a],t=e[a])||((n||(n={}))[a]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?r.clone(e):{}).parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},O(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,a,s,o=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,i&&(!n||!n.wait)&&!this.set(i,n))return!1;if(n=r.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=r.extend({},o,i)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(e){l.attributes=o;var t=l.parse(e,n);if(n.wait&&(t=r.extend(i||{},t)),r.isObject(t)&&!l.set(t,n))return!1;u&&u(l,e,n),l.trigger("sync",l,e,n)},O(this,n),"patch"===(a=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),s=this.sync(a,this,n),i&&n.wait&&(this.attributes=o),s},destroy:function(e){var t=this,n=(e=e?r.clone(e):{}).success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;O(this,e);var a=this.sync("delete",this,e);return e.wait||i(),a},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||R();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},r.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,r.extend(t||{},{validationError:n})),!1)}});r.each(["keys","values","pairs","invert","pick","omit"],function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),r[e].apply(r,t)}});var g=t.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,r.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},v={add:!0,merge:!1,remove:!1};r.extend(g.prototype,u,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,r.defaults(t||{},v))},remove:function(e,t){var n,i,a,s;for(e=r.isArray(e)?e.slice():[e],t||(t={}),n=0,i=e.length;n<i;n++)(s=this.get(e[n]))&&(delete this._byId[s.id],delete this._byId[s.cid],a=this.indexOf(s),this.models.splice(a,1),this.length--,t.silent||(t.index=a,s.trigger("remove",s,this,t)),this._removeReference(s));return this},set:function(e,t){var n,i,a,o,u;(t=r.defaults(t||{},m)).parse&&(e=this.parse(e,t)),r.isArray(e)||(e=e?[e]:[]);var c=t.at,d=this.comparator&&null==c&&!1!==t.sort,f=r.isString(this.comparator)?this.comparator:null,p=[],h=[],g={};for(n=0,i=e.length;n<i;n++)(a=this._prepareModel(e[n],t))&&((o=this.get(a))?(t.remove&&(g[o.cid]=!0),t.merge&&(o.set(a.attributes,t),d&&!u&&o.hasChanged(f)&&(u=!0))):t.add&&(p.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)));if(t.remove){for(n=0,i=this.length;n<i;++n)g[(a=this.models[n]).cid]||h.push(a);h.length&&this.remove(h,t)}if(p.length&&(d&&(u=!0),this.length+=p.length,null!=c?l.apply(this.models,[c,0].concat(p)):s.apply(this.models,p)),u&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=p.length;n<i;n++)(a=p[n]).trigger("add",a,this,t);return u&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,r.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,r.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,r.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return r.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var r in e)if(e[r]!==t.get(r))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),r.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(r.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=r.isFunction(t)?t:function(e){return e.get(t)};return r.sortedIndex(this.models,e,i,n)},pluck:function(e){return r.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?r.clone(e):{}).parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},O(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?r.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(r){t.wait&&n.add(e,t),i&&i(e,r,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var r=new this.model(e,t);return r._validate(e,t)?r:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){("add"!==e&&"remove"!==e||r===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});r.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(e){g.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),r[e].apply(r,t)}});r.each(["groupBy","countBy","sortBy"],function(e){g.prototype[e]=function(t,n){var i=r.isFunction(t)?t:function(e){return e.get(t)};return r[e](this.models,i,n)}});var y=t.View=function(e){this.cid=r.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];r.extend(y.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,r){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==r&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=r.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(r.isFunction(n)||(n=this[e[t]]),n){var i=t.match(_),a=i[1],s=i[2];n=r.bind(n,this),a+=".delegateEvents"+this.cid,""===s?this.$el.on(a,n):this.$el.on(a,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=r.extend({},r.result(this,"options"),e)),r.extend(this,r.pick(e,b)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"),!1);else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e.class=r.result(this,"className"));var n=t.$("<"+r.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var a=A[e];r.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:a,dataType:"json"};if(i.url||(s.url=r.result(n,"url")||R()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){s.type="POST",i.emulateJSON&&(s.data._method=a);var o=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),o)return o.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"!==s.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(r.extend(s,i));return n.trigger("request",n,l,i),l};var A={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,T=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(E.prototype,u,{initialize:function(){},route:function(e,n,i){r.isRegExp(e)||(e=this._routeToRegExp(e)),r.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var a=this;return t.history.route(e,function(r){var s=a._extractParameters(e,r);i&&i.apply(a,s),a.trigger.apply(a,["route:"+n].concat(s)),a.trigger("route",n,s),t.history.trigger("route",a,n,s)}),this},navigate:function(e,r){return t.history.navigate(e,r),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var e,t=r.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(S,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return r.map(n,function(e){return e?decodeURIComponent(e):null})}});var x=t.History=function(){this.handlers=[],r.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,C=/msie [\w.]+/,L=/\/$/;x.started=!1,r.extend(x.prototype,u,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var r=this.root.replace(L,"");e.indexOf(r)||(e=e.substr(r.length))}else e=this.getHash();return e.replace(P,"")},start:function(e){if(x.started)throw new Error("Backbone.history has already been started");x.started=!0,this.options=r.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,a=C.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/"),a&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var s=this.location,o=s.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&s.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),x.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=r.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!x.started)return!1;if(t&&!0!==t||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var r=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,r){if(r){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new x;p.extend=g.extend=E.extend=y.extend=x.extend=function(e,t){var n,i=this;n=e&&r.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)};r.extend(n,i,t);var a=function(){this.constructor=n};a.prototype=i.prototype,n.prototype=new a,e&&r.extend(n.prototype,e);return n.__super__=i.prototype,n};var R=function(){throw new Error('A "url" property or function must be specified')},O=function(e,t){var r=t.error;t.error=function(n){r&&r(e,n,t),e.trigger("error",e,n,t)}}})(e,t,r("5cge"))}(this)}).call(window)},Jikt:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0;var a=i(r("dJlP")),s=n(r("l3gt")),o=n(r("AIJh")),l=i(r("82EY")),u=i(r("co8E")),c=n(r("6+Qq"));function d(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=s.default,e.Exception=o.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var f=d();f.create=d,c.default(f),f.default=f,t.default=f,e.exports=t.default},K2jg:function(e,t){(function(t){e.exports=t}).call(this,{})},K37z:function(e,t,r){"use strict";var n;void 0===(n=function(){function e(e){return(e>9?"":"0")+e}return function(t){var r=t%60|0,n=t/3600|0,i=t%3600/60|0;return(n?n+":"+e(i):i)+":"+e(r)}}.call(t,r,t,e))||(e.exports=n)},KLVm:function(e,t,r){var n;!function(t,r){"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,function(r,i){var a=[],s=a.slice,o=a.concat,l=a.push,u=a.indexOf,c={},d=c.toString,f=c.hasOwnProperty,p={},h=function(e,t){return new h.fn.init(e,t)},g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,v=/-([\da-z])/gi,y=function(e,t){return t.toUpperCase()};function _(e){var t="length"in e&&e.length,r=h.type(e);return"function"!==r&&!h.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e))}h.fn=h.prototype={jquery:"1.11.3",constructor:h,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return h.each(this,e,t)},map:function(e){return this.pushStack(h.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:a.sort,splice:a.splice},h.extend=h.fn.extend=function(){var e,t,r,n,i,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||h.isFunction(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(i=arguments[o]))for(n in i)e=s[n],s!==(r=i[n])&&(u&&r&&(h.isPlainObject(r)||(t=h.isArray(r)))?(t?(t=!1,a=e&&h.isArray(e)?e:[]):a=e&&h.isPlainObject(e)?e:{},s[n]=h.extend(u,a,r)):void 0!==r&&(s[n]=r));return s},h.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray||function(e){return"array"===h.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!h.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(p.ownLast)for(t in e)return f.call(e,t);for(t in e);return void 0===t||f.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[d.call(e)]||"object":typeof e},globalEval:function(e){e&&h.trim(e)&&(r.execScript||function(e){r.eval.call(r,e)})(e)},camelCase:function(e){return e.replace(m,"ms-").replace(v,y)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var n=0,i=e.length,a=_(e);if(r){if(a)for(;n<i&&!1!==t.apply(e[n],r);n++);else for(n in e)if(!1===t.apply(e[n],r))break}else if(a)for(;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(g,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(_(Object(e))?h.merge(r,"string"==typeof e?[e]:e):l.call(r,e)),r},inArray:function(e,t,r){var n;if(t){if(u)return u.call(t,e,r);for(n=t.length,r=r?r<0?Math.max(0,n+r):r:0;r<n;r++)if(r in t&&t[r]===e)return r}return-1},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;)e[i++]=t[n++];if(r!=r)for(;void 0!==t[n];)e[i++]=t[n++];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,a=e.length,s=!r;i<a;i++)!t(e[i],i)!==s&&n.push(e[i]);return n},map:function(e,t,r){var n,i=0,a=e.length,s=[];if(_(e))for(;i<a;i++)null!=(n=t(e[i],i,r))&&s.push(n);else for(i in e)null!=(n=t(e[i],i,r))&&s.push(n);return o.apply([],s)},guid:1,proxy:function(e,t){var r,n,i;if("string"==typeof t&&(i=e[t],t=e,e=i),h.isFunction(e))return r=s.call(arguments,2),(n=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||h.guid++,n},now:function(){return+new Date},support:p}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var b=function(e){var t,r,n,i,a,s,o,l,u,c,d,f,p,h,g,m,v,y,_,b="sizzle"+1*new Date,A=e.document,E=0,S=0,w=se(),T=se(),k=se(),x=function(e,t){return e===t&&(d=!0),0},P=1<<31,D={}.hasOwnProperty,C=[],L=C.pop,R=C.push,O=C.push,I=C.slice,M=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B=j.replace("w","w#"),U="\\["+F+"*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",q=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),V=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),K=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(q),z=new RegExp("^"+B+"$"),Y={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,re=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ne=function(e,t,r){var n="0x"+t-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ie=function(){f()};try{O.apply(C=I.call(A.childNodes),A.childNodes),C[A.childNodes.length].nodeType}catch(e){O={apply:C.length?function(e,t){R.apply(e,I.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function ae(e,t,n,i){var a,o,u,c,d,h,v,y,E,S;if((t?t.ownerDocument||t:A)!==p&&f(t),t=t||p,n=n||[],c=t.nodeType,"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return n;if(!i&&g){if(11!==c&&(a=Z.exec(e)))if(u=a[1]){if(9===c){if(!(o=t.getElementById(u))||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&_(t,o)&&o.id===u)return n.push(o),n}else{if(a[2])return O.apply(n,t.getElementsByTagName(e)),n;if((u=a[3])&&r.getElementsByClassName)return O.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!m||!m.test(e))){if(y=v=b,E=t,S=1!==c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(h=s(e),(v=t.getAttribute("id"))?y=v.replace(te,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",d=h.length;d--;)h[d]=y+me(h[d]);E=ee.test(e)&&he(t.parentNode)||t,S=h.join(",")}if(S)try{return O.apply(n,E.querySelectorAll(S)),n}catch(e){}finally{v||t.removeAttribute("id")}}}return l(e.replace(G,"$1"),t,n,i)}function se(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function oe(e){return e[b]=!0,e}function le(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var r=e.split("|"),i=e.length;i--;)n.attrHandle[r[i]]=t}function ce(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||P)-(~e.sourceIndex||P);if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function pe(e){return oe(function(t){return t=+t,oe(function(r,n){for(var i,a=e([],r.length,t),s=a.length;s--;)r[i=a[s]]&&(r[i]=!(n[i]=r[i]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ae.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:A;return s!==p&&9===s.nodeType&&s.documentElement?(p=s,h=s.documentElement,(i=s.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",ie,!1):i.attachEvent&&i.attachEvent("onunload",ie)),g=!a(s),r.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=le(function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=J.test(s.getElementsByClassName),r.getById=le(function(e){return h.appendChild(e).id=b,!s.getElementsByName||!s.getElementsByName(b).length}),r.getById?(n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},n.filter.ID=function(e){var t=e.replace(re,ne);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace(re,ne);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;r=a[i++];)1===r.nodeType&&n.push(r);return n}return a},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(g)return t.getElementsByClassName(e)},v=[],m=[],(r.qsa=J.test(s.querySelectorAll))&&(le(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+b+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),le(function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(r.matchesSelector=J.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(h.compareDocumentPosition),_=t||J.test(h.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},x=t?function(e,t){if(e===t)return d=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===A&&_(A,e)?-1:t===s||t.ownerDocument===A&&_(A,t)?1:c?M(c,e)-M(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return d=!0,0;var r,n=0,i=e.parentNode,a=t.parentNode,o=[e],l=[t];if(!i||!a)return e===s?-1:t===s?1:i?-1:a?1:c?M(c,e)-M(c,t):0;if(i===a)return ce(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;o[n]===l[n];)n++;return n?ce(o[n],l[n]):o[n]===A?-1:l[n]===A?1:0},s):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&f(e),t=t.replace(K,"='$1']"),r.matchesSelector&&g&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&f(e),_(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&f(e);var i=n.attrHandle[t.toLowerCase()],a=i&&D.call(n.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==a?a:r.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,a=0;if(d=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(x),d){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return c=null,e},i=ae.getText=function(e){var t,r="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},(n=ae.selectors={cacheLength:50,createPseudo:oe,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(re,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&$.test(r)&&(t=s(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&w(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(n){var i=ae.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(H," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,l){var u,c,d,f,p,h,g=a!==s?"nextSibling":"previousSibling",m=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o;if(m){if(a){for(;g;){for(d=t;d=d[g];)if(o?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(p=(u=(c=m[b]||(m[b]={}))[e]||[])[0]===E&&u[1],f=u[0]===E&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[E,p,f];break}}else if(y&&(u=(t[b]||(t[b]={}))[e])&&u[0]===E)f=u[1];else for(;(d=++p&&d&&d[g]||(f=p=0)||h.pop())&&((o?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[b]||(d[b]={}))[e]=[E,f]),d!==t)););return(f-=i)===n||f%n==0&&f/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,r){for(var n,a=i(e,t),s=a.length;s--;)e[n=M(e,a[s])]=!(r[n]=a[s])}):function(e){return i(e,0,r)}):i}},pseudos:{not:oe(function(e){var t=[],r=[],n=o(e.replace(G,"$1"));return n[b]?oe(function(e,t,r,i){for(var a,s=n(e,null,i,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))}):function(e,i,a){return t[0]=e,n(t,null,a,r),t[0]=null,!r.pop()}}),has:oe(function(e){return function(t){return ae(e,t).length>0}}),contains:oe(function(e){return e=e.replace(re,ne),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:oe(function(e){return z.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(re,ne).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,r){return[r<0?r+t:r]}),even:pe(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:pe(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:pe(function(e,t,r){for(var n=r<0?r+t:r;--n>=0;)e.push(n);return e}),gt:pe(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ge(){}function me(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function ve(e,t,r){var n=t.dir,i=r&&"parentNode"===n,a=S++;return t.first?function(t,r,a){for(;t=t[n];)if(1===t.nodeType||i)return e(t,r,a)}:function(t,r,s){var o,l,u=[E,a];if(s){for(;t=t[n];)if((1===t.nodeType||i)&&e(t,r,s))return!0}else for(;t=t[n];)if(1===t.nodeType||i){if((o=(l=t[b]||(t[b]={}))[n])&&o[0]===E&&o[1]===a)return u[2]=o[2];if(l[n]=u,u[2]=e(t,r,s))return!0}}}function ye(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function _e(e,t,r,n,i){for(var a,s=[],o=0,l=e.length,u=null!=t;o<l;o++)(a=e[o])&&(r&&!r(a,n,i)||(s.push(a),u&&t.push(o)));return s}function be(e,t,r,n,i,a){return n&&!n[b]&&(n=be(n)),i&&!i[b]&&(i=be(i,a)),oe(function(a,s,o,l){var u,c,d,f=[],p=[],h=s.length,g=a||function(e,t,r){for(var n=0,i=t.length;n<i;n++)ae(e,t[n],r);return r}(t||"*",o.nodeType?[o]:o,[]),m=!e||!a&&t?g:_e(g,f,e,o,l),v=r?i||(a?e:h||n)?[]:s:m;if(r&&r(m,v,o,l),n)for(u=_e(v,p),n(u,[],o,l),c=u.length;c--;)(d=u[c])&&(v[p[c]]=!(m[p[c]]=d));if(a){if(i||e){if(i){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(m[c]=d);i(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=i?M(a,d):f[c])>-1&&(a[u]=!(s[u]=d))}}else v=_e(v===s?v.splice(h,v.length):v),i?i(null,s,v,l):O.apply(s,v)})}function Ae(e){for(var t,r,i,a=e.length,s=n.relative[e[0].type],o=s||n.relative[" "],l=s?1:0,c=ve(function(e){return e===t},o,!0),d=ve(function(e){return M(t,e)>-1},o,!0),f=[function(e,r,n){var i=!s&&(n||r!==u)||((t=r).nodeType?c(e,r,n):d(e,r,n));return t=null,i}];l<a;l++)if(r=n.relative[e[l].type])f=[ve(ye(f),r)];else{if((r=n.filter[e[l].type].apply(null,e[l].matches))[b]){for(i=++l;i<a&&!n.relative[e[i].type];i++);return be(l>1&&ye(f),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(G,"$1"),r,l<i&&Ae(e.slice(l,i)),i<a&&Ae(e=e.slice(i)),i<a&&me(e))}f.push(r)}return ye(f)}return ge.prototype=n.filters=n.pseudos,n.setFilters=new ge,s=ae.tokenize=function(e,t){var r,i,a,s,o,l,u,c=T[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=n.preFilter;o;){for(s in r&&!(i=V.exec(o))||(i&&(o=o.slice(i[0].length)||o),l.push(a=[])),r=!1,(i=W.exec(o))&&(r=i.shift(),a.push({value:r,type:i[0].replace(G," ")}),o=o.slice(r.length)),n.filter)!(i=Y[s].exec(o))||u[s]&&!(i=u[s](i))||(r=i.shift(),a.push({value:r,type:s,matches:i}),o=o.slice(r.length));if(!r)break}return t?o.length:o?ae.error(e):T(e,l).slice(0)},o=ae.compile=function(e,t){var r,i=[],a=[],o=k[e+" "];if(!o){for(t||(t=s(e)),r=t.length;r--;)(o=Ae(t[r]))[b]?i.push(o):a.push(o);(o=k(e,function(e,t){var r=t.length>0,i=e.length>0,a=function(a,s,o,l,c){var d,f,h,g=0,m="0",v=a&&[],y=[],_=u,b=a||i&&n.find.TAG("*",c),A=E+=null==_?1:Math.random()||.1,S=b.length;for(c&&(u=s!==p&&s);m!==S&&null!=(d=b[m]);m++){if(i&&d){for(f=0;h=e[f++];)if(h(d,s,o)){l.push(d);break}c&&(E=A)}r&&((d=!h&&d)&&g--,a&&v.push(d))}if(g+=m,r&&m!==g){for(f=0;h=t[f++];)h(v,y,s,o);if(a){if(g>0)for(;m--;)v[m]||y[m]||(y[m]=L.call(l));y=_e(y)}O.apply(l,y),c&&!a&&y.length>0&&g+t.length>1&&ae.uniqueSort(l)}return c&&(E=A,u=_),v};return r?oe(a):a}(a,i))).selector=e}return o},l=ae.select=function(e,t,i,a){var l,u,c,d,f,p="function"==typeof e&&e,h=!a&&s(e=p.selector||e);if(i=i||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&r.getById&&9===t.nodeType&&g&&n.relative[u[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(re,ne),t)||[])[0]))return i;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(l=Y.needsContext.test(e)?0:u.length;l--&&(c=u[l],!n.relative[d=c.type]);)if((f=n.find[d])&&(a=f(c.matches[0].replace(re,ne),ee.test(u[0].type)&&he(t.parentNode)||t))){if(u.splice(l,1),!(e=a.length&&me(u)))return O.apply(i,a),i;break}}return(p||o(e,h))(a,t,!g,i,ee.test(e)&&he(t.parentNode)||t),i},r.sortStable=b.split("").sort(x).join("")===b,r.detectDuplicates=!!d,f(),r.sortDetached=le(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),r.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(N,function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),ae}(r);h.find=b,h.expr=b.selectors,h.expr[":"]=h.expr.pseudos,h.unique=b.uniqueSort,h.text=b.getText,h.isXMLDoc=b.isXML,h.contains=b.contains;var A=h.expr.match.needsContext,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;function w(e,t,r){if(h.isFunction(t))return h.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return h.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(S.test(t))return h.filter(t,e,r);t=h.filter(t,e)}return h.grep(e,function(e){return h.inArray(e,t)>=0!==r})}h.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?h.find.matchesSelector(n,e)?[n]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,r=[],n=this,i=n.length;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;t<i;t++)if(h.contains(n[t],this))return!0}));for(t=0;t<i;t++)h.find(e,n[t],r);return(r=this.pushStack(i>1?h.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(w(this,e||[],!1))},not:function(e){return this.pushStack(w(this,e||[],!0))},is:function(e){return!!w(this,"string"==typeof e&&A.test(e)?h(e):e||[],!1).length}});var T,k=r.document,x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(h.fn.init=function(e,t){var r,n;if(!e)return this;if("string"==typeof e){if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e))||!r[1]&&t)return!t||t.jquery?(t||T).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:k,!0)),E.test(r[1])&&h.isPlainObject(t))for(r in t)h.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if((n=k.getElementById(r[2]))&&n.parentNode){if(n.id!==r[2])return T.find(e);this.length=1,this[0]=n}return this.context=k,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?void 0!==T.ready?T.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))}).prototype=h.fn,T=h(k);var P=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function C(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}h.extend({dir:function(e,t,r){for(var n=[],i=e[t];i&&9!==i.nodeType&&(void 0===r||1!==i.nodeType||!h(i).is(r));)1===i.nodeType&&n.push(i),i=i[t];return n},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),h.fn.extend({has:function(e){var t,r=h(e,this),n=r.length;return this.filter(function(){for(t=0;t<n;t++)if(h.contains(this,r[t]))return!0})},closest:function(e,t){for(var r,n=0,i=this.length,a=[],s=A.test(e)||"string"!=typeof e?h(e,t||this.context):0;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&h.find.matchesSelector(r,e))){a.push(r);break}return this.pushStack(a.length>1?h.unique(a):a)},index:function(e){return e?"string"==typeof e?h.inArray(this[0],h(e)):h.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.unique(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h.dir(e,"parentNode")},parentsUntil:function(e,t,r){return h.dir(e,"parentNode",r)},next:function(e){return C(e,"nextSibling")},prev:function(e){return C(e,"previousSibling")},nextAll:function(e){return h.dir(e,"nextSibling")},prevAll:function(e){return h.dir(e,"previousSibling")},nextUntil:function(e,t,r){return h.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return h.dir(e,"previousSibling",r)},siblings:function(e){return h.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return h.sibling(e.firstChild)},contents:function(e){return h.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(r,n){var i=h.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=h.filter(n,i)),this.length>1&&(D[e]||(i=h.unique(i)),P.test(e)&&(i=i.reverse())),this.pushStack(i)}});var L,R=/\S+/g,O={};function I(){k.addEventListener?(k.removeEventListener("DOMContentLoaded",M,!1),r.removeEventListener("load",M,!1)):(k.detachEvent("onreadystatechange",M),r.detachEvent("onload",M))}function M(){(k.addEventListener||"load"===event.type||"complete"===k.readyState)&&(I(),h.ready())}h.Callbacks=function(e){var t,r,n,i,a,s,o=[],l=!(e="string"==typeof e?O[e]||function(e){var t=O[e]={};return h.each(e.match(R)||[],function(e,r){t[r]=!0}),t}(e):h.extend({},e)).once&&[],u=function(d){for(r=e.memory&&d,n=!0,a=s||0,s=0,i=o.length,t=!0;o&&a<i;a++)if(!1===o[a].apply(d[0],d[1])&&e.stopOnFalse){r=!1;break}t=!1,o&&(l?l.length&&u(l.shift()):r?o=[]:c.disable())},c={add:function(){if(o){var n=o.length;!function t(r){h.each(r,function(r,n){var i=h.type(n);"function"===i?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==i&&t(n)})}(arguments),t?i=o.length:r&&(s=n,u(r))}return this},remove:function(){return o&&h.each(arguments,function(e,r){for(var n;(n=h.inArray(r,o,n))>-1;)o.splice(n,1),t&&(n<=i&&i--,n<=a&&a--)}),this},has:function(e){return e?h.inArray(e,o)>-1:!(!o||!o.length)},empty:function(){return o=[],i=0,this},disable:function(){return o=l=r=void 0,this},disabled:function(){return!o},lock:function(){return l=void 0,r||c.disable(),this},locked:function(){return!l},fireWith:function(e,r){return!o||n&&!l||(r=[e,(r=r||[]).slice?r.slice():r],t?l.push(r):u(r)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(r){h.each(t,function(t,a){var s=h.isFunction(e[t])&&e[t];i[a[1]](function(){var e=s&&s.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[a[0]+"With"](this===n?r.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,n):n}},i={};return n.pipe=n.then,h.each(t,function(e,a){var s=a[2],o=a[3];n[a[1]]=s.add,o&&s.add(function(){r=o},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?n:this,arguments),this},i[a[0]+"With"]=s.fireWith}),n.promise(i),e&&e.call(i,i),i},when:function(e){var t,r,n,i=0,a=s.call(arguments),o=a.length,l=1!==o||e&&h.isFunction(e.promise)?o:0,u=1===l?e:h.Deferred(),c=function(e,r,n){return function(i){r[e]=this,n[e]=arguments.length>1?s.call(arguments):i,n===t?u.notifyWith(r,n):--l||u.resolveWith(r,n)}};if(o>1)for(t=new Array(o),r=new Array(o),n=new Array(o);i<o;i++)a[i]&&h.isFunction(a[i].promise)?a[i].promise().done(c(i,n,a)).fail(u.reject).progress(c(i,r,t)):--l;return l||u.resolveWith(n,a),u.promise()}}),h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){if(!0===e?!--h.readyWait:!h.isReady){if(!k.body)return setTimeout(h.ready);h.isReady=!0,!0!==e&&--h.readyWait>0||(L.resolveWith(k,[h]),h.fn.triggerHandler&&(h(k).triggerHandler("ready"),h(k).off("ready")))}}}),h.ready.promise=function(e){if(!L)if(L=h.Deferred(),"complete"===k.readyState)setTimeout(h.ready);else if(k.addEventListener)k.addEventListener("DOMContentLoaded",M,!1),r.addEventListener("load",M,!1);else{k.attachEvent("onreadystatechange",M),r.attachEvent("onload",M);var t=!1;try{t=null==r.frameElement&&k.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!h.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}I(),h.ready()}}()}return L.promise(e)};var N,F="undefined";for(N in h(p))break;p.ownLast="0"!==N,p.inlineBlockNeedsLayout=!1,h(function(){var e,t,r,n;(r=k.getElementsByTagName("body")[0])&&r.style&&(t=k.createElement("div"),(n=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(n).appendChild(t),typeof t.style.zoom!==F&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",p.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(r.style.zoom=1)),r.removeChild(n))}),function(){var e=k.createElement("div");if(null==p.deleteExpando){p.deleteExpando=!0;try{delete e.test}catch(e){p.deleteExpando=!1}}e=null}(),h.acceptData=function(e){var t=h.noData[(e.nodeName+" ").toLowerCase()],r=+e.nodeType||1;return(1===r||9===r)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var j=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/([A-Z])/g;function U(e,t,r){if(void 0===r&&1===e.nodeType){var n="data-"+t.replace(B,"-$1").toLowerCase();if("string"==typeof(r=e.getAttribute(n))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:j.test(r)?h.parseJSON(r):r)}catch(e){}h.data(e,t,r)}else r=void 0}return r}function q(e){var t;for(t in e)if(("data"!==t||!h.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function H(e,t,r,n){if(h.acceptData(e)){var i,s,o=h.expando,l=e.nodeType,u=l?h.cache:e,c=l?e[o]:e[o]&&o;if(c&&u[c]&&(n||u[c].data)||void 0!==r||"string"!=typeof t)return c||(c=l?e[o]=a.pop()||h.guid++:o),u[c]||(u[c]=l?{}:{toJSON:h.noop}),"object"!=typeof t&&"function"!=typeof t||(n?u[c]=h.extend(u[c],t):u[c].data=h.extend(u[c].data,t)),s=u[c],n||(s.data||(s.data={}),s=s.data),void 0!==r&&(s[h.camelCase(t)]=r),"string"==typeof t?null==(i=s[t])&&(i=s[h.camelCase(t)]):i=s,i}}function G(e,t,r){if(h.acceptData(e)){var n,i,a=e.nodeType,s=a?h.cache:e,o=a?e[h.expando]:h.expando;if(s[o]){if(t&&(n=r?s[o]:s[o].data)){i=(t=h.isArray(t)?t.concat(h.map(t,h.camelCase)):t in n?[t]:(t=h.camelCase(t))in n?[t]:t.split(" ")).length;for(;i--;)delete n[t[i]];if(r?!q(n):!h.isEmptyObject(n))return}(r||(delete s[o].data,q(s[o])))&&(a?h.cleanData([e],!0):p.deleteExpando||s!=s.window?delete s[o]:s[o]=null)}}}h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?h.cache[e[h.expando]]:e[h.expando])&&!q(e)},data:function(e,t,r){return H(e,t,r)},removeData:function(e,t){return G(e,t)},_data:function(e,t,r){return H(e,t,r,!0)},_removeData:function(e,t){return G(e,t,!0)}}),h.fn.extend({data:function(e,t){var r,n,i,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(i=h.data(a),1===a.nodeType&&!h._data(a,"parsedAttrs"))){for(r=s.length;r--;)s[r]&&0===(n=s[r].name).indexOf("data-")&&U(a,n=h.camelCase(n.slice(5)),i[n]);h._data(a,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){h.data(this,e)}):arguments.length>1?this.each(function(){h.data(this,e,t)}):a?U(a,e,h.data(a,e)):void 0},removeData:function(e){return this.each(function(){h.removeData(this,e)})}}),h.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=h._data(e,t),r&&(!n||h.isArray(r)?n=h._data(e,t,h.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=h.queue(e,t),n=r.length,i=r.shift(),a=h._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete a.stop,i.call(e,function(){h.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return h._data(e,r)||h._data(e,r,{empty:h.Callbacks("once memory").add(function(){h._removeData(e,t+"queue"),h._removeData(e,r)})})}}),h.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?h.queue(this[0],e):void 0===t?this:this.each(function(){var r=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=h.Deferred(),a=this,s=this.length,o=function(){--n||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=h._data(a[s],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(o));return o(),i.promise(t)}});var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=["Top","Right","Bottom","Left"],K=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)},$=h.access=function(e,t,r,n,i,a,s){var o=0,l=e.length,u=null==r;if("object"===h.type(r))for(o in i=!0,r)h.access(e,t,o,r[o],!0,a,s);else if(void 0!==n&&(i=!0,h.isFunction(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(h(e),r)})),t))for(;o<l;o++)t(e[o],r,s?n:n.call(e[o],o,t(e[o],r)));return i?e:u?t.call(e):l?t(e[0],r):a},z=/^(?:checkbox|radio)$/i;!function(){var e=k.createElement("input"),t=k.createElement("div"),r=k.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",p.leadingWhitespace=3===t.firstChild.nodeType,p.tbody=!t.getElementsByTagName("tbody").length,p.htmlSerialize=!!t.getElementsByTagName("link").length,p.html5Clone="<:nav></:nav>"!==k.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,r.appendChild(e),p.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,r.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",p.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,p.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){p.noCloneEvent=!1}),t.cloneNode(!0).click()),null==p.deleteExpando){p.deleteExpando=!0;try{delete t.test}catch(e){p.deleteExpando=!1}}}(),function(){var e,t,n=k.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(p[e+"Bubbles"]=t in r)||(n.setAttribute(t,"t"),p[e+"Bubbles"]=!1===n.attributes[t].expando);n=null}();var Y=/^(?:input|select|textarea)$/i,X=/^key/,Q=/^(?:mouse|pointer|contextmenu)|click/,J=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;function ee(){return!0}function te(){return!1}function re(){try{return k.activeElement}catch(e){}}function ne(e){var t=ie.split("|"),r=e.createDocumentFragment();if(r.createElement)for(;t.length;)r.createElement(t.pop());return r}h.event={global:{},add:function(e,t,r,n,i){var a,s,o,l,u,c,d,f,p,g,m,v=h._data(e);if(v){for(r.handler&&(r=(l=r).handler,i=l.selector),r.guid||(r.guid=h.guid++),(s=v.events)||(s=v.events={}),(c=v.handle)||((c=v.handle=function(e){return typeof h===F||e&&h.event.triggered===e.type?void 0:h.event.dispatch.apply(c.elem,arguments)}).elem=e),o=(t=(t||"").match(R)||[""]).length;o--;)p=m=(a=Z.exec(t[o])||[])[1],g=(a[2]||"").split(".").sort(),p&&(u=h.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=h.event.special[p]||{},d=h.extend({type:p,origType:m,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&h.expr.match.needsContext.test(i),namespace:g.join(".")},l),(f=s[p])||((f=s[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,g,c)||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),h.event.global[p]=!0);e=null}},remove:function(e,t,r,n,i){var a,s,o,l,u,c,d,f,p,g,m,v=h.hasData(e)&&h._data(e);if(v&&(c=v.events)){for(u=(t=(t||"").match(R)||[""]).length;u--;)if(p=m=(o=Z.exec(t[u])||[])[1],g=(o[2]||"").split(".").sort(),p){for(d=h.event.special[p]||{},f=c[p=(n?d.delegateType:d.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=f.length;a--;)s=f[a],!i&&m!==s.origType||r&&r.guid!==s.guid||o&&!o.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(f.splice(a,1),s.selector&&f.delegateCount--,d.remove&&d.remove.call(e,s));l&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,g,v.handle)||h.removeEvent(e,p,v.handle),delete c[p])}else for(p in c)h.event.remove(e,p+t[u],r,n,!0);h.isEmptyObject(c)&&(delete v.handle,h._removeData(e,"events"))}},trigger:function(e,t,n,i){var a,s,o,l,u,c,d,p=[n||k],g=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(o=c=n=n||k,3!==n.nodeType&&8!==n.nodeType&&!J.test(g+h.event.triggered)&&(g.indexOf(".")>=0&&(g=(m=g.split(".")).shift(),m.sort()),s=g.indexOf(":")<0&&"on"+g,(e=e[h.expando]?e:new h.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:h.makeArray(t,[e]),u=h.event.special[g]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!h.isWindow(n)){for(l=u.delegateType||g,J.test(l+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),c=o;c===(n.ownerDocument||k)&&p.push(c.defaultView||c.parentWindow||r)}for(d=0;(o=p[d++])&&!e.isPropagationStopped();)e.type=d>1?l:u.bindType||g,(a=(h._data(o,"events")||{})[e.type]&&h._data(o,"handle"))&&a.apply(o,t),(a=s&&o[s])&&a.apply&&h.acceptData(o)&&(e.result=a.apply(o,t),!1===e.result&&e.preventDefault());if(e.type=g,!i&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(p.pop(),t))&&h.acceptData(n)&&s&&n[g]&&!h.isWindow(n)){(c=n[s])&&(n[s]=null),h.event.triggered=g;try{n[g]()}catch(e){}h.event.triggered=void 0,c&&(n[s]=c)}return e.result}},dispatch:function(e){e=h.event.fix(e);var t,r,n,i,a,o,l=s.call(arguments),u=(h._data(this,"events")||{})[e.type]||[],c=h.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(o=h.event.handlers.call(this,e,u),t=0;(i=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,a=0;(n=i.handlers[a++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(n.namespace)||(e.handleObj=n,e.data=n.data,void 0!==(r=((h.event.special[n.origType]||{}).handle||n.handler).apply(i.elem,l))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,n,i,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],a=0;a<o;a++)void 0===i[r=(n=t[a]).selector+" "]&&(i[r]=n.needsContext?h(r,this).index(l)>=0:h.find(r,this,null,[l]).length),i[r]&&i.push(n);i.length&&s.push({elem:l,handlers:i})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},fix:function(e){if(e[h.expando])return e;var t,r,n,i=e.type,a=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Q.test(i)?this.mouseHooks:X.test(i)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new h.Event(a),t=n.length;t--;)e[r=n[t]]=a[r];return e.target||(e.target=a.srcElement||k),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,n,i,a=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||k).documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==re()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===re()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(h.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,n){var i=h.extend(new h.Event,r,{type:e,isSimulated:!0,originalEvent:{}});n?h.event.trigger(i,null,t):h.event.dispatch.call(t,i),i.isDefaultPrevented()&&r.preventDefault()}},h.removeEvent=k.removeEventListener?function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)}:function(e,t,r){var n="on"+t;e.detachEvent&&(typeof e[n]===F&&(e[n]=null),e.detachEvent(n,r))},h.Event=function(e,t){if(!(this instanceof h.Event))return new h.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ee:te):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),this[h.expando]=!0},h.Event.prototype={isDefaultPrevented:te,isPropagationStopped:te,isImmediatePropagationStopped:te,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ee,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ee,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ee,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||h.contains(this,n))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),p.submitBubbles||(h.event.special.submit={setup:function(){if(h.nodeName(this,"form"))return!1;h.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,r=h.nodeName(t,"input")||h.nodeName(t,"button")?t.form:void 0;r&&!h._data(r,"submitBubbles")&&(h.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),h._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&h.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(h.nodeName(this,"form"))return!1;h.event.remove(this,"._submit")}}),p.changeBubbles||(h.event.special.change={setup:function(){if(Y.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(h.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),h.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),h.event.simulate("change",this,e,!0)})),!1;h.event.add(this,"beforeactivate._change",function(e){var t=e.target;Y.test(t.nodeName)&&!h._data(t,"changeBubbles")&&(h.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||h.event.simulate("change",this.parentNode,e,!0)}),h._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return h.event.remove(this,"._change"),!Y.test(this.nodeName)}}),p.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){h.event.simulate(t,e.target,h.event.fix(e),!0)};h.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=h._data(n,t);i||n.addEventListener(e,r,!0),h._data(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=h._data(n,t)-1;i?h._data(n,t,i):(n.removeEventListener(e,r,!0),h._removeData(n,t))}}}),h.fn.extend({on:function(e,t,r,n,i){var a,s;if("object"==typeof e){for(a in"string"!=typeof t&&(r=r||t,t=void 0),e)this.on(a,t,r,e[a],i);return this}if(null==r&&null==n?(n=t,r=t=void 0):null==n&&("string"==typeof t?(n=r,r=void 0):(n=r,r=t,t=void 0)),!1===n)n=te;else if(!n)return this;return 1===i&&(s=n,(n=function(e){return h().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=h.guid++)),this.each(function(){h.event.add(this,e,n,r,t)})},one:function(e,t,r,n){return this.on(e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,h(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=te),this.each(function(){h.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return h.event.trigger(e,t,r,!0)}});var ie="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ae=/ jQuery\d+="(?:null|\d+)"/g,se=new RegExp("<(?:"+ie+")[\\s/>]","i"),oe=/^\s+/,le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ue=/<([\w:]+)/,ce=/<tbody/i,de=/<|&#?\w+;/,fe=/<(?:script|style|link)/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^$|\/(?:java|ecma)script/i,ge=/^true\/(.*)/,me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ve={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:p.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ye=ne(k).appendChild(k.createElement("div"));function _e(e,t){var r,n,i=0,a=typeof e.getElementsByTagName!==F?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==F?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],r=e.childNodes||e;null!=(n=r[i]);i++)!t||h.nodeName(n,t)?a.push(n):h.merge(a,_e(n,t));return void 0===t||t&&h.nodeName(e,t)?h.merge([e],a):a}function be(e){z.test(e.type)&&(e.defaultChecked=e.checked)}function Ae(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ee(e){return e.type=(null!==h.find.attr(e,"type"))+"/"+e.type,e}function Se(e){var t=ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function we(e,t){for(var r,n=0;null!=(r=e[n]);n++)h._data(r,"globalEval",!t||h._data(t[n],"globalEval"))}function Te(e,t){if(1===t.nodeType&&h.hasData(e)){var r,n,i,a=h._data(e),s=h._data(t,a),o=a.events;if(o)for(r in delete s.handle,s.events={},o)for(n=0,i=o[r].length;n<i;n++)h.event.add(t,r,o[r][n]);s.data&&(s.data=h.extend({},s.data))}}function ke(e,t){var r,n,i;if(1===t.nodeType){if(r=t.nodeName.toLowerCase(),!p.noCloneEvent&&t[h.expando]){for(n in(i=h._data(t)).events)h.removeEvent(t,n,i.handle);t.removeAttribute(h.expando)}"script"===r&&t.text!==e.text?(Ee(t).text=e.text,Se(t)):"object"===r?(t.parentNode&&(t.outerHTML=e.outerHTML),p.html5Clone&&e.innerHTML&&!h.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===r&&z.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===r?t.defaultSelected=t.selected=e.defaultSelected:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,h.extend({clone:function(e,t,r){var n,i,a,s,o,l=h.contains(e.ownerDocument,e);if(p.html5Clone||h.isXMLDoc(e)||!se.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(ye.innerHTML=e.outerHTML,ye.removeChild(a=ye.firstChild)),!(p.noCloneEvent&&p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(n=_e(a),o=_e(e),s=0;null!=(i=o[s]);++s)n[s]&&ke(i,n[s]);if(t)if(r)for(o=o||_e(e),n=n||_e(a),s=0;null!=(i=o[s]);s++)Te(i,n[s]);else Te(e,a);return(n=_e(a,"script")).length>0&&we(n,!l&&_e(e,"script")),n=o=i=null,a},buildFragment:function(e,t,r,n){for(var i,a,s,o,l,u,c,d=e.length,f=ne(t),g=[],m=0;m<d;m++)if((a=e[m])||0===a)if("object"===h.type(a))h.merge(g,a.nodeType?[a]:a);else if(de.test(a)){for(o=o||f.appendChild(t.createElement("div")),l=(ue.exec(a)||["",""])[1].toLowerCase(),c=ve[l]||ve._default,o.innerHTML=c[1]+a.replace(le,"<$1></$2>")+c[2],i=c[0];i--;)o=o.lastChild;if(!p.leadingWhitespace&&oe.test(a)&&g.push(t.createTextNode(oe.exec(a)[0])),!p.tbody)for(i=(a="table"!==l||ce.test(a)?"<table>"!==c[1]||ce.test(a)?0:o:o.firstChild)&&a.childNodes.length;i--;)h.nodeName(u=a.childNodes[i],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(h.merge(g,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=f.lastChild}else g.push(t.createTextNode(a));for(o&&f.removeChild(o),p.appendChecked||h.grep(_e(g,"input"),be),m=0;a=g[m++];)if((!n||-1===h.inArray(a,n))&&(s=h.contains(a.ownerDocument,a),o=_e(f.appendChild(a),"script"),s&&we(o),r))for(i=0;a=o[i++];)he.test(a.type||"")&&r.push(a);return o=null,f},cleanData:function(e,t){for(var r,n,i,s,o=0,l=h.expando,u=h.cache,c=p.deleteExpando,d=h.event.special;null!=(r=e[o]);o++)if((t||h.acceptData(r))&&(s=(i=r[l])&&u[i])){if(s.events)for(n in s.events)d[n]?h.event.remove(r,n):h.removeEvent(r,n,s.handle);u[i]&&(delete u[i],c?delete r[l]:typeof r.removeAttribute!==F?r.removeAttribute(l):r[l]=null,a.push(i))}}}),h.fn.extend({text:function(e){return $(this,function(e){return void 0===e?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||k).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,n=e?h.filter(e,this):this,i=0;null!=(r=n[i]);i++)t||1!==r.nodeType||h.cleanData(_e(r)),r.parentNode&&(t&&h.contains(r.ownerDocument,r)&&we(_e(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&h.cleanData(_e(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&h.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ae,""):void 0;if("string"==typeof e&&!fe.test(e)&&(p.htmlSerialize||!se.test(e))&&(p.leadingWhitespace||!oe.test(e))&&!ve[(ue.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(le,"<$1></$2>");try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(h.cleanData(_e(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,h.cleanData(_e(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=o.apply([],e);var r,n,i,a,s,l,u=0,c=this.length,d=this,f=c-1,g=e[0],m=h.isFunction(g);if(m||c>1&&"string"==typeof g&&!p.checkClone&&pe.test(g))return this.each(function(r){var n=d.eq(r);m&&(e[0]=g.call(this,r,n.html())),n.domManip(e,t)});if(c&&(r=(l=h.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=r),r)){for(i=(a=h.map(_e(l,"script"),Ee)).length;u<c;u++)n=l,u!==f&&(n=h.clone(n,!0,!0),i&&h.merge(a,_e(n,"script"))),t.call(this[u],n,u);if(i)for(s=a[a.length-1].ownerDocument,h.map(a,Se),u=0;u<i;u++)n=a[u],he.test(n.type||"")&&!h._data(n,"globalEval")&&h.contains(s,n)&&(n.src?h._evalUrl&&h._evalUrl(n.src):h.globalEval((n.text||n.textContent||n.innerHTML||"").replace(me,"")));l=r=null}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var r,n=0,i=[],a=h(e),s=a.length-1;n<=s;n++)r=n===s?this:this.clone(!0),h(a[n])[t](r),l.apply(i,r.get());return this.pushStack(i)}});var xe,Pe={};function De(e,t){var n,i=h(t.createElement(e)).appendTo(t.body),a=r.getDefaultComputedStyle&&(n=r.getDefaultComputedStyle(i[0]))?n.display:h.css(i[0],"display");return i.detach(),a}function Ce(e){var t=k,r=Pe[e];return r||("none"!==(r=De(e,t))&&r||((t=((xe=(xe||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||xe[0].contentDocument).document).write(),t.close(),r=De(e,t),xe.detach()),Pe[e]=r),r}!function(){var e;p.shrinkWrapBlocks=function(){return null!=e?e:(e=!1,(r=k.getElementsByTagName("body")[0])&&r.style?(t=k.createElement("div"),(n=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(n).appendChild(t),typeof t.style.zoom!==F&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(k.createElement("div")).style.width="5px",e=3!==t.offsetWidth),r.removeChild(n),e):void 0);var t,r,n}}();var Le,Re,Oe=/^margin/,Ie=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),Me=/^(top|right|bottom|left)$/;function Ne(e,t){return{get:function(){var r=e();if(null!=r){if(!r)return(this.get=t).apply(this,arguments);delete this.get}}}}r.getComputedStyle?(Le=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):r.getComputedStyle(e,null)},Re=function(e,t,r){var n,i,a,s,o=e.style;return s=(r=r||Le(e))?r.getPropertyValue(t)||r[t]:void 0,r&&(""!==s||h.contains(e.ownerDocument,e)||(s=h.style(e,t)),Ie.test(s)&&Oe.test(t)&&(n=o.width,i=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=r.width,o.width=n,o.minWidth=i,o.maxWidth=a)),void 0===s?s:s+""}):k.documentElement.currentStyle&&(Le=function(e){return e.currentStyle},Re=function(e,t,r){var n,i,a,s,o=e.style;return null==(s=(r=r||Le(e))?r[t]:void 0)&&o&&o[t]&&(s=o[t]),Ie.test(s)&&!Me.test(t)&&(n=o.left,(a=(i=e.runtimeStyle)&&i.left)&&(i.left=e.currentStyle.left),o.left="fontSize"===t?"1em":s,s=o.pixelLeft+"px",o.left=n,a&&(i.left=a)),void 0===s?s:s+""||"auto"}),function(){var e,t,n,i,a,s,o;function l(){var e,t,n,l;(t=k.getElementsByTagName("body")[0])&&t.style&&(e=k.createElement("div"),(n=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=a=!1,o=!0,r.getComputedStyle&&(i="1%"!==(r.getComputedStyle(e,null)||{}).top,a="4px"===(r.getComputedStyle(e,null)||{width:"4px"}).width,(l=e.appendChild(k.createElement("div"))).style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",e.style.width="1px",o=!parseFloat((r.getComputedStyle(l,null)||{}).marginRight),e.removeChild(l)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=e.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(s=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",s=0===l[0].offsetHeight),t.removeChild(n))}(e=k.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(t=(n=e.getElementsByTagName("a")[0])&&n.style)&&(t.cssText="float:left;opacity:.5",p.opacity="0.5"===t.opacity,p.cssFloat=!!t.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===e.style.backgroundClip,p.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,h.extend(p,{reliableHiddenOffsets:function(){return null==s&&l(),s},boxSizingReliable:function(){return null==a&&l(),a},pixelPosition:function(){return null==i&&l(),i},reliableMarginRight:function(){return null==o&&l(),o}}))}(),h.swap=function(e,t,r,n){var i,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in i=r.apply(e,n||[]),t)e.style[a]=s[a];return i};var Fe=/alpha\([^)]*\)/i,je=/opacity\s*=\s*([^)]*)/,Be=/^(none|table(?!-c[ea]).+)/,Ue=new RegExp("^("+V+")(.*)$","i"),qe=new RegExp("^([+-])=("+V+")","i"),He={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","O","Moz","ms"];function We(e,t){if(t in e)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),n=t,i=Ve.length;i--;)if((t=Ve[i]+r)in e)return t;return n}function Ke(e,t){for(var r,n,i,a=[],s=0,o=e.length;s<o;s++)(n=e[s]).style&&(a[s]=h._data(n,"olddisplay"),r=n.style.display,t?(a[s]||"none"!==r||(n.style.display=""),""===n.style.display&&K(n)&&(a[s]=h._data(n,"olddisplay",Ce(n.nodeName)))):(i=K(n),(r&&"none"!==r||!i)&&h._data(n,"olddisplay",i?r:h.css(n,"display"))));for(s=0;s<o;s++)(n=e[s]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[s]||"":"none"));return e}function $e(e,t,r){var n=Ue.exec(t);return n?Math.max(0,n[1]-(r||0))+(n[2]||"px"):t}function ze(e,t,r,n,i){for(var a=r===(n?"border":"content")?4:"width"===t?1:0,s=0;a<4;a+=2)"margin"===r&&(s+=h.css(e,r+W[a],!0,i)),n?("content"===r&&(s-=h.css(e,"padding"+W[a],!0,i)),"margin"!==r&&(s-=h.css(e,"border"+W[a]+"Width",!0,i))):(s+=h.css(e,"padding"+W[a],!0,i),"padding"!==r&&(s+=h.css(e,"border"+W[a]+"Width",!0,i)));return s}function Ye(e,t,r){var n=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=Le(e),s=p.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,a);if(i<=0||null==i){if(((i=Re(e,t,a))<0||null==i)&&(i=e.style[t]),Ie.test(i))return i;n=s&&(p.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+ze(e,t,r||(s?"border":"content"),n,a)+"px"}function Xe(e,t,r,n,i){return new Xe.prototype.init(e,t,r,n,i)}h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Re(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:p.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,s,o=h.camelCase(t),l=e.style;if(t=h.cssProps[o]||(h.cssProps[o]=We(l,o)),s=h.cssHooks[t]||h.cssHooks[o],void 0===r)return s&&"get"in s&&void 0!==(i=s.get(e,!1,n))?i:l[t];if("string"===(a=typeof r)&&(i=qe.exec(r))&&(r=(i[1]+1)*i[2]+parseFloat(h.css(e,t)),a="number"),null!=r&&r==r&&("number"!==a||h.cssNumber[o]||(r+="px"),p.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),!(s&&"set"in s&&void 0===(r=s.set(e,r,n)))))try{l[t]=r}catch(e){}}},css:function(e,t,r,n){var i,a,s,o=h.camelCase(t);return t=h.cssProps[o]||(h.cssProps[o]=We(e.style,o)),(s=h.cssHooks[t]||h.cssHooks[o])&&"get"in s&&(a=s.get(e,!0,r)),void 0===a&&(a=Re(e,t,n)),"normal"===a&&t in Ge&&(a=Ge[t]),""===r||r?(i=parseFloat(a),!0===r||h.isNumeric(i)?i||0:a):a}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,r,n){if(r)return Be.test(h.css(e,"display"))&&0===e.offsetWidth?h.swap(e,He,function(){return Ye(e,t,n)}):Ye(e,t,n)},set:function(e,r,n){var i=n&&Le(e);return $e(0,r,n?ze(e,t,n,p.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,i),i):0)}}}),p.opacity||(h.cssHooks.opacity={get:function(e,t){return je.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var r=e.style,n=e.currentStyle,i=h.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=n&&n.filter||r.filter||"";r.zoom=1,(t>=1||""===t)&&""===h.trim(a.replace(Fe,""))&&r.removeAttribute&&(r.removeAttribute("filter"),""===t||n&&!n.filter)||(r.filter=Fe.test(a)?a.replace(Fe,i):a+" "+i)}}),h.cssHooks.marginRight=Ne(p.reliableMarginRight,function(e,t){if(t)return h.swap(e,{display:"inline-block"},Re,[e,"marginRight"])}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(r){for(var n=0,i={},a="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+W[n]+t]=a[n]||a[n-2]||a[0];return i}},Oe.test(e)||(h.cssHooks[e+t].set=$e)}),h.fn.extend({css:function(e,t){return $(this,function(e,t,r){var n,i,a={},s=0;if(h.isArray(t)){for(n=Le(e),i=t.length;s<i;s++)a[t[s]]=h.css(e,t[s],!1,n);return a}return void 0!==r?h.style(e,t,r):h.css(e,t)},e,t,arguments.length>1)},show:function(){return Ke(this,!0)},hide:function(){return Ke(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){K(this)?h(this).show():h(this).hide()})}}),h.Tween=Xe,Xe.prototype={constructor:Xe,init:function(e,t,r,n,i,a){this.elem=e,this.prop=r,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(h.cssNumber[r]?"":"px")},cur:function(){var e=Xe.propHooks[this.prop];return e&&e.get?e.get(this):Xe.propHooks._default.get(this)},run:function(e){var t,r=Xe.propHooks[this.prop];return this.options.duration?this.pos=t=h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Xe.propHooks._default.set(this),this}},Xe.prototype.init.prototype=Xe.prototype,Xe.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=h.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[h.cssProps[e.prop]]||h.cssHooks[e.prop])?h.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Xe.propHooks.scrollTop=Xe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},h.fx=Xe.prototype.init,h.fx.step={};var Qe,Je,Ze=/^(?:toggle|show|hide)$/,et=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),tt=/queueHooks$/,rt=[function(e,t,r){var n,i,a,s,o,l,u,c=this,d={},f=e.style,g=e.nodeType&&K(e),m=h._data(e,"fxshow");r.queue||(null==(o=h._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,h.queue(e,"fx").length||o.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],u=h.css(e,"display"),"inline"===("none"===u?h._data(e,"olddisplay")||Ce(e.nodeName):u)&&"none"===h.css(e,"float")&&(p.inlineBlockNeedsLayout&&"inline"!==Ce(e.nodeName)?f.zoom=1:f.display="inline-block"));r.overflow&&(f.overflow="hidden",p.shrinkWrapBlocks()||c.always(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]}));for(n in t)if(i=t[n],Ze.exec(i)){if(delete t[n],a=a||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[n])continue;g=!0}d[n]=m&&m[n]||h.style(e,n)}else u=void 0;if(h.isEmptyObject(d))"inline"===("none"===u?Ce(e.nodeName):u)&&(f.display=u);else for(n in m?"hidden"in m&&(g=m.hidden):m=h._data(e,"fxshow",{}),a&&(m.hidden=!g),g?h(e).show():c.done(function(){h(e).hide()}),c.done(function(){var t;for(t in h._removeData(e,"fxshow"),d)h.style(e,t,d[t])}),d)s=st(g?m[n]:0,n,c),n in m||(m[n]=s.start,g&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}],nt={"*":[function(e,t){var r=this.createTween(e,t),n=r.cur(),i=et.exec(t),a=i&&i[3]||(h.cssNumber[e]?"":"px"),s=(h.cssNumber[e]||"px"!==a&&+n)&&et.exec(h.css(r.elem,e)),o=1,l=20;if(s&&s[3]!==a){a=a||s[3],i=i||[],s=+n||1;do{s/=o=o||".5",h.style(r.elem,e,s+a)}while(o!==(o=r.cur()/n)&&1!==o&&--l)}return i&&(s=r.start=+s||+n||0,r.unit=a,r.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),r}]};function it(){return setTimeout(function(){Qe=void 0}),Qe=h.now()}function at(e,t){var r,n={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=W[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function st(e,t,r){for(var n,i=(nt[t]||[]).concat(nt["*"]),a=0,s=i.length;a<s;a++)if(n=i[a].call(r,t,e))return n}function ot(e,t,r){var n,i,a=0,s=rt.length,o=h.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Qe||it(),r=Math.max(0,u.startTime+u.duration-t),n=1-(r/u.duration||0),a=0,s=u.tweens.length;a<s;a++)u.tweens[a].run(n);return o.notifyWith(e,[u,n,r]),n<1&&s?r:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Qe||it(),duration:r.duration,tweens:[],createTween:function(t,r){var n=h.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var r,n,i,a,s;for(r in e)if(i=t[n=h.camelCase(r)],a=e[r],h.isArray(a)&&(i=a[1],a=e[r]=a[0]),r!==n&&(e[n]=a,delete e[r]),(s=h.cssHooks[n])&&"expand"in s)for(r in a=s.expand(a),delete e[n],a)r in e||(e[r]=a[r],t[r]=i);else t[n]=i}(c,u.opts.specialEasing);a<s;a++)if(n=rt[a].call(u,e,c,u.opts))return n;return h.map(c,st,u),h.isFunction(u.opts.start)&&u.opts.start.call(e,u),h.fx.timer(h.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}h.Animation=h.extend(ot,{tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,n=0,i=e.length;n<i;n++)r=e[n],nt[r]=nt[r]||[],nt[r].unshift(t)},prefilter:function(e,t){t?rt.unshift(e):rt.push(e)}}),h.speed=function(e,t,r){var n=e&&"object"==typeof e?h.extend({},e):{complete:r||!r&&t||h.isFunction(e)&&e,duration:e,easing:r&&t||t&&!h.isFunction(t)&&t};return n.duration=h.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in h.fx.speeds?h.fx.speeds[n.duration]:h.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){h.isFunction(n.old)&&n.old.call(this),n.queue&&h.dequeue(this,n.queue)},n},h.fn.extend({fadeTo:function(e,t,r,n){return this.filter(K).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=h.isEmptyObject(e),a=h.speed(t,r,n),s=function(){var t=ot(this,h.extend({},e),a);(i||h._data(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=h.timers,s=h._data(this);if(i)s[i]&&s[i].stop&&n(s[i]);else for(i in s)s[i]&&s[i].stop&&tt.test(i)&&n(s[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(r),t=!1,a.splice(i,1));!t&&r||h.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=h._data(this),n=r[e+"queue"],i=r[e+"queueHooks"],a=h.timers,s=n?n.length:0;for(r.finish=!0,h.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),h.each(["toggle","show","hide"],function(e,t){var r=h.fn[t];h.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(at(t,!0),e,n,i)}}),h.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),h.timers=[],h.fx.tick=function(){var e,t=h.timers,r=0;for(Qe=h.now();r<t.length;r++)(e=t[r])()||t[r]!==e||t.splice(r--,1);t.length||h.fx.stop(),Qe=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Je||(Je=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Je),Je=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(e,t){return e=h.fx&&h.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var n=setTimeout(t,e);r.stop=function(){clearTimeout(n)}})},function(){var e,t,r,n,i;(t=k.createElement("div")).setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],i=(r=k.createElement("select")).appendChild(k.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",p.getSetAttribute="t"!==t.className,p.style=/top/.test(n.getAttribute("style")),p.hrefNormalized="/a"===n.getAttribute("href"),p.checkOn=!!e.value,p.optSelected=i.selected,p.enctype=!!k.createElement("form").enctype,r.disabled=!0,p.optDisabled=!i.disabled,(e=k.createElement("input")).setAttribute("value",""),p.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),p.radioValue="t"===e.value}();var lt=/\r/g;h.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=h.isFunction(e),this.each(function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,h(this).val()):e)?i="":"number"==typeof i?i+="":h.isArray(i)&&(i=h.map(i,function(e){return null==e?"":e+""})),(t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=h.valHooks[i.type]||h.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(lt,""):null==r?"":r:void 0}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return null!=t?t:h.trim(h.text(e))}},select:{get:function(e){for(var t,r,n=e.options,i=e.selectedIndex,a="select-one"===e.type||i<0,s=a?null:[],o=a?i+1:n.length,l=i<0?o:a?i:0;l<o;l++)if(((r=n[l]).selected||l===i)&&(p.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!h.nodeName(r.parentNode,"optgroup"))){if(t=h(r).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var r,n,i=e.options,a=h.makeArray(t),s=i.length;s--;)if(n=i[s],h.inArray(h.valHooks.option.get(n),a)>=0)try{n.selected=r=!0}catch(e){n.scrollHeight}else n.selected=!1;return r||(e.selectedIndex=-1),i}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){if(h.isArray(t))return e.checked=h.inArray(h(e).val(),t)>=0}},p.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ut,ct,dt=h.expr.attrHandle,ft=/^(?:checked|selected)$/i,pt=p.getSetAttribute,ht=p.input;h.fn.extend({attr:function(e,t){return $(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,r){var n,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===F?h.prop(e,t,r):(1===a&&h.isXMLDoc(e)||(t=t.toLowerCase(),n=h.attrHooks[t]||(h.expr.match.bool.test(t)?ct:ut)),void 0===r?n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=h.find.attr(e,t))?void 0:i:null!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+""),r):void h.removeAttr(e,t))},removeAttr:function(e,t){var r,n,i=0,a=t&&t.match(R);if(a&&1===e.nodeType)for(;r=a[i++];)n=h.propFix[r]||r,h.expr.match.bool.test(r)?ht&&pt||!ft.test(r)?e[n]=!1:e[h.camelCase("default-"+r)]=e[n]=!1:h.attr(e,r,""),e.removeAttribute(pt?r:n)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&h.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),ct={set:function(e,t,r){return!1===t?h.removeAttr(e,r):ht&&pt||!ft.test(r)?e.setAttribute(!pt&&h.propFix[r]||r,r):e[h.camelCase("default-"+r)]=e[r]=!0,r}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var r=dt[t]||h.find.attr;dt[t]=ht&&pt||!ft.test(t)?function(e,t,n){var i,a;return n||(a=dt[t],dt[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,dt[t]=a),i}:function(e,t,r){if(!r)return e[h.camelCase("default-"+t)]?t.toLowerCase():null}}),ht&&pt||(h.attrHooks.value={set:function(e,t,r){if(!h.nodeName(e,"input"))return ut&&ut.set(e,t,r);e.defaultValue=t}}),pt||(ut={set:function(e,t,r){var n=e.getAttributeNode(r);if(n||e.setAttributeNode(n=e.ownerDocument.createAttribute(r)),n.value=t+="","value"===r||t===e.getAttribute(r))return t}},dt.id=dt.name=dt.coords=function(e,t,r){var n;if(!r)return(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},h.valHooks.button={get:function(e,t){var r=e.getAttributeNode(t);if(r&&r.specified)return r.value},set:ut.set},h.attrHooks.contenteditable={set:function(e,t,r){ut.set(e,""!==t&&t,r)}},h.each(["width","height"],function(e,t){h.attrHooks[t]={set:function(e,r){if(""===r)return e.setAttribute(t,"auto"),r}}})),p.style||(h.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var gt=/^(?:input|select|textarea|button|object)$/i,mt=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return $(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return e=h.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),h.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,r){var n,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!h.isXMLDoc(e))&&(t=h.propFix[t]||t,i=h.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}}}),p.hrefNormalized||h.each(["href","src"],function(e,t){h.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),p.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),p.enctype||(h.propFix.enctype="encoding");var vt=/[\t\r\n\f]/g;h.fn.extend({addClass:function(e){var t,r,n,i,a,s,o=0,l=this.length,u="string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(R)||[];o<l;o++)if(n=1===(r=this[o]).nodeType&&(r.className?(" "+r.className+" ").replace(vt," "):" ")){for(a=0;i=t[a++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=h.trim(n),r.className!==s&&(r.className=s)}return this},removeClass:function(e){var t,r,n,i,a,s,o=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(R)||[];o<l;o++)if(n=1===(r=this[o]).nodeType&&(r.className?(" "+r.className+" ").replace(vt," "):"")){for(a=0;i=t[a++];)for(;n.indexOf(" "+i+" ")>=0;)n=n.replace(" "+i+" "," ");s=e?h.trim(n):"",r.className!==s&&(r.className=s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):h.isFunction(e)?this.each(function(r){h(this).toggleClass(e.call(this,r,this.className,t),t)}):this.each(function(){if("string"===r)for(var t,n=0,i=h(this),a=e.match(R)||[];t=a[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else r!==F&&"boolean"!==r||(this.className&&h._data(this,"__className__",this.className),this.className=this.className||!1===e?"":h._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",r=0,n=this.length;r<n;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(vt," ").indexOf(t)>=0)return!0;return!1}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var yt=h.now(),_t=/\?/,bt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;h.parseJSON=function(e){if(r.JSON&&r.JSON.parse)return r.JSON.parse(e+"");var t,n=null,i=h.trim(e+"");return i&&!h.trim(i.replace(bt,function(e,r,i,a){return t&&r&&(n=0),0===n?e:(t=i||r,n+=!a-!i,"")}))?Function("return "+i)():h.error("Invalid JSON: "+e)},h.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{r.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+e),t};var At,Et,St=/#.*$/,wt=/([?&])_=[^&]*/,Tt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,kt=/^(?:GET|HEAD)$/,xt=/^\/\//,Pt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Dt={},Ct={},Lt="*/".concat("*");try{Et=location.href}catch(e){(Et=k.createElement("a")).href="",Et=Et.href}function Rt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,a=t.toLowerCase().match(R)||[];if(h.isFunction(r))for(;n=a[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function Ot(e,t,r,n){var i={},a=e===Ct;function s(o){var l;return i[o]=!0,h.each(e[o]||[],function(e,o){var u=o(t,r,n);return"string"!=typeof u||a||i[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),l}return s(t.dataTypes[0])||!i["*"]&&s("*")}function It(e,t){var r,n,i=h.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&h.extend(!0,e,r),e}At=Pt.exec(Et.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?It(It(e,h.ajaxSettings),t):It(h.ajaxSettings,e)},ajaxPrefilter:Rt(Dt),ajaxTransport:Rt(Ct),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,n,i,a,s,o,l,u,c=h.ajaxSetup({},t),d=c.context||c,f=c.context&&(d.nodeType||d.jquery)?h(d):h.event,p=h.Deferred(),g=h.Callbacks("once memory"),m=c.statusCode||{},v={},y={},_=0,b="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!u)for(u={};t=Tt.exec(a);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return _||(e=y[r]=y[r]||e,v[e]=t),this},overrideMimeType:function(e){return _||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)m[t]=[m[t],e[t]];else A.always(e[A.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),E(0,t),this}};if(p.promise(A).complete=g.add,A.success=A.done,A.error=A.fail,c.url=((e||c.url||Et)+"").replace(St,"").replace(xt,At[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=h.trim(c.dataType||"*").toLowerCase().match(R)||[""],null==c.crossDomain&&(r=Pt.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===At[1]&&r[2]===At[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(At[3]||("http:"===At[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=h.param(c.data,c.traditional)),Ot(Dt,c,t,A),2===_)return A;for(n in(o=h.event&&c.global)&&0==h.active++&&h.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!kt.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(_t.test(i)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=wt.test(i)?i.replace(wt,"$1_="+yt++):i+(_t.test(i)?"&":"?")+"_="+yt++)),c.ifModified&&(h.lastModified[i]&&A.setRequestHeader("If-Modified-Since",h.lastModified[i]),h.etag[i]&&A.setRequestHeader("If-None-Match",h.etag[i])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&A.setRequestHeader("Content-Type",c.contentType),A.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Lt+"; q=0.01":""):c.accepts["*"]),c.headers)A.setRequestHeader(n,c.headers[n]);if(c.beforeSend&&(!1===c.beforeSend.call(d,A,c)||2===_))return A.abort();for(n in b="abort",{success:1,error:1,complete:1})A[n](c[n]);if(l=Ot(Ct,c,t,A)){A.readyState=1,o&&f.trigger("ajaxSend",[A,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){A.abort("timeout")},c.timeout));try{_=1,l.send(v,E)}catch(e){if(!(_<2))throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,r,n){var u,v,y,b,E,S=t;2!==_&&(_=2,s&&clearTimeout(s),l=void 0,a=n||"",A.readyState=e>0?4:0,u=e>=200&&e<300||304===e,r&&(b=function(e,t,r){for(var n,i,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in o)if(o[s]&&o[s].test(i)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}n||(n=s)}a=a||n}if(a)return a!==l[0]&&l.unshift(a),r[a]}(c,A,r)),b=function(e,t,r,n){var i,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(r[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(i in u)if((o=i.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[i]:!0!==u[i]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(c,b,A,u),u?(c.ifModified&&((E=A.getResponseHeader("Last-Modified"))&&(h.lastModified[i]=E),(E=A.getResponseHeader("etag"))&&(h.etag[i]=E)),204===e||"HEAD"===c.type?S="nocontent":304===e?S="notmodified":(S=b.state,v=b.data,u=!(y=b.error))):(y=S,!e&&S||(S="error",e<0&&(e=0))),A.status=e,A.statusText=(t||S)+"",u?p.resolveWith(d,[v,S,A]):p.rejectWith(d,[A,S,y]),A.statusCode(m),m=void 0,o&&f.trigger(u?"ajaxSuccess":"ajaxError",[A,c,u?v:y]),g.fireWith(d,[A,S]),o&&(f.trigger("ajaxComplete",[A,c]),--h.active||h.event.trigger("ajaxStop")))}return A},getJSON:function(e,t,r){return h.get(e,t,r,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,r,n,i){return h.isFunction(r)&&(i=i||n,n=r,r=void 0),h.ajax({url:e,type:t,dataType:i,data:r,success:n})}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},h.fn.extend({wrapAll:function(e){if(h.isFunction(e))return this.each(function(t){h(this).wrapAll(e.call(this,t))});if(this[0]){var t=h(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return h.isFunction(e)?this.each(function(t){h(this).wrapInner(e.call(this,t))}):this.each(function(){var t=h(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(r){h(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!p.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||h.css(e,"display"))},h.expr.filters.visible=function(e){return!h.expr.filters.hidden(e)};var Mt=/%20/g,Nt=/\[\]$/,Ft=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function Ut(e,t,r,n){var i;if(h.isArray(t))h.each(t,function(t,i){r||Nt.test(e)?n(e,i):Ut(e+"["+("object"==typeof i?t:"")+"]",i,r,n)});else if(r||"object"!==h.type(t))n(e,t);else for(i in t)Ut(e+"["+i+"]",t[i],r,n)}h.param=function(e,t){var r,n=[],i=function(e,t){t=h.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){i(this.name,this.value)});else for(r in e)Ut(r,e[r],t,i);return n.join("&").replace(Mt,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&Bt.test(this.nodeName)&&!jt.test(e)&&(this.checked||!z.test(e))}).map(function(e,t){var r=h(this).val();return null==r?null:h.isArray(r)?h.map(r,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:r.replace(Ft,"\r\n")}}).get()}}),h.ajaxSettings.xhr=void 0!==r.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Vt()||function(){try{return new r.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Vt;var qt=0,Ht={},Gt=h.ajaxSettings.xhr();function Vt(){try{return new r.XMLHttpRequest}catch(e){}}r.attachEvent&&r.attachEvent("onunload",function(){for(var e in Ht)Ht[e](void 0,!0)}),p.cors=!!Gt&&"withCredentials"in Gt,(Gt=p.ajax=!!Gt)&&h.ajaxTransport(function(e){var t;if(!e.crossDomain||p.cors)return{send:function(r,n){var i,a=e.xhr(),s=++qt;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)a[i]=e.xhrFields[i];for(i in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)void 0!==r[i]&&a.setRequestHeader(i,r[i]+"");a.send(e.hasContent&&e.data||null),t=function(r,i){var o,l,u;if(t&&(i||4===a.readyState))if(delete Ht[s],t=void 0,a.onreadystatechange=h.noop,i)4!==a.readyState&&a.abort();else{u={},o=a.status,"string"==typeof a.responseText&&(u.text=a.responseText);try{l=a.statusText}catch(e){l=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=u.text?200:404}u&&n(o,l,u,a.getAllResponseHeaders())},e.async?4===a.readyState?setTimeout(t):a.onreadystatechange=Ht[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,r=k.head||h("head")[0]||k.documentElement;return{send:function(n,i){(t=k.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,r){(r||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,r||i(200,"success"))},r.insertBefore(t,r.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var Wt=[],Kt=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||h.expando+"_"+yt++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(e,t,n){var i,a,s,o=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=h.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Kt,"$1"+i):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||h.error(i+" was not called"),s[0]},e.dataTypes[0]="json",a=r[i],r[i]=function(){s=arguments},n.always(function(){r[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(i)),s&&h.isFunction(a)&&a(s[0]),s=a=void 0}),"script"}),h.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||k;var n=E.exec(e),i=!r&&[];return n?[t.createElement(n[1])]:(n=h.buildFragment([e],t,i),i&&i.length&&h(i).remove(),h.merge([],n.childNodes))};var $t=h.fn.load;h.fn.load=function(e,t,r){if("string"!=typeof e&&$t)return $t.apply(this,arguments);var n,i,a,s=this,o=e.indexOf(" ");return o>=0&&(n=h.trim(e.slice(o,e.length)),e=e.slice(0,o)),h.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(a="POST"),s.length>0&&h.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){i=arguments,s.html(n?h("<div>").append(h.parseHTML(e)).find(n):e)}).complete(r&&function(e,t){s.each(r,i||[e.responseText,t,e])}),this},h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};var zt=r.document.documentElement;function Yt(e){return h.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}h.offset={setOffset:function(e,t,r){var n,i,a,s,o,l,u=h.css(e,"position"),c=h(e),d={};"static"===u&&(e.style.position="relative"),o=c.offset(),a=h.css(e,"top"),l=h.css(e,"left"),("absolute"===u||"fixed"===u)&&h.inArray("auto",[a,l])>-1?(s=(n=c.position()).top,i=n.left):(s=parseFloat(a)||0,i=parseFloat(l)||0),h.isFunction(t)&&(t=t.call(e,r,o)),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+i),"using"in t?t.using.call(e,d):c.css(d)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,r,n={top:0,left:0},i=this[0],a=i&&i.ownerDocument;return a?(t=a.documentElement,h.contains(t,i)?(typeof i.getBoundingClientRect!==F&&(n=i.getBoundingClientRect()),r=Yt(a),{top:n.top+(r.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(r.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var e,t,r={top:0,left:0},n=this[0];return"fixed"===h.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(r=e.offset()),r.top+=h.css(e[0],"borderTopWidth",!0),r.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-h.css(n,"marginTop",!0),left:t.left-r.left-h.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||zt;e&&!h.nodeName(e,"html")&&"static"===h.css(e,"position");)e=e.offsetParent;return e||zt})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r=/Y/.test(t);h.fn[e]=function(n){return $(this,function(e,n,i){var a=Yt(e);if(void 0===i)return a?t in a?a[t]:a.document.documentElement[n]:e[n];a?a.scrollTo(r?h(a).scrollLeft():i,r?i:h(a).scrollTop()):e[n]=i},e,n,arguments.length,null)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=Ne(p.pixelPosition,function(e,r){if(r)return r=Re(e,t),Ie.test(r)?h(e).position()[t]+"px":r})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){h.fn[n]=function(n,i){var a=arguments.length&&(r||"boolean"!=typeof n),s=r||(!0===n||!0===i?"margin":"border");return $(this,function(t,r,n){var i;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===n?h.css(t,r,s):h.style(t,r,n,s)},t,a?n:void 0,a,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,void 0===(n=function(){return h}.apply(t,[]))||(e.exports=n);var Xt=r.jQuery,Qt=r.$;return h.noConflict=function(e){return r.$===h&&(r.$=Qt),e&&r.jQuery===h&&(r.jQuery=Xt),h},typeof i===F&&(r.jQuery=r.$=h),h})},KsRy:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({1:function(e,t,r,n,i){return"        Sorry:\n        we can't play video on this browser.\n        Please make sure it's up to date\n        and that Flash 11.1 or higher is installed.\n"},3:function(e,t,r,n,i){return"        We're sorry:\n        video playback cannot be initialized\n        on your browser at this time.\n"},5:function(e,t,r,n,i){return"        We're sorry:\n        video playback has been interrupted.\n        You may need to refresh the page\n        to resume.\n"},compiler:[7,">= 4.0.0"],main:function(e,t,r,n,i){var a,s,o=null!=t?t:e.nullContext||{};return'\n<div class="Embeddable__error vc inverse">\n  <div class="vc__wrap">\n    <div class="Embeddable__error__message">\n'+(null!=(a=r.if.call(o,null!=t?t.isClient:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"\n"+(null!=(a=r.if.call(o,null!=t?t.isInit:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?a:"")+"\n"+(null!=(a=r.if.call(o,null!=t?t.isFatal:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?a:"")+'\n      <a href="'+e.escapeExpression("function"==typeof(s=null!=(s=r.url||(null!=t?t.url:t))?s:r.helperMissing)?s.call(o,{name:"url",hash:{},data:i}):s)+'" target="_blank">Load this talk on ted.com</a>\n    </div>\n  </div>\n</div>\n'},useData:!0})},MRb2:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({1:function(e,t,n,i,a){var s=e.lambda,o=e.escapeExpression;return'    <a class="undec Embeddable__playlist__talk" href="'+o(s(null!=t?t.canonical:t,t))+'" data-id="'+o(s(null!=t?t.id:t,t))+'">\n      <div class="media">\n        <div class="Embeddable__playlist__talk__image media__image media__image--thumb">\n          '+o(function(e){return e&&(e.__esModule?e.default:e)}(r("YT+K")).call(null!=t?t:e.nullContext||{},null!=t?t.thumb:t,null,null!=t?t.duration:t,{name:"thumb",hash:{},data:a}))+'\n        </div>\n\n        <div class="media__message">\n          <h4 class="Embeddable__playlist__talk__title">\n            '+o(s(null!=t?t.speaker:t,t))+":\n            "+o(s(null!=t?t.title:t,t))+"\n          </h4>\n        </div>\n      </div>\n    </a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,r,n,i){var a;return'\n<div class="Embeddable__expandable__content Embeddable__playlist__bar">\n'+(null!=(a=r.each.call(null!=t?t:e.nullContext||{},null!=t?t.talks:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"</div>\n"},useData:!0})},MaNa:function(e,t,r){"use strict";var n,i;n=[r("5cge"),r("yAjw"),r("ZQBx")],void 0===(i=function(e,t,r){var n=t.View.extend({propsDefaults:null,stateDefaults:null,propsEvents:null,stateEvents:null,adoptView:function(t){e.extend(this.propsDefaults,t.prototype.propsDefaults),e.extend(this.stateDefaults,t.prototype.stateDefaults),e.extend(this.propsEvents,t.prototype.propsEvents),e.extend(this.stateEvents,t.prototype.stateEvents)},initialize:function(){this.initializeState(),this.initializeProps()},initializeProps:function(){this.props=this._eventModel(this.propsDefaults,this.propsEvents)},initializeState:function(){this.state=this._eventModel(this.stateDefaults,this.stateEvents)},toggleClass:function(e,t,r){this.find(e)[r?"addClass":"removeClass"](t)},_eventModel:function(r,n){if(!r)return!1;var i=new t.Model(r),a=this;return e.forOwn(n,function(t,r){e.isString(t)&&(t=a[t]);var n=r.split(":");"on"===n[0]&&(r="change:"+n[1],t=e.wrap(t,function(e,t,r){r&&e.call(a)})),a.listenTo(i,r,t)}),i}});return e.extend(n.prototype,r),n}.apply(t,n))||(e.exports=i)},MgNp:function(e,t,r){"use strict";var n,i;n=[r("lU1m"),t],void 0===(i=function(e,t){var r;function n(){r=void 0}t.key="sourceContext",t.get=function(){var e;if(e=t.getFromStash())return e;if(e=t.getFromCookie())return e;var r=t.getReferrer();if(""===r)return"direct";var n=t.getLocation();return t.extractHost(r)===t.extractHost(n)?"internal":"external"},t.set=function(e,r){var n=t.extractPath(e),i=t.prepareContext(r)+"@"+n;n&&(t.setStash(i),t.setCookie(i,n))},t.extractHost=function(e){var t=String(e).match(/^\w+:\/\/([^/]+)/);return t&&t[1]},t.extractPath=function(e){var t=String(e).match(/^(?:\w+:)?(?:\/\/[^/]+)?((?:\/[^?/#]+)+)/);return t&&t[1]},t.getFromValue=function(e){var r=String(e).match(/^([^@]+)@(.*)/);return!(!r||0!==t.extractPath(t.getLocation()).indexOf(r[2]))&&r[1]},t.setCookie=function(r,n){e.set(t.key,r,{expires:30,path:n})},t.getCookie=function(){return String(e.get(t.key))},t.getFromCookie=function(){return t.getFromValue(t.getCookie())},t.setStash=function(e){r=e,window.setTimeout(n,3e4)},t.getFromStash=function(){return t.getFromValue(r)},t.getReferrer=function(){return document&&document.referrer||""},t.getLocation=function(){return location&&location.href||""},t.prepareContext=function(e){return String(e).replace("@","")}}.apply(t,n))||(e.exports=i)},Nh48:function(e,t,r){"use strict";var n,i;n=[r("MaNa"),r("3t64"),r("h13g"),r("Dx5M"),r("C/ht"),r("sv2i"),r("PiqP")],void 0===(i=function(e,t,r,n,i,a,s){return e.extend({className:"Embeddable__chrome",events:{"click a:not(.Embeddable__controls__outbound)":function(e){e.preventDefault()},"click a.Embeddable__controls__pause":function(){this.props.get("paused")||this.state.set("pausePending",!0)},"click a.Embeddable__controls__play":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__controls__skip":function(){var e=this.props.get("next");e&&(this.state.set("skipPending",!0),this.state.set("pendingTalk",e))},"click a.Embeddable__controls__unskip":function(){var e=this.props.get("prev");e&&(this.state.set("unskipPending",!0),this.state.set("pendingTalk",e))},"click a.Embeddable__controls__volume":function(){this.state.set("volumeOpen",!this.state.get("volumeOpen"))},"click a.Embeddable__controls__subtitles":function(){this.state.set("subtitlesOpen",!this.state.get("subtitlesOpen"))},"click a.Embeddable__controls__playlist":function(){this.state.set("playlistOpen",!this.state.get("playlistOpen"))},"click a.Embeddable__controls__fullscreen":function(){this.props.get("fullscreen")||this.state.set("fullscreenPending",!0)},"click a.Embeddable__controls__smallscreen":function(){this.props.get("fullscreen")&&this.state.set("smallscreenPending",!0)},"click a.Embeddable__controls__outbound":function(){this.props.get("paused")||this.state.set("pausePending",!0)},"click div.Embeddable__play-button":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__playlist__talk":function(e){var t=+$(e.target).closest("a.Embeddable__playlist__talk").data("id");this.state.set("pendingTalk",this.talks.get(t))},"click a.Embeddable__subtitles__language":function(e){var t=$(e.target).closest("a.Embeddable__subtitles__language").data("code");t?this.props.get("subtitle")===t?this.state.set("pendingSubtitle",!1):this.state.set("pendingSubtitle",t):this.props.get("subtitle")&&this.state.set("pendingSubtitle",!1)},"click a.Embeddable__volume__mute":function(){this.props.get("muted")||this.state.set("mutePending",!0)},"click a.Embeddable__volume__unmute":function(){this.props.get("muted")&&this.state.set("unmutePending",!0)},"scrubberslide div.Embeddable__volume__slider":function(e,t){this.state.set("pendingVolume",t.value)},"scrubberchange div.Embeddable__scrubber__slider":function(e,t){var r=this.props.get("duration");r&&this.state.set("pendingSeek",t.value*r)}},stateDefaults:{pausePending:!1,playPending:!1,pendingTalk:null,skipPending:!1,unskipPending:!1,volumeOpen:!1,pendingVolume:null,mutePending:!1,unmutePending:!1,subtitlesAvailable:!1,subtitlesOpen:!1,pendingSubtitle:null,playlistOpen:!1,fullscreenPending:!1,smallscreenPending:!1,pendingSeek:null},stateEvents:{"on:playPending":function(){this.playButton.props.set("visible",!1)},"change:pendingTalk":function(e,t){null!==t&&this.state.set("playlistOpen",!1)},"change:volumeOpen":function(e,t){this.volume.props.set("open",t),this.controls.props.set("volumeActive",t),t&&(this.state.set("subtitlesOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingVolume":function(e,t){this.volume.props.set("level",t)},"change:subtitlesAvailable":"_checkSubtitles","change:subtitlesOpen":function(e,t){this.subtitles.props.set("open",t),this.controls.props.set("subtitlesActive",t),t&&(this.state.set("volumeOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingSubtitle":function(e,t){null!==t&&this.state.set("subtitlesOpen",!1)},"change:playlistOpen":function(e,t){this.playlist.props.set("open",t),this.controls.props.set("playlistActive",t),t&&(this.state.set("volumeOpen",!1),this.state.set("subtitlesOpen",!1))}},propsDefaults:{enabled:!0,activated:!1,hovering:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,next:null,prev:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1,postrolling:!1,url:"https://www.ted.com/",visible:!1},propsEvents:{"change:enabled":"_setActivation","change:activated":"_setActivation","change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__chrome--visible")},"change:playing":function(){this._checkPlayPause()},"on:playing":function(){this.state.set("playPending",!1),this.playButton.props.set("visible",!1)},"on:paused":function(){this.state.set("pausePending",!1),this.playButton.props.set("enabled",!0),this.playButton.props.set("visible",!0)},"change:duration":function(e,t){this.controls.renderDuration(t),this.scrubber.props.set("duration",t)},"change:currentTime":function(e,t){this.controls.renderCurrent(t),this.scrubber.props.set("currentTime",t)},"change:talk":function(e,t){this.state.set("pendingTalk",null),this.state.set("skipPending",!1),this.state.set("unskipPending",!1);var r=t.get("languages");this.subtitles.props.set("languages",r||[]),this.state.set("subtitlesAvailable",r&&r.length>0)},"change:next":"_checkSkip","change:prev":"_checkSkip","change:volume":function(e,t){this.volume.props.set("level",t)},"change:canVolume":function(e,t){this.controls.props.set("volumeEnabled",t)},"change:muted":function(e,t){this.state.set("mutePending",!1),this.state.set("unmutePending",!1),this.volume.props.set("muted",t),this.controls.props.set("volumeMuted",t)},"change:subtitle":function(e,t){this.subtitles.props.set("activeSubtitle",t||null),this.controls.props.set("subtitlesEffective",!!t),this.state.set("pendingSubtitle",null)},"change:canSubtitle":"_checkSubtitles","change:fullscreen":function(e,t){this.state.set("fullscreenPending",!1),this.state.set("smallscreenPending",!1),this.controls.props.set("fullscreen",t),this.scrubber.props.set("fullscreen",t)},"change:canFullscreen":function(e,t){this.controls.props.set("fullscreenEnabled",t)},"change:postrolling":function(e,t){this.scrubber.props.set("enabled",!t),this.controls.props.set("timingEnabled",!t),this._checkPlayPause(),this._checkPlaylist(),this._checkSkip(),this._checkSubtitles()},"change:url":function(e,t){this.controls.props.set("url",t)}},initialize:function(e){this.talks=e.talks,this.scrubber=new s,this.controls=new t,this.playButton=new r,this.playlist=new n({talks:this.talks}),this.subtitles=new i,this.volume=new a,this.initializeState(),this.initializeProps(),this.listenTo(this.talks,"add",this._checkPlaylist),this.listenTo(this.talks,"all",this._checkPlaylist),this.listenTo(this.talks,"reset",this._checkPlaylist)},render:function(){this.$el.append(this.playButton.$el),this.playButton.render(),this.$el.append(this.controls.$el),this.controls.render(),this.$el.append(this.scrubber.$el),this.scrubber.render(),this.$el.append(this.volume.$el),this.volume.render(),this.$el.append(this.playlist.$el),this.playlist.render(),this.$el.append(this.subtitles.$el),this.subtitles.render(),this.volume.anchorTo(this.controls.find("a.Embeddable__controls__volume")),this.subtitles.anchorTo(this.controls.find("a.Embeddable__controls__subtitles")),this.playlist.anchorTo(this.controls.find("a.Embeddable__controls__playlist"))},_checkPlaylist:function(){var e=this.talks.length>1,t=!!this.props.get("postrolling");this.controls.props.set("playlistEnabled",!t&&e)},_checkPlayPause:function(){var e=!!this.props.get("playing"),t=!!this.props.get("postrolling");this.controls.props.set("playEnabled",!t&&!e),this.controls.props.set("pauseEnabled",!t&&e)},_checkSkip:function(){var e=!!this.props.get("next"),t=!!this.props.get("prev"),r=!!this.props.get("postrolling");this.controls.props.set("skipEnabled",!r&&e),this.controls.props.set("unskipEnabled",!r&&t)},_checkSubtitles:function(){this.controls.props.set("subtitlesEnabled",!this.props.get("postrolling")&&this.state.get("subtitlesAvailable")&&this.props.get("canSubtitle"))},_setActivation:function(){var e=this.props.get("enabled")&&this.props.get("activated");this.$el[e?"addClass":"removeClass"]("Embeddable__chrome--activated")}})}.apply(t,n))||(e.exports=i)},O074:function(e,t,r){(function(t){e.exports=t.jQuery=r("9Icy")}).call(this,r("pCvA"))},OXOu:function(e,t,r){"use strict";var n;void 0===(n=function(){return function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}}.apply(t,[]))||(e.exports=n)},PiqP:function(e,t,r){"use strict";var n,i;n=[r("MaNa"),r("TrNF"),r("nLfs")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__scrubber",events:{scrubberchange:function(){this.find("div.Embeddable__scrubber__slider").scrubber("progress",0)}},propsDefaults:{enabled:!0,currentTime:0,duration:0,fullscreen:!1},propsEvents:{"change:enabled":"renderEnabled","change:currentTime":"renderTime","change:duration":"renderTime","change:fullscreen":"renderFullscreen"},render:function(){return this.$el.html(t()),this.renderEnabled(),this.renderFullscreen(),this.find("div.Embeddable__scrubber__slider").scrubber(),this},renderEnabled:function(){this.$el[this.props.get("enabled")?"addClass":"removeClass"]("Embeddable__scrubber--enabled")},renderFullscreen:function(){this.$el[this.props.get("fullscreen")?"addClass":"removeClass"]("Embeddable__scrubber--fullscreen")},renderTime:function(){this.find("div.Embeddable__scrubber__meter__progress").width(this.props.get("currentTime")/this.props.get("duration")*100+"%")}})}.apply(t,n))||(e.exports=i)},QjU5:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("ikLi"),r("AQSU"),r("UQPx")],void 0===(i=function(e){return e.widget("ted.slider",e.ui.mouse,{options:{distance:0,orientation:"horizontal",value:0,change:null,slide:null,start:null,stop:null},value:function(e){return arguments.length&&(this.options.value=e,this._refreshValue()),this.options.value},_change:function(e){this._trigger("change",e,this._getData({value:this.value()}))},_create:function(){this._detectOrientation(),this._mouseInit();var t=e("<div class=slider__progress></div>");this.progressElement=t,this.cursorElement=e("<div class=slider__cursor></div>").appendTo(this.progressElement),this.element.addClass("slider slider--"+this.orientation).append(this.progressElement)},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_getData:function(e){return e},_mouseCapture:function(e){var t,r;return this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},r=this._valueFromPosition(t),this._start(e),this._slide(e,r),!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},r=this._valueFromPosition(t);return this._slide(e,r),!1},_mouseStart:function(){return!0},_mouseStop:function(e){return this._mouseDrag(e),this._stop(e),this._change(e),!1},_refreshValue:function(){var e=this.value();this.progressElement.css("vertical"===this.orientation?"height":"width",100*e+"%")},_slide:function(e,t){this._trigger("slide",e,this._getData({value:t})),this.value(t)},_start:function(e){this.element.addClass("slider--active"),this._trigger("start",e)},_stop:function(e){this.element.removeClass("slider--active"),this._trigger("stop",e)},_valueFromPosition:function(e){var t,r,n;return"vertical"===this.orientation?(n=this.elementSize.height,r=e.y-this.elementOffset.top):(n=this.elementSize.width,r=e.x-this.elementOffset.left),(t=r/n)>1&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),t}}),function(t,r){return e(t).slider(r)}}.apply(t,n))||(e.exports=i)},Qp3a:function(e,t,r){"use strict";var n,i;n=[r("O074")],void 0===(i=function(e){var t=50,r="no-defer",n="download"in document.createElement("a"),i="defer-link-pends",a="defer-link-preventable",s="defer-link-prevented",o=window;var l=e.Event.prototype.preventDefault;function u(t,l){var u="A"===this.nodeName?e(this):e(t.target).closest("a"),c=u.attr("href"),d=u.attr("target"),f=u.length&&c&&1===t.which&&!t.metaKey&&!t.shiftKey,p=l;function h(){var e=+u.data(i)-1;u.data(i,e),e<=0&&!u.data(s)&&(u.removeData(a),o.location.href=c)}if(e.isFunction(l)&&!1===(p=l.call(this,t)))return!1;f&&t.isDefaultPrevented()&&!u.data(i)&&(f=!1),f&&d&&"_self"!==d&&(f=!1),f&&n&&u.is("[download]")&&(f=!1),f&&u.hasClass(r)&&(f=!1);var g=+(u.data(i)||0);f&&(u.data(i,g+1),p.when?("resolved"===p.state()&&h(),p.done(h)):e.isNumeric(p)?o.setTimeout(h,p):(f=!1,u.data(i,g))),f&&!g&&(t.preventDefault(),u.data(a,!0))}return e.Event.prototype.preventDefault=function(){var t=e(this.target);return t.data(a)&&t.data(s,!0),l.apply(this,Array.prototype.slice.call(arguments))},function(r){if(r.when||e.isNumeric(r)||e.isFunction(r))return function(e){return function(t){return u.call(this,t,e)}}(r);u.call(this,r,t)}}.apply(t,n))||(e.exports=i)},ReFC:function(e,t,r){e.exports=function(){"use strict";var e,t=["webkit","Moz","ms","O"],r={};function n(e,t){var r,n=document.createElement(e||"div");for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,r=arguments.length;t<r;t++)e.appendChild(arguments[t]);return e}var a=function(){var e=n("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}();function s(t,n,i,s){var o=["opacity",n,~~(100*t),i,s].join("-"),l=.01+i/s*100,u=Math.max(1-(1-t)/n*(100-l),t),c=e.substring(0,e.indexOf("Animation")).toLowerCase(),d=c&&"-"+c+"-"||"";return r[o]||(a.insertRule("@"+d+"keyframes "+o+"{0%{opacity:"+u+"}"+l+"%{opacity:"+t+"}"+(l+.01)+"%{opacity:1}"+(l+n)%100+"%{opacity:"+t+"}100%{opacity:"+u+"}}",a.cssRules.length),r[o]=1),o}function o(e,r){var n,i,a=e.style;for(r=r.charAt(0).toUpperCase()+r.slice(1),i=0;i<t.length;i++)if(n=t[i]+r,void 0!==a[n])return n;if(void 0!==a[r])return r}function l(e,t){for(var r in t)e.style[o(e,r)||r]=t[r];return e}function u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)void 0===e[n]&&(e[n]=r[n])}return e}function c(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function d(e,t){return"string"==typeof e?e:e[t%e.length]}var f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function p(e){if(void 0===this)return new p(e);this.opts=u(e||{},p.defaults,f)}p.defaults={},u(p.prototype,{spin:function(t){this.stop();var r,i,a=this,s=a.opts,o=a.el=l(n(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),u=s.radius+s.length+s.width;if(t&&(t.insertBefore(o,t.firstChild||null),i=c(t),r=c(o),l(o,{left:("auto"==s.left?i.x-r.x+(t.offsetWidth>>1):parseInt(s.left,10)+u)+"px",top:("auto"==s.top?i.y-r.y+(t.offsetHeight>>1):parseInt(s.top,10)+u)+"px"})),o.setAttribute("role","progressbar"),a.lines(o,a.opts),!e){var d,f=0,p=(s.lines-1)*(1-s.direction)/2,h=s.fps,g=h/s.speed,m=(1-s.opacity)/(g*s.trail/100),v=g/s.lines;!function e(){f++;for(var t=0;t<s.lines;t++)d=Math.max(1-(f+(s.lines-t)*v)%g*m,s.opacity),a.opacity(o,t*s.direction+p,d,s);a.timeout=a.el&&setTimeout(e,~~(1e3/h))}()}return a},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(t,r){var a,o=0,u=(r.lines-1)*(1-r.direction)/2;function c(e,t){return l(n(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:t,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*o+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(;o<r.lines;o++)a=l(n(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:e&&s(r.opacity,r.trail,u+o*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&i(a,l(c("#000","0 0 4px #000"),{top:"2px"})),i(t,i(a,c(d(r.color,o),"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(e,t,r){t<e.childNodes.length&&(e.childNodes[t].style.opacity=r)}});var h=l(n("group"),{behavior:"url(#default#VML)"});return!o(h,"transform")&&h.adj?function(){function e(e,t){return n("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}a.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(t,r){var n=r.length+r.width,a=2*n;function s(){return l(e("group",{coordsize:a+" "+a,coordorigin:-n+" "+-n}),{width:a,height:a})}var o,u=2*-(r.width+r.length)+"px",c=l(s(),{position:"absolute",top:u,left:u});function f(t,a,o){i(c,i(l(s(),{rotation:360/r.lines*t+"deg",left:~~a}),i(l(e("roundrect",{arcsize:r.corners}),{width:n,height:r.width,left:r.radius,top:-r.width>>1,filter:o}),e("fill",{color:d(r.color,t),opacity:r.opacity}),e("stroke",{opacity:0}))))}if(r.shadow)for(o=1;o<=r.lines;o++)f(o,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(o=1;o<=r.lines;o++)f(o);return i(t,c)},p.prototype.opacity=function(e,t,r,n){var i=e.firstChild;n=n.shadow&&n.lines||0,i&&t+n<i.childNodes.length&&(i=(i=(i=i.childNodes[t+n])&&i.firstChild)&&i.firstChild)&&(i.opacity=r)}}():e=o(h,"animation"),p}()},RjIu:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({1:function(e,t,r,n,i){var a;return'        <div class="m2">\n          Get personal recommendations and the newest TED ideas sent straight to your inbox<br>\n          <a href="https://www.ted.com/recommends'+(null!=(a=r.unless.call(null!=t?t:e.nullContext||{},null!=t?t.disableCampaigns:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?a:"")+'" target="_blank">Sign up now</a>\n        </div>\n'},2:function(e,t,r,n,i){return"?utm_source=embedPlayer&utm_medium=referral&utm_campaign=TED%20Recommends"},compiler:[7,">= 4.0.0"],main:function(e,t,r,n,i){var a;return'\n<div class="vc">\n  <div class="vc__wrap">\n    <div class="hpad2 inverse text-center">\n'+(null!=(a=r.unless.call(null!=t?t:e.nullContext||{},null!=t?t.hideNewsletter:t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+'\n      <a hre="#" class="Embeddable__ended__rewatch button button--highlight" role="button">Rewatch</a>\n    </div>\n  </div>\n</div>\n'},useData:!0})},RoC8:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},TEnB:function(e,t,r){"use strict";var n;void 0===(n=function(e){var t,r=window.navigator;function n(e){var r=e.indexOf(t);if(-1!==r)return parseFloat(e.substring(r+t.length+1))}var i=[{string:r.userAgent,subString:"Chrome",identity:"Chrome"},{string:r.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:r.userAgent,subString:"Firefox",identity:"Firefox"},{string:r.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:r.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"}];e.browser=function(e){for(var r=0;r<e.length;r++){var n=e[r].string,i=e[r].prop;if(t=e[r].versionSearch||e[r].identity,n){if(-1!==n.indexOf(e[r].subString))return e[r].identity}else if(i)return e[r].identity}}(i)||"Unknown Browser",e.version=n(window.navigator.userAgent)||n(window.navigator.appVersion)||"Unknown Version"}.apply(t,[t]))||(e.exports=n)},TrNF:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,r,n,i){return'\n<div class="Embeddable__scrubber__bar">\n  <div class="Embeddable__scrubber__meter"><div class="Embeddable__scrubber__meter__progress"></div></div>\n\n  <div class="Embeddable__scrubber__slider"></div>\n</div>\n'},useData:!0})},UQPx:function(e,t,r){var n,i;n=[r("O074"),r("me3u"),r("AQSU")],void 0===(i=function(e,t,r){return function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,r=e.ui.mouse.prototype,n=r._mouseInit;r._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,i(e,"mouseover"),i(e,"mousemove"),i(e,"mousedown"))},r._touchMove=function(e){t&&(this._touchMoved=!0,i(e,"mousemove"))},r._touchEnd=function(e){t&&(i(e,"mouseup"),i(e,"mouseout"),this._touchMoved||i(e,"click"),t=!1)},r._mouseInit=function(){this.element.bind("touchstart",e.proxy(this,"_touchStart")).bind("touchmove",e.proxy(this,"_touchMove")).bind("touchend",e.proxy(this,"_touchEnd")),n.call(this)}}function i(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var r=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}}(e),e}.apply(t,n))||(e.exports=i)},VObA:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({1:function(e,t,r,n,i){var a,s=null!=t?t:e.nullContext||{},o=r.helperMissing,l=e.escapeExpression;return'      <li class="Embeddable__subtitles__item">\n        <a class="checkable Embeddable__subtitles__language" href="#" data-code="'+l("function"==typeof(a=null!=(a=r.languageCode||(null!=t?t.languageCode:t))?a:o)?a.call(s,{name:"languageCode",hash:{},data:i}):a)+'">\n          <span class="checkable__label">\n            '+l("function"==typeof(a=null!=(a=r.languageName||(null!=t?t.languageName:t))?a:o)?a.call(s,{name:"languageName",hash:{},data:i}):a)+"\n          </span>\n        </a>\n      </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,r,n,i){var a;return'\n<div class="Embeddable__expandable__content">\n  <ul class="sl">\n    <li class="Embeddable__subtitles__item">\n      <a class="checkable Embeddable__subtitles__language" href="#">\n        <span class="checkable__label">\n          Turn subtitles off\n        </span>\n      </a>\n    </li>\n\n'+(null!=(a=r.each.call(null!=t?t:e.nullContext||{},null!=t?t.languages:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"  </ul>\n</div>\n"},useData:!0})},Wd7D:function(e,t,r){"use strict";var n,i;n=[r("lDDm"),t],void 0===(i=function(e,t){t.getTests=function(){var t=e("abby");return t&&t.tests||{}},t.getVariation=function(e){return t.getTests()[e]},t.isVariation=function(e,r){return t.getVariation(e)===r}}.apply(t,n))||(e.exports=i)},"YT+K":function(e,t,r){"use strict";var n,i;n=[r("+w1B"),r("yCnj")],void 0===(i=function(e,t){function r(r,n,i){var a=!!(i&&i>0)&&i;return n=n||"video",new e.SafeString(t({cropClass:"video"===n?"thumb--crop-top":"",src:r,ratio:n,playDuration:a,playIcon:!a}))}return e.registerHelper("thumb",r),r}.apply(t,n))||(e.exports=i)},Yfm1:function(e,t,r){"undefined"!=typeof window&&function(t,r){e.exports=r()}(0,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function a(){}function s(e,t,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new function(e,t,r){this.fn=e,this.context=t,this.once=r||!1}(r,n||e,a),o=i?i+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,s=new Array(a);n<a;n++)s[n]=r[n].fn;return s},l.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,n,a,s){var o=i?i+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||n&&!s.once||r&&s.context!==r||o(this,a);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||n&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[a]=1===u.length?u[0]:u:o(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&o(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,s,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(i(r))for(o=Array.prototype.slice.call(arguments,1),s=(u=r.slice()).length,l=0;l<s;l++)u[l].apply(this,o);return!0},r.prototype.addListener=function(e,t){var s;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,a,s,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(r=this._events[e]).length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(o=s;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=o;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}()},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function s(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return!isNaN(1*e)}function l(e,t,n){var l={};l[n]=[];var u=t.toString(),c=u.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return l;for(var d,f=c[1],p=new RegExp("(\\\\n|\\W)"+s(f)+a,"g");d=p.exec(u);)"dll-reference"!==d[3]&&l[n].push(d[3]);for(p=new RegExp("\\("+s(f)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");d=p.exec(u);)e[d[2]]||(l[n].push(d[1]),e[d[2]]=r(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var h=Object.keys(l),g=0;g<h.length;g++)for(var m=0;m<l[h[g]].length;m++)o(l[h[g]][m])&&(l[h[g]][m]=1*l[h[g]][m]);return l}function u(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length>0},!1)}e.exports=function(e,t){t=t||{};var i={main:r.m},a=t.all?{main:Object.keys(i.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};u(r);)for(var a=Object.keys(r),s=0;s<a.length;s++){var o=a[s],c=r[o].pop();if(i[o]=i[o]||{},!i[o][c]&&e[o][c]){i[o][c]=!0,n[o]=n[o]||[],n[o].push(c);for(var d=l(e,e[o][c],o),f=Object.keys(d),p=0;p<f.length;p++)r[f[p]]=r[f[p]]||[],r[f[p]]=r[f[p]].concat(d[f[p]])}}return n}(i,e),s="";Object.keys(a).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),s=s+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var o=new window.Blob([s],{type:"text/javascript"});if(t.bare)return o;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/controller/abr-controller.js"),i=r("./src/controller/buffer-controller.js"),a=r("./src/controller/cap-level-controller.js"),s=r("./src/controller/fps-controller.js"),o=r("./src/utils/xhr-loader.js"),l=r("./src/controller/audio-track-controller.js"),u=r("./src/controller/audio-stream-controller.js"),c=r("./src/utils/cues.js"),d=r("./src/controller/timeline-controller.js"),f=r("./src/controller/subtitle-track-controller.js"),p=r("./src/controller/subtitle-stream-controller.js"),h=r("./src/controller/eme-controller.js"),g=r("./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:o.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:a.default,fpsController:s.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=p.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=f.default,t.hlsDefaultConfig.timelineController=d.default,t.hlsDefaultConfig.cueHandler=c,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=u.default,t.hlsDefaultConfig.audioTrackController=l.default,t.hlsDefaultConfig.emeController=h.default},"./src/controller/abr-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/buffer-helper.js"),o=r("./src/errors.js"),l=r("./src/utils/logger.js"),u=r("./src/utils/ewma-bandwidth-estimator.js"),c=window.performance,d=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return n(r,t),r.prototype.destroy=function(){this.clearTimer(),a.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=t.level,a=void 0,s=void 0;r.levels[i].details.live?(a=n.abrEwmaFastLive,s=n.abrEwmaSlowLive):(a=n.abrEwmaFastVoD,s=n.abrEwmaSlowVoD),this._bwEstimator=new u.default(r,s,a,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,a=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=n.stats;if(t&&o&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var u=c.now()-o.trequest,d=Math.abs(t.playbackRate);if(u>500*r.duration/d){var f=e.levels,p=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/u),h=f[r.level],g=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,m=o.total?o.total:Math.max(o.loaded,Math.round(r.duration*g/8)),v=t.currentTime,y=(m-o.loaded)/p,_=(s.BufferHelper.bufferInfo(t,v,e.config.maxBufferHole).end-v)/d;if(_<2*r.duration/d&&y>_){var b=void 0,A=void 0;for(A=r.level-1;A>a;A--){var E=f[A].realBitrate?Math.max(f[A].realBitrate,f[A].bitrate):f[A].bitrate;if((b=r.duration*E/(6.4*p))<_)break}b<y&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+A+":fragLoadedDelay["+A+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+_.toFixed(1)),e.nextLoadLevel=A,this._bwEstimator.sample(u,o.loaded),n.abort(),this.clearTimer(),e.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:o}))}}}}},r.prototype.onFragLoaded=function(t){var r=t.frag;if("main"===r.type&&e.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,a=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:a},n.realBitrate=Math.round(8*i/a)}if(t.frag.bitrateTest){var s=t.stats;s.tparsed=s.tbuffered=s.tload,this.onFragBuffered(t)}}},r.prototype.onFragBuffered=function(t){var r=t.stats,n=t.frag;if(!0!==r.aborted&&"main"===n.type&&e.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,u=this.fragCurrent?this.fragCurrent.duration:0,c=a?a.currentTime:0,d=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,p=(s.BufferHelper.bufferInfo(a,c,n.maxBufferHole).end-c)/d,h=this._findBestLevel(o,u,f,i,t,p,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(h>=0)return h;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=u?Math.min(u,n.maxStarvationDelay):n.maxStarvationDelay,m=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(0===p){var y=this.bitrateTestDelay;if(y)g=(u?Math.min(u,n.maxLoadingDelay):n.maxLoadingDelay)-y,l.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),m=v=1}return h=this._findBestLevel(o,u,f,i,t,p+g,m,v,r),Math.max(h,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(e,t,r,n,i,a,s,o,u){for(var c=i;c>=n;c--){var d=u[c];if(d){var f=d.details,p=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,g=void 0;g=c<=e?s*r:o*r;var m=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,v=m*p/g;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(g)+"/"+m+"/"+p+"/"+a+"/"+v),g>m&&(!v||h&&!this.bitrateTestDelay||v<a))return c}}return-1},r}(a.default);t.default=d}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/demux/demuxer.js"),o=r("./src/events.js"),l=r("./src/controller/level-helper.js"),u=r("./src/utils/time-ranges.js"),c=r("./src/errors.js"),d=r("./src/utils/logger.js"),f=r("./src/utils/discontinuities.js"),p=r("./src/controller/fragment-tracker.js"),h=r("./src/loader/fragment.js"),g=r("./src/controller/base-stream-controller.js"),m=window.performance,v=function(t){function r(e,r){var n=t.call(this,e,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.AUDIO_TRACKS_UPDATED,o.default.AUDIO_TRACK_SWITCHING,o.default.AUDIO_TRACK_LOADED,o.default.KEY_LOADED,o.default.FRAG_LOADED,o.default.FRAG_PARSING_INIT_SEGMENT,o.default.FRAG_PARSING_DATA,o.default.FRAG_PARSED,o.default.ERROR,o.default.BUFFER_RESET,o.default.BUFFER_CREATED,o.default.BUFFER_APPENDED,o.default.BUFFER_FLUSHED,o.default.INIT_PTS_FOUND)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=g.State.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return n(r,t),r.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,d.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===g.State.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(d.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=g.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=g.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=g.State.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,d.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var t,r,n,s=this.hls,l=s.config;switch(this.state){case g.State.ERROR:case g.State.PAUSED:case g.State.BUFFER_FLUSHING:break;case g.State.STARTING:this.state=g.State.WAITING_TRACK,this.loadedmetadata=!1;break;case g.State.IDLE:var u=this.tracks;if(!u)break;if(!this.media&&(this.startFragRequested||!l.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,h=this.videoBuffer?this.videoBuffer:this.media,v=a.BufferHelper.bufferInfo(c,t,l.maxBufferHole),y=a.BufferHelper.bufferInfo(h,t,l.maxBufferHole),_=v.len,b=v.end,A=this.fragPrevious,E=Math.min(l.maxBufferLength,l.maxMaxBufferLength),S=Math.max(E,y.len),w=this.audioSwitch,T=this.trackId;if((_<S||w)&&T<u.length){if(void 0===(n=u[T].details)){this.state=g.State.WAITING_TRACK;break}if(!w&&this._streamEnded(v,n))return this.hls.trigger(o.default.BUFFER_EOS,{type:"audio"}),void(this.state=g.State.ENDED);var k=n.fragments,x=k.length,P=k[0].start,D=k[x-1].start+k[x-1].duration,C=void 0;if(w)if(n.live&&!n.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),b=0;else if(b=t,n.PTSKnown&&t<P){if(!(v.end>P||v.nextStart))return;d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=P+.05}if(n.initSegment&&!n.initSegment.data)C=n.initSegment;else if(b<=P){if(C=k[0],null!==this.videoTrackCC&&C.cc!==this.videoTrackCC&&(C=f.findFragWithCC(k,this.videoTrackCC)),n.live&&C.loadIdx&&C.loadIdx===this.fragLoadIdx){var L=v.nextStart?v.nextStart:P;return d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(L+.05)),void(this.media.currentTime=L+.05)}}else{var R=void 0,O=l.maxFragLookUpTolerance,I=A?k[A.sn-k[0].sn+1]:void 0,M=function(e){var t=Math.min(O,e.duration);return e.start+e.duration-t<=b?1:e.start-t>b&&e.start?-1:0};b<D?(b>D-O&&(O=0),R=I&&!M(I)?I:i.default.search(k,M)):R=k[x-1],R&&(C=R,P=R.start,A&&C.level===A.level&&C.sn===A.sn&&(C.sn<n.endSN?(C=k[C.sn+1-n.startSN],d.logger.log("SN just loaded, load next one: "+C.sn)):C=null))}C&&(C.encrypted?(d.logger.log("Loading key for "+C.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+T),this.state=g.State.KEY_LOADING,s.trigger(o.default.KEY_LOADING,{frag:C})):(d.logger.log("Loading "+C.sn+", cc: "+C.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+T+", currentTime:"+t+",bufferEnd:"+b.toFixed(3)),this.fragCurrent=C,(w||this.fragmentTracker.getState(C)===p.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(C.sn)&&(this.nextLoadPosition=C.start+C.duration),s.trigger(o.default.FRAG_LOADING,{frag:C}),this.state=g.State.FRAG_LOADING)))}break;case g.State.WAITING_TRACK:(r=this.tracks[this.trackId])&&r.details&&(this.state=g.State.IDLE);break;case g.State.FRAG_LOADING_WAITING_RETRY:var N=m.now(),F=this.retryDate,j=(c=this.media)&&c.seeking;(!F||N>=F||j)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=g.State.IDLE);break;case g.State.WAITING_INIT_PTS:var B=this.videoTrackCC;if(void 0===this.initPTS[B])break;var U=this.waitingFragment;if(U){var q=U.frag.cc;B!==q?(r=this.tracks[this.trackId]).details&&r.details.live&&(d.logger.warn("Waiting fragment CC ("+q+") does not match video track CC ("+B+")"),this.waitingFragment=null,this.state=g.State.IDLE):(this.state=g.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=g.State.IDLE;break;case g.State.STOPPED:case g.State.FRAG_LOADING:case g.State.PARSING:case g.State.PARSED:case g.State.ENDED:}},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onAudioTracksUpdated=function(e){d.logger.log("audio tracks updated"),this.tracks=e.audioTracks},r.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=g.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=g.State.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){var r=t.details,n=t.id,i=this.tracks[n],a=r.totalduration,s=0;if(d.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var o=i.details;o&&r.fragments.length>0?(l.mergeDetails(o,r),s=r.fragments[0].start,r.PTSKnown?d.logger.log("live audio playlist sliding:"+s.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(i.details=r,!this.startFragRequested){if(-1===this.startPosition){var u=r.startTimeOffset;e.isFinite(u)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===g.State.WAITING_TRACK&&(this.state=g.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===g.State.KEY_LOADING&&(this.state=g.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===g.State.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,l=t.level,u=t.sn,c=t.cc,f=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",p=this.stats=e.stats;if("initSegment"===u)this.state=g.State.IDLE,p.tparsed=p.tbuffered=m.now(),i.initSegment.data=e.payload,this.hls.trigger(o.default.FRAG_BUFFERED,{stats:p,frag:t,id:"audio"}),this.tick();else{this.state=g.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new s.default(this.hls,"audio"));var h=this.initPTS[c],v=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,d.logger.log("Demuxing "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+l);this.demuxer.push(e.payload,v,f,null,t,a,!1,h)}else d.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+l),this.waitingFragment=e,this.state=g.State.WAITING_INIT_PTS}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===g.State.PARSING){var n=e.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(o.default.BUFFER_CODECS,n),d.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var s={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.default.BUFFER_APPENDING,s))}this.tick()}}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===g.State.PARSING){var a=this.trackId,s=this.tracks[a],u=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(h.default.ElementaryStreamTypes.AUDIO),d.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),l.updateFragPTSDTS(s.details,n,t.startPTS,t.endPTS);var f=this.audioSwitch,p=this.media,m=!1;if(f&&p)if(p.readyState){var v=p.currentTime;d.logger.log("switching audio track : currentTime:"+v),v>=t.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=g.State.BUFFER_FLUSHING,u.trigger(o.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),m=!0,this.audioSwitch=!1,u.trigger(o.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,u.trigger(o.default.AUDIO_TRACK_SWITCHED,{id:a});var y=this.pendingData;if(!y)return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void u.trigger(o.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&y.push({type:t.type,data:e,parent:"audio",content:"data"})}),!m&&y.length&&(y.forEach(function(e){r.state===g.State.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(o.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===g.State.PARSING&&(this.stats.tparsed=m.now(),this.state=g.State.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==g.State.PARSING&&t!==g.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==g.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=m.now(),r.trigger(o.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("audio buffered : "+u.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(o.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=g.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag;if(!r||"audio"===r.type)switch(t.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;if(i?i++:i=1,i<=(l=this.config).fragLoadingMaxRetry){this.fragLoadError=i;var s=Math.min(Math.pow(2,i-1)*l.fragLoadingRetryDelay,l.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+s+" ms"),this.retryDate=m.now()+s,this.state=g.State.FRAG_LOADING_WAITING_RETRY}else d.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=g.State.ERROR}break;case c.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case c.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==g.State.ERROR&&(this.state=t.fatal?g.State.ERROR:g.State.IDLE,d.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case c.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===g.State.PARSING||this.state===g.State.PARSED)){var l,u=this.mediaBuffer,f=this.media.currentTime;if(u&&a.BufferHelper.isBuffered(u,f)&&a.BufferHelper.isBuffered(u,f+.5))(l=this.config).maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+l.maxMaxBufferLength+"s")),this.state=g.State.IDLE;else d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=g.State.BUFFER_FLUSHING,this.hls.trigger(o.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(o.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=g.State.PARSED):(this.state=g.State.IDLE,this.fragPrevious=null,this.tick())},r}(g.default);t.default=v}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/task-loop.js"),s=r("./src/utils/logger.js"),o=r("./src/errors.js"),l=function(e){function t(t){var r=e.call(this,t,i.default.MANIFEST_LOADING,i.default.MANIFEST_PARSED,i.default.AUDIO_TRACK_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.LEVEL_LOADED,i.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return n(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(i.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)s.logger.warn("Invalid audio track id:",e.id);else{if(s.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===o.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(s.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)s.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)s.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];s.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,a=t.id;this.hls.trigger(i.default.AUDIO_TRACK_SWITCHING,{id:a,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var a=t.filter(function(e){return e.default});a.length?t=a:s.logger.warn("No default audio tracks defined")}var l=!1,u=function(){t.forEach(function(t){l||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),l=!0)})};u(),l||(n=null,u()),l||(s.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;s.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(i.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,s.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;s.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var a=e,o=0;o<this.tracks.length;o++){if(!this.trackIdBlacklist[o])if(this.tracks[o].name===r){a=o;break}}a!==e?(s.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):s.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},t}(a.default);t.default=l},"./src/controller/base-stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/task-loop.js"),a=r("./src/controller/fragment-tracker.js"),s=r("./src/utils/buffer-helper.js"),o=r("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var l=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return n(i,r),i.prototype.doTick=function(){},i.prototype.startLoad=function(){},i.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=t.State.STOPPED},i.prototype._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===a.FragmentState.PARTIAL||i===a.FragmentState.OK}return!1},i.prototype.onMediaSeeking=function(){var r=this.config,n=this.media,i=this.mediaBuffer,a=this.state,l=n?n.currentTime:null,u=s.BufferHelper.bufferInfo(i||n,l,this.config.maxBufferHole);if(e.isFinite(l)&&o.logger.log("media seeking to "+l.toFixed(3)),a===t.State.FRAG_LOADING){var c=this.fragCurrent;if(0===u.len&&c){var d=r.maxFragLookUpTolerance,f=c.start-d,p=c.start+c.duration+d;l<f||l>p?(c.loader&&(o.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),c.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):o.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else a===t.State.ENDED&&(0===u.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);n&&(this.lastCurrentTime=l),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=l),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.prototype.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},i.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null},i}(i.default);t.default=l}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),o=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js").getMediaSource(),u=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return n(r,t),r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){s.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(s.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,s.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new l;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){s.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){s.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):s.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){s.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){s.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){s.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0),n={},a=this.sourceBuffer;for(var o in a)n[o]=a[o].buffered;this.hls.trigger(i.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(e){s.logger.error("sourceBuffer error:",e),this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach(function(r){t.pendingTracks[r]=e[r]});var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var a=e[n],l=a.levelCodec||a.codec,u=a.container+";codecs="+l;s.logger.log("creating sourceBuffer("+u+")");try{var c=t[n]=r.addSourceBuffer(u);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:l,container:a.container},a.buffer=c}catch(e){s.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:u})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){s.logger.error("sourceBuffer error:",e.event),this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,s.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}s.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){s.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),a=n.length-1;a>=0;a--){var s=n[a],o=r[s].buffered;o.length>0&&i>o.start(0)&&this.removeBufferRange(s,r[s],0,i)}}},r.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var t,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(s.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(s.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){s.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(i.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this.hls,t=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(this.media.error)return this.segments=[],void s.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var n=t.shift();try{var a=r[n.type];a?a.updating?t.unshift(n):(a.ended=!1,this.parent=n.parent,a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(r){s.logger.error("error while trying to append buffer:"+r.message),t.unshift(n);var l={type:o.ErrorTypes.MEDIA_ERROR,parent:n.parent};22!==r.code?(this.appendError?this.appendError++:this.appendError=1,l.details=o.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(s.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],l.fatal=!0,e.trigger(i.default.ERROR,l)):(l.fatal=!1,e.trigger(i.default.ERROR,l))):(this.segments=[],l.details=o.ErrorDetails.BUFFER_FULL_ERROR,l.fatal=!1,e.trigger(i.default.ERROR,l))}}}},r.prototype.flushBuffer=function(e,t,r){var n,i=this.sourceBuffer;if(Object.keys(i).length){if(s.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var a in i)if(!r||a===r){if((n=i[a]).ended=!1,n.updating)return s.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(a,n,e,t))return this.flushBufferCounter++,!1}}else s.logger.warn("abort flushing too many retries");s.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),o=t.buffered.end(i),l=Math.max(a,r),u=Math.min(o,n);if(Math.min(u,o)-l>.5)return s.logger.log("sb remove "+e+" ["+l+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),t.remove(l,u),!0}}catch(e){s.logger.warn("removeBufferRange failed",e)}return!1},r}(a.default);t.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=function(t){function r(r){var n=t.call(this,r,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_CODECS,i.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=e.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return n(r,t),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(e){this.levels=e.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return r.isLevelAllowed(i,t.restrictedLevels)&&i<=e});return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=function(e,t){return!t||(e.width!==t.width||e.height!==t.height)},i=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=r)&&n(s,e[a+1])){i=a;break}}return i},r}(r("./src/event-handler.js").default);t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/event-handler.js"),a=r("./src/events.js"),s=r("./src/errors.js"),o=r("./src/utils/logger.js"),l=window.XMLHttpRequest,u="com.widevine.alpha",c="com.microsoft.playready",d=function(e){function t(t){var r=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=t.config.widevineLicenseUrl,r._licenseXhrSetup=t.config.licenseXhrSetup,r._emeEnabled=t.config.emeEnabled,r._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return n(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case u:t=this._widevineLicenseUrl;break;default:t=null}return t||(o.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,r){var n=this,i=function(e,t,r){switch(e){case u:return function(e,t,r){var n={videoCapabilities:[]};return t.forEach(function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[n]}(0,r);default:throw Error("Unknown key-system: "+e)}}(e,0,r);i?(o.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then(function(t){n._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){o.logger.error('Failed to obtain key-system "'+e+'" access:',t)})):o.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e)},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this;o.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then(function(t){n.mediaKeys=t,o.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()}).catch(function(e){o.logger.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;o.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(r){t._onKeySessionMessage(e,r.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){o.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){o.logger.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){o.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return o.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});o.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return o.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)o.logger.warn("Key-Session already initialized but requested again");else{var r=t.mediaKeysSession;r||(o.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;o.logger.log('Generating key-session request for "'+n+'" init data type'),t.mediaKeysSessionInitialized=!0,r.generateRequest(n,i).then(function(){o.logger.debug("Key-session generation succeeded")}).catch(function(t){o.logger.error("Error generating key-session request:",t),e.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},t.prototype._createLicenseXhr=function(e,t,r){var n=new l,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(t){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){return o.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},t.prototype._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,o.logger.log("License request succeeded"),n(e.response);else{if(o.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return o.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(r,n)}this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var r;return e.mediaKeySystemDomain===c?o.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===u?r=t:o.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),r},t.prototype._requestLicense=function(e,t){o.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return o.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);o.logger.log("Sending license request to URL: "+n),i.send(this._generateLicenseRequestChallenge(r,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),r=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(u,t,r)}},t}(i.default);t.default=d},"./src/controller/fps-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),o=window.performance,l=function(e){function t(t){return e.call(this,t,i.default.MEDIA_ATTACHING)||this}return n(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,r){var n=o.now();if(t){if(this.lastTime){var a=n-this.lastTime,l=r-this.lastDroppedFrames,u=t-this.lastDecodedFrames,c=1e3*l/a,d=this.hls;if(d.trigger(i.default.FPS_DROP,{currentDropped:l,currentDecoded:u,totalDroppedFrames:r}),c>0&&l>d.config.fpsDroppedMonitoringThreshold*u){var f=d.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=f)&&(f-=1,d.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:d.currentLevel}),d.autoLevelCapping=f,d.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(a.default);t.default=l},"./src/controller/fragment-finders.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/binary-search.js");function i(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function a(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>e}t.findFragmentByPDT=function(t,r,n){if(!Array.isArray(t)||!t.length||!e.isFinite(r))return null;if(r<t[0].programDateTime)return null;if(r>=t[t.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<t.length;++i){var s=t[i];if(a(r,n,s))return s}return null},t.findFragmentByPTS=function(e,t,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var s=e?t[e.sn-t[0].sn+1]:null;return s&&!i(r,a,s)?s:n.default.search(t,i.bind(null,r,a))},t.fragmentWithinToleranceTest=i,t.pdtWithinToleranceTest=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/event-handler.js"),a=r("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var s=function(r){function s(e){var t=r.call(this,e,a.default.BUFFER_APPENDED,a.default.FRAG_BUFFERED,a.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return n(s,r),s.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,i.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},s.prototype.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},s.prototype.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach(function(a){var s=i.fragments[a];if(!0===s.buffered){var o=s.range[e];if(o){r=o.time;for(var l=0;l<r.length;l++)if(n=r[l],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(s.body);break}}}})},s.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},s.prototype.getBufferedTimes=function(e,t,r){for(var n,i,a=[],s=!1,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=n&&t<=i){a.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))});break}if(e<i&&t>n)a.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))}),s=!0;else if(t<=n)break}return{time:a,partial:s}},s.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},s.prototype.getPartialFragment=function(e){var t,r,n,i=this,a=null,s=0;return Object.keys(this.fragments).forEach(function(o){var l=i.fragments[o];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),s<=t&&(a=l.body,s=t)))}),a},s.prototype.getState=function(e){var r=this.getFragmentKey(e),n=this.fragments[r],i=t.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},s.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},s.prototype.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},s.prototype.onFragLoaded=function(t){var r=t.frag;e.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},s.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)})},s.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},s.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},s.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},s.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},s}(i.default);t.FragmentTracker=s}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/buffer-helper.js"),i=r("./src/errors.js"),a=r("./src/events.js"),s=r("./src/utils/logger.js"),o=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this.config,i=this.media,a=i.currentTime,o=window.performance.now();if(a!==e)return this.stallReported&&(s.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(o-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&n.BufferHelper.isBuffered(i,a))){var l=o-this.stalled,u=n.BufferHelper.bufferInfo(i,a,r.maxBufferHole);this.stalled?(l>=1e3&&this._reportStall(u.len),this._tryFixBufferStall(u,l)):this.stalled=o}},e.prototype._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media.currentTime,a=n.getPartialFragment(i);a&&this._trySkipBufferHole(a),e.len>.5&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,s.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,r=this.media,n=r.currentTime,o=0,l=0;l<r.buffered.length;l++){var u=r.buffered.start(l);if(n>=o&&n<u)return r.currentTime=Math.max(u,r.currentTime+.1),s.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+r.currentTime),this.stalled=null,void t.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+r.currentTime,frag:e});o=r.buffered.end(l)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,o=(this.nudgeRetry||0)+1;if(this.nudgeRetry=o,o<e.nudgeMaxRetry){var l=n+o*e.nudgeOffset;s.logger.log("adjust currentTime from "+n+" to "+l),r.currentTime=l,t.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else s.logger.error("still stuck in high buffer @"+n+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=o},"./src/controller/id3-track-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/demux/id3.js"),o=r("./src/utils/texttrack-utils.js"),l=function(e){function t(t){var r=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return n(t,e),t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){o.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return o.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=s.default.getID3Frames(r[i].data);if(a){var o=r[i].pts,l=i<r.length-1?r[i+1].pts:t.endPTS;o===l&&(l+=1e-4);for(var u=0;u<a.length;u++){var c=a[u];if(!s.default.isTimeStampFrame(c)){var d=new n(o,l,"");d.value=c,this.id3Track.addCue(d)}}}}},t}(a.default);t.default=l},"./src/controller/level-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,a=r("./src/events.js"),s=r("./src/event-handler.js"),o=r("./src/utils/logger.js"),l=r("./src/errors.js"),u=r("./src/utils/codecs.js"),c=r("./src/controller/level-helper.js"),d=(window.performance,function(e){function t(t){var r=e.call(this,t,a.default.MANIFEST_LOADED,a.default.LEVEL_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.FRAG_LOADED,a.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,r=[],n=[],s={},d=null,f=!1,p=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,f=f||!!e.videoCodec,p=p||!!e.audioCodec,i&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(d=s[e.bitrate])?d.url.push(e.url):(e.url=[e.url],e.urlId=0,s[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(p=!0,c.addGroupId(d||e,"audio",t.AUDIO)),t.SUBTITLES&&c.addGroupId(d||e,"text",t.SUBTITLES))}),f&&p&&(r=r.filter(function(e){return!!e.videoCodec})),r=r.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||u.isCodecSupportedInMp4(t,"audio"))&&(!r||u.isCodecSupportedInMp4(r,"video"))}),e.audioTracks&&(n=e.audioTracks.filter(function(e){return!e.audioCodec||u.isCodecSupportedInMp4(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),r.length>0){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var h=0;h<r.length;h++)if(r[h].bitrate===t){this._firstLevel=h,o.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(a.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:p,video:f,altAudio:n.some(function(e){return!!e.url})})}else this.hls.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){o.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(a.default.LEVEL_SWITCHING,n)}var i=t[e],s=i.details;if(!s||s.live){var u=i.urlId;r.trigger(a.default.LEVEL_LOADING,{url:i.url[u],level:e,id:u})}}else r.trigger(a.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===l.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)}},t.prototype.recoverLevel=function(e,t,r,n){var i,a,s,l=this,u=this.hls.config,c=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return o.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return l.loadLevel()},a),e.levelRetry=!0,this.levelRetryCount++,o.logger.warn("level controller, "+c+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,o.logger.warn("level controller, "+c+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(s=0===t?this._levels.length-1:t-1,o.logger.warn("level controller, "+c+": switch to "+s),this.hls.nextAutoLevel=this.currentLevelIndex=s):n&&(o.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var a=c.computeReloadInterval(i.details,n,e.stats.trequest);o.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},t.prototype.loadLevel=function(){if(o.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];o.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(a.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(s.default));t.default=d},"./src/controller/level-helper.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js");function i(t,r,i){var a=t[r],s=t[i],o=s.startPTS;e.isFinite(o)?i>r?(a.duration=o-a.start,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):(s.duration=a.start-o,s.duration<0&&n.logger.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):s.start=i>r?a.start+a.duration:Math.max(a.start-s.duration,0)}function a(t,r,n,a,s,o){var l=n;if(e.isFinite(r.startPTS)){var u=Math.abs(r.startPTS-n);e.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(u,r.deltaPTS):r.deltaPTS=u,l=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),a=Math.max(a,r.endPTS),s=Math.min(s,r.startDTS),o=Math.max(o,r.endDTS)}var c=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=l,r.endPTS=a,r.startDTS=s,r.endDTS=o,r.duration=a-n;var d,f,p,h=r.sn;if(!t||h<t.startSN||h>t.endSN)return 0;for(d=h-t.startSN,(f=t.fragments)[d]=r,p=d;p>0;p--)i(f,p,p-1);for(p=d;p<f.length-1;p++)i(f,p,p+1);return t.PTSKnown=!0,c}function s(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,s=n;s<=i;s++){var o=e.fragments[a+s],l=t.fragments[s];if(!o||!l)break;r(o,l,s)}}function o(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var a=0;a<i.length;a++)i[a].start+=n[r].start}t.addGroupId=function(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}},t.updatePTS=i,t.updateFragPTSDTS=a,t.mergeDetails=function(t,r){r.initSegment&&t.initSegment&&(r.initSegment=t.initSegment);var i,l=0;if(s(t,r,function(t,n){l=t.cc-n.cc,e.isFinite(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,i=n),r.PTSKnown=!0}),r.PTSKnown){if(l){n.logger.log("discontinuity sliding from playlist, take drift into account");for(var u=r.fragments,c=0;c<u.length;c++)u[c].cc+=l}i?a(r,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):o(t,r),r.PTSKnown=t.PTSKnown}},t.mergeSubtitlePlaylists=function(e,t,r){void 0===r&&(r=0);var n=-1;s(e,t,function(e,t,r){t.start=e.start,n=r});var i=t.fragments;if(n<0)i.forEach(function(e){e.start+=r});else for(var a=n+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration},t.mapFragmentIntersection=s,t.adjustSliding=o,t.computeReloadInterval=function(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/demux/demuxer.js"),o=r("./src/events.js"),l=r("./src/controller/fragment-tracker.js"),u=r("./src/loader/fragment.js"),c=r("./src/loader/playlist-loader.js"),d=r("./src/controller/level-helper.js"),f=r("./src/utils/time-ranges.js"),p=r("./src/errors.js"),h=r("./src/utils/logger.js"),g=r("./src/utils/discontinuities.js"),m=r("./src/controller/fragment-finders.js"),v=r("./src/controller/gap-controller.js"),y=r("./src/controller/base-stream-controller.js"),_=function(t){function r(e,r){var n=t.call(this,e,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.MANIFEST_LOADING,o.default.MANIFEST_PARSED,o.default.LEVEL_LOADED,o.default.KEY_LOADED,o.default.FRAG_LOADED,o.default.FRAG_LOAD_EMERGENCY_ABORTED,o.default.FRAG_PARSING_INIT_SEGMENT,o.default.FRAG_PARSING_DATA,o.default.FRAG_PARSED,o.default.ERROR,o.default.AUDIO_TRACK_SWITCHING,o.default.AUDIO_TRACK_SWITCHED,o.default.BUFFER_CREATED,o.default.BUFFER_APPENDED,o.default.BUFFER_FLUSHED)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=y.State.STOPPED,n.stallReported=!1,n.gapController=null,n}return n(r,t),r.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(h.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=y.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=y.State.STOPPED},r.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.prototype.doTick=function(){switch(this.state){case y.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case y.State.IDLE:this._doTickIdle();break;case y.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=y.State.IDLE);break;case y.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(h.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=y.State.IDLE);break;case y.State.ERROR:case y.State.STOPPED:case y.State.FRAG_LOADING:case y.State.PARSING:case y.State.PARSED:case y.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,s=this.levels[i];if(s){var l,u=s.bitrate;l=u?Math.max(8*t.maxBufferSize/u,t.maxBufferLength):t.maxBufferLength,l=Math.min(l,t.maxMaxBufferLength);var c=a.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),d=c.len;if(!(d>=l)){h.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=s.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=y.State.WAITING_LEVEL;else{if(this._streamEnded(c,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(o.default.BUFFER_EOS,p),void(this.state=y.State.ENDED)}this._fetchPayloadOrEos(n,c,f)}}}}},r.prototype._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,a=r.fragments,s=a.length;if(0!==s){var o,l=a[0].start,u=a[s-1].start+a[s-1].duration,c=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(s<d)return void h.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+d);if(null===(o=this._ensureFragmentAtLivePoint(r,c,l,u,n,a,s)))return}else c<l&&(o=a[0]);o||(o=this._findFragment(l,n,s,a,c,u,r)),o&&(o.encrypted?(h.logger.log("Loading key for "+o.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(o)):(h.logger.log("Loading "+o.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(o)))}},r.prototype._ensureFragmentAtLivePoint=function(e,t,r,n,a,s,o){var l,u=this.hls.config,c=this.media,d=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-u.maxFragLookUpTolerance,n-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);h.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,c&&c.readyState&&c.duration>f&&(c.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>n&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(a)if(e.hasProgramDateTime)h.logger.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),l=m.findFragmentByPDT(s,a.endProgramDateTime,u.maxFragLookUpTolerance);else{var p=a.sn+1;if(p>=e.startSN&&p<=e.endSN){var g=s[p-e.startSN];a.cc===g.cc&&(l=g,h.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=i.default.search(s,function(e){return a.cc-e.cc}))&&h.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=s[Math.min(o-1,Math.round(o/2))],h.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},r.prototype._findFragment=function(e,t,r,n,i,a,s){var o,l=this.hls.config;if(i<a){var u=i>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;o=m.findFragmentByPTS(t,n,i,u)}else o=n[r-1];if(o){var c=o.sn-s.startSN,d=t&&o.level===t.level,f=n[c-1],p=n[c+1];if(t&&o.sn===t.sn)if(d&&!o.backtracked)if(o.sn<s.endSN){var g=t.deltaPTS;g&&g>l.maxBufferHole&&t.dropped&&c?(o=f,h.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(o=p,h.logger.log("SN just loaded, load next one: "+o.sn,o))}else o=null;else o.backtracked&&(p&&p.backtracked?(h.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+o.sn+". Loading fragment "+p.sn),o=p):(h.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),o.dropped=0,f?(o=f).backtracked=!0:c&&(o=null)))}return o},r.prototype._loadKey=function(e){this.state=y.State.KEY_LOADING,this.hls.trigger(o.default.KEY_LOADING,{frag:e})},r.prototype._loadFragment=function(t){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===l.FragmentState.NOT_LOADED||r===l.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(o.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new s.default(this.hls,"main")),this.state=y.State.FRAG_LOADING):r===l.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("main stream:"+t+"->"+e),this.hls.trigger(o.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,c.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),a.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):a.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(o.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(o.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.prototype.immediateLevelSwitch=function(){if(h.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,r=void 0;t?(r=t.paused,t.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,a.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var r,n=void 0,i=void 0;if((r=this.getBufferedFrag(t.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)n=0;else{var a=this.hls.nextLoadLevel,s=this.levels[a],o=this.fragLastKbps;n=o&&this.fragCurrent?this.fragCurrent.duration*s.bitrate/(1e3*o)+1:0}if((i=this.getBufferedFrag(t.currentTime+n))&&(i=this.followingBufferedFrag(i))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(e,t){this.state=y.State.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(o.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new v.default(r,t,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:void 0;e.isFinite(r)&&h.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){h.logger.log("trigger BUFFER_RESET"),this.hls.trigger(o.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&h.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.prototype.onLevelLoaded=function(t){var r=t.details,n=t.level,i=this.levels[this.levelLastLoaded],a=this.levels[n],s=r.totalduration,l=0;if(h.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+s),r.live){var u=a.details;u&&r.fragments.length>0?(d.mergeDetails(u,r),l=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(l,u),r.PTSKnown&&e.isFinite(l)?h.logger.log("live playlist sliding:"+l.toFixed(3)):(h.logger.log("live playlist - outdated PTS, unknown sliding"),g.alignStream(this.fragPrevious,i,r))):(h.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,g.alignStream(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(a.details=r,this.levelLastLoaded=n,this.hls.trigger(o.default.LEVEL_UPDATED,{details:r,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=r.startTimeOffset;e.isFinite(c)?(c<0&&(h.logger.log("negative start time offset "+c+", count from end of last fragment"),c=l+s+c),h.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):r.live?(this.startPosition=this.computeLivePosition(l,r),h.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===y.State.WAITING_LEVEL&&(this.state=y.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===y.State.KEY_LOADING&&(this.state=y.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,a=e.frag;if(this.state===y.State.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var l=e.stats,u=n[t.level],c=u.details;if(this.bitrateTest=!1,this.stats=l,h.logger.log("Loaded "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level),a.bitrateTest&&r.nextLoadLevel)this.state=y.State.IDLE,this.startFragRequested=!1,l.tparsed=l.tbuffered=window.performance.now(),r.trigger(o.default.FRAG_BUFFERED,{stats:l,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=y.State.IDLE,l.tparsed=l.tbuffered=window.performance.now(),c.initSegment.data=e.payload,r.trigger(o.default.FRAG_BUFFERED,{stats:l,frag:t,id:"main"}),this.tick();else{h.logger.log("Parsing "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level+", cc "+t.cc),this.state=y.State.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(i&&i.seeking)&&(c.PTSKnown||!c.live),f=c.initSegment?c.initSegment.data:[],p=this._getAudioCodec(u);(this.demuxer=this.demuxer||new s.default(this.hls,"main")).push(e.payload,f,p,u.videoCodec,t,c.totalduration,d)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===y.State.PARSING){var n=e.tracks,i=void 0,a=void 0;if(n.audio&&this.altAudio&&delete n.audio,a=n.audio){var s=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===l.indexOf("firefox")&&(s="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==a.container&&(s="mp4a.40.2",h.logger.log("Android: force audio codec to "+s)),a.levelCodec=s,a.id=e.id}for(i in(a=n.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(o.default.BUFFER_CODECS,n),n){a=n[i],h.logger.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var u=a.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.default.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===y.State.PARSING){var a=this.levels[this.level],s=n;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&s.addElementaryStream(u.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&s.addElementaryStream(u.default.ElementaryStreamTypes.VIDEO),h.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(s.dropped=t.dropped,s.dropped)if(s.backtracked)h.logger.warn("Already backtracked on this fragment, appending with the gap",s.sn);else{var l=a.details;if(!l||s.sn!==l.startSN)return h.logger.warn("missing video frame(s), backtracking fragment",s.sn),this.fragmentTracker.removeFragment(s),s.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=y.State.IDLE,this.fragPrevious=s,void this.tick();h.logger.warn("missing video frame(s) on first frag, appending with gap",s.sn)}else s.backtracked=!1;var c=d.updateFragPTSDTS(a.details,s,t.startPTS,t.endPTS,t.startDTS,t.endDTS),f=this.hls;f.trigger(o.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:c,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===y.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,f.trigger(o.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===y.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=y.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var r=!!t.url,n=t.id;if(!r){if(this.mediaBuffer!==this.media){h.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(h.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=y.State.IDLE}var a=this.hls;a.trigger(o.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),a.trigger(o.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(h.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var a in n){var s=n[a];"main"===s.id?(r=a,t=s,"video"===a&&(this.videoBuffer=n[a].buffer)):i=!0}i&&t?(h.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==y.State.PARSING&&t!==y.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==y.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("main buffered : "+f.default.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(o.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=y.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&a.BufferHelper.isBuffered(this.media,this.media.currentTime)&&a.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);h.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=y.State.FRAG_LOADING_WAITING_RETRY}else h.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=y.State.ERROR;break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==y.State.ERROR&&(t.fatal?(this.state=y.State.ERROR,h.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==y.State.WAITING_LEVEL||(this.state=y.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==y.State.PARSING&&this.state!==y.State.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=y.State.IDLE):(h.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,h.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=y.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(u.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=y.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(h.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),r}(y.default);t.default=_}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/utils/logger.js"),s=r("./src/crypt/decrypter.js"),o=r("./src/utils/buffer-helper.js"),l=r("./src/controller/fragment-finders.js"),u=r("./src/controller/fragment-tracker.js"),c=r("./src/controller/base-stream-controller.js"),d=r("./src/controller/level-helper.js"),f=window.performance,p=function(e){function t(t,r){var n=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.ERROR,i.default.KEY_LOADED,i.default.FRAG_LOADED,i.default.SUBTITLE_TRACKS_UPDATED,i.default.SUBTITLE_TRACK_SWITCH,i.default.SUBTITLE_TRACK_LOADED,i.default.SUBTITLE_FRAG_PROCESSED,i.default.LEVEL_UPDATED)||this;return n.fragmentTracker=r,n.config=t.config,n.state=c.State.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new s.default(t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(n),n}return n(t,e),t.prototype.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=c.State.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,a=t.start,s=0;s<n.length;s++)if(a>=n[s].start&&a<=n[s].end){i=n[s];break}var o=t.start+t.duration;i?i.end=o:(i={start:a,end:o},n.push(i))}}},t.prototype.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=c.State.IDLE},t.prototype.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=c.State.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=c.State.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;a.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,i=this.tracks,a=i[n];t>=i.length||t!==n||!a||(r.live&&d.mergeSubtitlePlaylists(a.details,r,this.lastAVStart),a.details=r,this.setInterval(500))},t.prototype.onKeyLoaded=function(){this.state===c.State.KEY_LOADING&&(this.state=c.State.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,a=this.hls;if(this.state===c.State.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var s=f.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=f.now();a.trigger(i.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:s,tdecrypt:t}})})}},t.prototype.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},t.prototype.doTick=function(){if(this.media)switch(this.state){case c.State.IDLE:var e=this,t=e.config,r=e.currentTrackId,n=e.fragmentTracker,s=e.media,d=e.tracks;if(!d||!d[r]||!d[r].details)break;var f=t.maxBufferHole,p=t.maxFragLookUpTolerance,h=Math.min(t.maxBufferLength,t.maxMaxBufferLength),g=o.BufferHelper.bufferedInfo(this._getBuffered(),s.currentTime,f),m=g.end,v=g.len,y=d[r].details,_=y.fragments,b=_.length,A=_[b-1].start+_[b-1].duration;if(v>h)return;var E=void 0,S=this.fragPrevious;m<A?(S&&y.hasProgramDateTime&&(E=l.findFragmentByPDT(_,S.endProgramDateTime,p)),E||(E=l.findFragmentByPTS(S,_,m,p))):E=_[b-1],E&&E.encrypted?(a.logger.log("Loading key for "+E.sn),this.state=c.State.KEY_LOADING,this.hls.trigger(i.default.KEY_LOADING,{frag:E})):E&&n.getState(E)===u.FragmentState.NOT_LOADED&&(this.fragCurrent=E,this.state=c.State.FRAG_LOADING,this.hls.trigger(i.default.FRAG_LOADING,{frag:E}))}else this.state=c.State.IDLE},t.prototype.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t.prototype.onMediaSeeking=function(){this.fragPrevious=null},t}(c.default);t.SubtitleStreamController=p},"./src/controller/subtitle-track-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),o=r("./src/controller/level-helper.js"),l=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.MANIFEST_LOADED,i.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r}return n(r,t),r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},r.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(i.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},r.prototype.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this.trackId,a=this.tracks,l=a[i];if(r>=a.length||r!==i||!l||this.stopped)this._clearReloadTimer();else if(s.logger.log("subtitle track "+r+" loaded"),n.live){var u=o.computeReloadInterval(l.details,n,e.stats.trequest);s.logger.log("Reloading live subtitle playlist in "+u+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},u)}else this._clearReloadTimer()},r.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},Object.defineProperty(r.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),r.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(s.logger.log("Loading subtitle track "+e),r.trigger(i.default.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},r.prototype._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=u(t.textTracks);if(-1===e)[].slice.call(i).forEach(function(e){e.mode="disabled"});else{var a=i[n];a&&(a.mode="disabled")}var s=i[e];s&&(s.mode=r?"showing":"hidden")}},r.prototype._setSubtitleTrackInternal=function(t){var r=this.hls,n=this.tracks;!e.isFinite(t)||t<-1||t>=n.length||(this.trackId=t,s.logger.log("Switching to subtitle track "+t),r.trigger(i.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},r.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=u(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},r}(a.default);function u(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}t.default=l}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/timeline-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/cea-608-parser.js"),o=r("./src/utils/output-filter.js"),l=r("./src/utils/webvtt-parser.js"),u=r("./src/utils/logger.js"),c=r("./src/utils/texttrack-utils.js");function d(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function f(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}var p=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_USERDATA,i.default.FRAG_DECRYPTED,i.default.MANIFEST_LOADING,i.default.MANIFEST_LOADED,i.default.FRAG_LOADED,i.default.LEVEL_SWITCHING,i.default.INIT_PTS_FOUND)||this;if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new o.default(r,"textTrack1"),a=new o.default(r,"textTrack2");r.cea608Parser=new s.default(0,n,a)}return r}return n(r,t),r.prototype.addCues=function(e,t,r,n){for(var i=this.cueRanges,a=!1,s=i.length;s--;){var o=i[s],l=f(o[0],o[1],t,r);if(l>=0&&(o[0]=Math.min(o[0],t),o[1]=Math.max(o[1],r),a=!0,l/(r-t)>.5))return}a||i.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},r.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach(function(e){t.onFragLoaded(e)})}},r.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],r=t.label,n=t.languageCode,i=this.captionsTracks;if(!i[e]){var a=this.getExistingTrack(e);if(a)i[e]=a,c.clearCurrentCues(i[e]),c.sendAddTrackEvent(i[e],this.media);else{var s=this.createTextTrack("captions",r,n);s&&(s[e]=!0,i[e]=s)}}},r.prototype.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){c.clearCurrentCues(e[t]),delete e[t]})},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)c.clearCurrentCues(t[r])}},r.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var i;if(n<r.length){for(var a=null,s=0;s<r.length;s++)if(d(r[s],e)){a=r[s];break}a&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)})}},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(t){var r=t.frag,n=t.payload;if("main"===r.type){var a=r.sn;if(a!==this.lastSn+1){var s=this.cea608Parser;s&&s.reset()}this.lastSn=a}else if("subtitle"===r.type)if(n.byteLength){if(!e.isFinite(this.initPTS[r.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var o=r.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(r,n)}else this.hls.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},r.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var n=this.textTracks,a=this.hls;l.default.parse(t,this.initPTS[e.cc],r,e.cc,function(t){var r=n[e.level];"disabled"!==r.mode?(t.forEach(function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch(n){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}}),a.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):a.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){u.logger.log("Failed to parse VTT cue: "+t),a.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},r.prototype.onFragDecrypted=function(t){var r=t.payload,n=t.frag;if("subtitle"===n.type){if(!e.isFinite(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(n,r)}},r.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},r.prototype.extractCea608Data=function(e){for(var t,r,n,i=31&e[0],a=2,s=[],o=0;o<i;o++)t=e[a++],r=127&e[a++],n=127&e[a++],0===r&&0===n||0!=(4&t)&&0===(3&t)&&(s.push(r),s.push(n));return s},r}(a.default);t.default=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=n},"./src/crypt/aes-decryptor.js":function(e,t,r){"use strict";function n(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=n;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],f=new Uint32Array(256),p=0,h=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=h^h<<1^h<<2^h<<3^h<<4;m=m>>>8^255&m^99,e[p]=m,t[m]=p;var v=f[p],y=f[v],_=f[y],b=257*f[m]^16843008*m;n[p]=b<<24|b>>>8,i[p]=b<<16|b>>>16,a[p]=b<<8|b>>>24,s[p]=b,b=16843009*_^65537*y^257*v^16843008*p,l[m]=b<<24|b>>>8,u[m]=b<<16|b>>>16,c[m]=b<<8|b>>>24,d[m]=b,p?(p=v^f[f[f[_^v]]],h^=f[f[h]]):p=h=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,s,o,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),f=this.sBox,p=this.rcon,h=this.invSubMix,g=h[0],m=h[1],v=h[2],y=h[3];for(a=0;a<u;a++)a<i?o=c[a]=t[a]:(l=o,a%i==0?(l=f[(l=l<<8|l>>>24)>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=p[a/i|0]<<24):i>6&&a%i==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),c[a]=o=(c[a-i]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?c[a]:c[a-4],d[s]=s<4||a<=4?l:g[f[l>>>24]]^m[f[l>>>16&255]]^v[f[l>>>8&255]]^y[f[255&l]],d[s]=d[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,i){for(var a,s,o,l,u,c,d,f,p,h,g,m,v,y,_=this.keySize+6,b=this.invKeySchedule,A=this.invSBox,E=this.invSubMix,S=E[0],w=E[1],T=E[2],k=E[3],x=this.uint8ArrayToUint32Array_(r),P=x[0],D=x[1],C=x[2],L=x[3],R=new Int32Array(e),O=new Int32Array(R.length),I=this.networkToHostOrderSwap;t<R.length;){for(p=I(R[t]),h=I(R[t+1]),g=I(R[t+2]),m=I(R[t+3]),u=p^b[0],c=m^b[1],d=g^b[2],f=h^b[3],v=4,y=1;y<_;y++)a=S[u>>>24]^w[c>>16&255]^T[d>>8&255]^k[255&f]^b[v],s=S[c>>>24]^w[d>>16&255]^T[f>>8&255]^k[255&u]^b[v+1],o=S[d>>>24]^w[f>>16&255]^T[u>>8&255]^k[255&c]^b[v+2],l=S[f>>>24]^w[u>>16&255]^T[c>>8&255]^k[255&d]^b[v+3],u=a,c=s,d=o,f=l,v+=4;a=A[u>>>24]<<24^A[c>>16&255]<<16^A[d>>8&255]<<8^A[255&f]^b[v],s=A[c>>>24]<<24^A[d>>16&255]<<16^A[f>>8&255]<<8^A[255&u]^b[v+1],o=A[d>>>24]<<24^A[f>>16&255]<<16^A[u>>8&255]<<8^A[255&c]^b[v+2],l=A[f>>>24]<<24^A[u>>16&255]<<16^A[c>>8&255]<<8^A[255&d]^b[v+3],v+=3,O[t]=I(a^P),O[t+1]=I(l^D),O[t+2]=I(o^C),O[t+3]=I(s^L),P=p,D=h,C=g,L=m,t+=4}return i?n(O.buffer):O.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/aes-crypto.js"),i=r("./src/crypt/fast-aes-key.js"),a=r("./src/crypt/aes-decryptor.js"),s=r("./src/errors.js"),o=r("./src/utils/logger.js"),l=r("./src/events.js"),u=r("./src/utils/get-self-scope.js").getSelfScope(),c=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=u.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,s){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a.default),u.expandKey(t),s(u.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(o.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(c,t)),this.fastAesKey.expandKey().then(function(i){new n.default(c,r).decrypt(e,i).catch(function(n){l.onWebCryptoError(n,e,t,r,s)}).then(function(e){s(e)})}).catch(function(n){l.onWebCryptoError(n,e,t,r,s)})}},e.prototype.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(o.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(o.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/crypt/fast-aes-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=n},"./src/demux/aacdemuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/utils/logger.js"),a=r("./src/demux/id3.js"),s=function(){function t(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(a.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(n.probe(e,t))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,r,s,o){for(var l=this._audioTrack,u=a.default.getID3Data(t,0)||[],c=a.default.getTimeStamp(u),d=e.isFinite(c)?90*c:9e4*r,f=0,p=d,h=t.length,g=u.length,m=[{pts:p,dts:p,data:u}];g<h-1;)if(n.isHeader(t,g)&&g+5<h){n.initTrackConfig(l,this.observer,t,g,l.manifestCodec);var v=n.appendFrame(l,t,g,d,f);if(!v){i.logger.log("Unable to parse AAC frame");break}g+=v.length,p=v.sample.pts,f++}else a.default.isHeader(t,g)?(u=a.default.getID3Data(t,g),m.push({pts:p,dts:p,data:u}),g+=u.length):g++;this.remuxer.remux(l,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},r,s,o)},t.prototype.destroy=function(){},t}();t.default=s}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),a=r("./src/events.js");function s(e,t,r,s){var o,l,u,c,d,f=navigator.userAgent.toLowerCase(),p=s,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>h.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+s+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+h[l]+"Hz],channelConfig:"+c),/firefox/i.test(f)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==f.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&l>=6?u=l-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(f))||!s&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:p};e.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function o(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e){return 9216e4/e}function d(e,t,r,n,i){var a,s,o=e.length;if(a=l(e,t),s=u(e,t),(s-=a)>0&&t+a+s<=o)return{headerLength:a,frameLength:s,stamp:r+n*i}}t.getAudioConfig=s,t.isHeaderPattern=o,t.getHeaderLength=l,t.getFullFrameLength=u,t.isHeader=function(e,t){return!!(t+1<e.length&&o(e,t))},t.probe=function(e,t){if(t+1<e.length&&o(e,t)){var r=l(e,t);t+5<e.length&&(r=u(e,t));var n=t+r;if(n===e.length||n+1<e.length&&o(e,n))return!0}return!1},t.initTrackConfig=function(e,t,r,i,a){if(!e.samplerate){var o=s(t,r,i,a);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,n.logger.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}},t.getFrameDuration=c,t.parseFrameHeader=d,t.appendFrame=function(e,t,r,n,i){var a=d(t,r,n,i,c(e.samplerate));if(a){var s=a.stamp,o=a.headerLength,l=a.frameLength,u={unit:t.subarray(r+o,r+o+l),pts:s,dts:s};return e.samples.push(u),e.len+=l,{sample:u,length:l+o}}}},"./src/demux/demuxer-inline.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/crypt/decrypter.js"),o=r("./src/demux/aacdemuxer.js"),l=r("./src/demux/mp4demuxer.js"),u=r("./src/demux/tsdemuxer.js"),c=r("./src/demux/mp3demuxer.js"),d=r("./src/remux/mp4-remuxer.js"),f=r("./src/remux/passthrough-remuxer.js"),p=r("./src/utils/get-self-scope.js"),h=r("./src/utils/logger.js"),g=p.getSelfScope();try{n=g.performance.now.bind(g.performance)}catch(e){h.logger.debug("Unable to use Performance API on this environment"),n=g.Date.now}var m=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,a,o,l,u,c,d,f,p,h){var g=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var m=this.decrypter;null==m&&(m=this.decrypter=new s.default(this.observer,this.config));var v=n();m.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var s=n();g.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:s}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,o,l,u,c,d,f,p,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,o,l,u,c,d,f,p,h)},e.prototype.pushDecrypted=function(e,t,r,n,s,p,h,g,m,v,y,_){var b=this.demuxer;if(!b||(h||g)&&!this.probe(e)){for(var A=this.observer,E=this.typeSupported,S=this.config,w=[{demux:u.default,remux:d.default},{demux:l.default,remux:f.default},{demux:o.default,remux:d.default},{demux:c.default,remux:d.default}],T=0,k=w.length;T<k;T++){var x=w[T],P=x.demux.probe;if(P(e)){var D=this.remuxer=new x.remux(A,S,E,this.vendor);b=new x.demux(A,D,S,E),this.probe=P;break}}if(!b)return void A.trigger(i.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=b}var C=this.remuxer;(h||g)&&(b.resetInitSegment(r,n,s,v),C.resetInitSegment()),h&&(b.resetTimeStamp(_),C.resetTimeStamp(_)),"function"==typeof b.setDecryptData&&b.setDecryptData(t),b.append(e,p,m,y)},e}();t.default=m},"./src/demux/demuxer-worker.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/demuxer-inline.js"),i=r("./src/events.js"),a=r("./src/utils/logger.js"),s=r("./node_modules/node-libs-browser/node_modules/events/events.js");t.default=function(e){var t=new s.EventEmitter;t.trigger=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(i){var s=i.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);e.demuxer=new n.default(t,s.typeSupported,o,s.vendor),a.enableLogs(o.debug),r("init",null);break;case"demux":e.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)})}},"./src/demux/demuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/webworkify-webpack/index.js"),i=r("./src/events.js"),a=r("./src/demux/demuxer-inline.js"),s=r("./src/utils/logger.js"),o=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js"),u=r("./src/utils/get-self-scope.js"),c=r("./src/observer.js"),d=u.getSelfScope(),f=l.getMediaSource(),p=function(){function t(e,t){var r=this;this.hls=e,this.id=t;var l=this.observer=new c.Observer,u=e.config,p=function(t,n){(n=n||{}).frag=r.frag,n.id=r.id,e.trigger(t,n)};l.on(i.default.FRAG_DECRYPTED,p),l.on(i.default.FRAG_PARSING_INIT_SEGMENT,p),l.on(i.default.FRAG_PARSING_DATA,p),l.on(i.default.FRAG_PARSED,p),l.on(i.default.ERROR,p),l.on(i.default.FRAG_PARSING_METADATA,p),l.on(i.default.FRAG_PARSING_USERDATA,p),l.on(i.default.INIT_PTS_FOUND,p);var h={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(u.enableWorker&&"undefined"!=typeof Worker){s.logger.log("demuxing in webworker");var m=void 0;try{m=this.w=n("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),m.addEventListener("message",this.onwmsg),m.onerror=function(t){e.trigger(i.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},m.postMessage({cmd:"init",typeSupported:h,vendor:g,id:t,config:JSON.stringify(u)})}catch(e){s.logger.warn("Error in worker:",e),s.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),m&&d.URL.revokeObjectURL(m.objectURL),this.demuxer=new a.default(l,h,u,g),this.w=void 0}}else this.demuxer=new a.default(l,h,u,g)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,r,n,i,a,o,l,u){var c=this.w,d=e.isFinite(a.startPTS)?a.startPTS:a.start,f=a.decryptdata,p=this.frag,h=!(p&&a.cc===p.cc),g=!(p&&a.level===p.level),m=p&&a.sn===p.sn+1,v=!g&&m;if(h&&s.logger.log(this.id+":discontinuity detected"),g&&s.logger.log(this.id+":switch detected"),this.frag=a,c)c.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:h,trackSwitch:g,contiguous:v,duration:o,accurateTimeOffset:l,defaultInitPTS:u},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,f,r,n,i,d,h,g,v,o,l,u)}},t.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":d.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t}();t.default=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},e.prototype.readSPS=function(){var e,t,r,n,i,a,s,o=0,l=0,u=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),p=this.readUEG.bind(this),h=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),g(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=p();if(3===_&&g(1),v(),v(),g(1),h())for(a=3!==_?8:12,s=0;s<a;s++)h()&&y(s<6?16:64)}v();var b=p();if(0===b)p();else if(1===b)for(g(1),m(),m(),t=p(),s=0;s<t;s++)m();v(),g(1),r=p(),n=p(),0===(i=f(1))&&g(1),g(1),h()&&(o=p(),l=p(),u=p(),c=p());var A=[1,1];if(h()&&h())switch(d()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*o-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:A}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);){i+=10,i+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var i=e._readSize(t,r+6),a=(r+=10)+i;r+8<a;){var s=e._getFrameData(t.subarray(r)),o=e._decodeFrame(s);o&&n.push(o),r+=s.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var r,n,i,a=e.length,s="",o=0;o<a;){if(0===(r=e[o++])&&t)return s;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:n=e[o++],s+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[o++],i=e[o++],s+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return s},e}(),i=n._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=n},"./src/demux/mp3demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/id3.js"),i=r("./src/utils/logger.js"),a=r("./src/demux/mpegaudio.js"),s=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,s=n.default.getID3Data(e,0);if(s&&void 0!==n.default.getTimeStamp(s))for(t=s.length,r=Math.min(e.length-1,t+100);t<r;t++)if(a.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var s=n.default.getID3Data(e,0),o=n.default.getTimeStamp(s),l=o?90*o:9e4*t,u=s.length,c=e.length,d=0,f=0,p=this._audioTrack,h=[{pts:l,dts:l,data:s}];u<c;)if(a.default.isHeader(e,u)){var g=a.default.appendFrame(p,e,u,l,d);if(!g)break;u+=g.length,f=g.sample.pts,d++}else n.default.isHeader(e,u)?(s=n.default.getID3Data(e,u),h.push({pts:f,dts:f,data:s}),u+=s.length):u++;this.remuxer.remux(p,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();t.default=s},"./src/demux/mp4demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/events.js"),a=Math.pow(2,32)-1,s=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,n,a){if(t&&t.byteLength){var s=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var o={};s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:a?t:null}:(s.audio&&(o.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),s.video&&(o.video={container:"video/mp4",codec:n,initSegment:a?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,a,s,o,l,u,c=[];if(t.data?(l=t.start,s=t.end,t=t.data):(l=0,s=t.byteLength),!r.length)return null;for(n=l;n<s;)i=e.readUint32(t,n),a=e.bin2str(t.subarray(n+4,n+8)),u=i>1?n+i:s,a===r[0]&&(1===r.length?c.push({data:t,start:n+8,end:u}):(o=e.findBox({data:t,start:n+8,end:u},r.slice(1))).length&&(c=c.concat(o))),n=u;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,a=0,s=e.findBox(t,["sidx"]);if(!s||!s[0])return null;r=[];var o=(s=s[0]).data[0];a=0===o?8:16;var l=e.readUint32(s,a);a+=4;a+=0===o?8:16,a+=2;var u=s.end+0,c=e.readUint16(s,a);a+=2;for(var d=0;d<c;d++){var f=a,p=e.readUint32(s,f);f+=4;var h=2147483647&p;if(1===(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(s,f);f+=4,r.push({referenceSize:h,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+h-1}}),u+=h,a=f+=4}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:c,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var a=i.data[i.start],s=0===a?12:20,o=e.readUint32(i,s),l=e.findBox(t,["mdia","mdhd"])[0];if(l){s=0===(a=l.data[l.start])?12:20;var u=e.readUint32(l,s),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=e.bin2str(f.data.subarray(f.start+12,f.start+16));n.logger.log("MP4Demuxer:"+d+":"+p+" found")}r[o]={timescale:u,type:d},r[d]={timescale:u,id:o}}}}}}),r},e.getStartDTS=function(t,r){var n,i,a;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return e.findBox(r,["tfhd"]).map(function(n){var i,a;return i=e.readUint32(n,4),a=t[i].timescale||9e4,e.findBox(r,["tfdt"]).map(function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0]/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map(function(r){return e.findBox(r,["tfhd"]).map(function(i){var s=e.readUint32(i,4),o=t[s].timescale||9e4;e.findBox(r,["tfdt"]).map(function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*o);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*o,i=Math.max(i,0);var s=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));e.writeUint32(t,4,s),e.writeUint32(t,8,l)}})})})},e.prototype.append=function(t,r,n,a){var s=this.initData;s||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),s=this.initData);var o,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(s,t);this.initPTS=l=u-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(s,t,l),o=e.getStartDTS(s,t),this.remuxer.remux(s.audio,s.video,null,null,o,n,a,t)},e.prototype.destroy=function(){},e}();t.default=s},"./src/demux/mpegaudio.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var s=n+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),e.len+=a.frameLength,{sample:o,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,a=e[t+2]>>4&15,s=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==s){var l=3===r?3-i:3===i?3:4,u=1e3*n.BitratesMap[14*l+a-1],c=3===r?0:2===r?1:2,d=n.SamplingRateMap[3*c+s],f=e[t+3]>>6==3?1:2,p=n.SamplesCoefficients[r][i],h=n.BytesInSlot[i],g=8*p*h;return{sampleRate:d,channelCount:f,frameLength:parseInt(p*u/d+o,10)*h,samplesPerFrame:g}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=n},"./src/demux/sample-aes.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/decrypter.js"),i=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,function(a){a=new Uint8Array(a),i.set(a,16),n||o.decryptAacSamples(e,t+1,r)})},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},e.prototype.decryptAvcSample=function(e,t,r,n,i,a){var s=this.discardEPB(i.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,function(o){i.data=l.getAvcDecryptedUnit(s,o),a||l.decryptAvcSamples(e,t,r+1,n)})},e.prototype.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,s),!s)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/demux/mpegaudio.js"),a=r("./src/events.js"),s=r("./src/demux/exp-golomb.js"),o=r("./src/demux/sample-aes.js"),l=r("./src/utils/logger.js"),u=r("./src/errors.js"),c={video:1,audio:2,id3:3,text:4},d=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new o.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,n,i){var s,o,c,d,f,p=t.length,h=!1;this.contiguous=n;var g=this.pmtParsed,m=this._avcTrack,v=this._audioTrack,y=this._id3Track,_=m.pid,b=v.pid,A=y.pid,E=this._pmtId,S=m.pesData,w=v.pesData,T=y.pesData,k=this._parsePAT,x=this._parsePMT,P=this._parsePES,D=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),O=e._syncOffset(t);for(p-=(p+O)%188,s=O;s<p;s+=188)if(71===t[s]){if(o=!!(64&t[s+1]),c=((31&t[s+1])<<8)+t[s+2],(48&t[s+3])>>4>1){if((d=s+5+t[s+4])===s+188)continue}else d=s+4;switch(c){case _:o&&(S&&(f=P(S))&&void 0!==f.pts&&D(f,!1),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,s+188)),S.size+=s+188-d);break;case b:o&&(w&&(f=P(w))&&void 0!==f.pts&&(v.isAAC?C(f):L(f)),w={data:[],size:0}),w&&(w.data.push(t.subarray(d,s+188)),w.size+=s+188-d);break;case A:o&&(T&&(f=P(T))&&void 0!==f.pts&&R(f),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,s+188)),T.size+=s+188-d);break;case 0:o&&(d+=t[d]+1),E=this._pmtId=k(t,d);break;case E:o&&(d+=t[d]+1);var I=x(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(_=I.avc)>0&&(m.pid=_),(b=I.audio)>0&&(v.pid=b,v.isAAC=I.isAAC),(A=I.id3)>0&&(y.pid=A),h&&!g&&(l.logger.log("reparse from beginning"),h=!1,s=O-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(f=P(S))&&void 0!==f.pts?(D(f,!0),m.pesData=null):m.pesData=S,w&&(f=P(w))&&void 0!==f.pts?(v.isAAC?C(f):L(f),v.pesData=null):(w&&w.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=w),T&&(f=P(T))&&void 0!==f.pts?(R(f),y.pesData=null):y.pesData=T,null==this.sampleAes?this.remuxer.remux(v,m,y,this._txtTrack,r,n,i):this.decryptAndRemux(v,m,y,this._txtTrack,r,n,i)},e.prototype.decryptAndRemux=function(e,t,r,n,i,a,s){if(e.samples&&e.isAAC){var o=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){o.decryptAndRemuxAvc(e,t,r,n,i,a,s)})}else this.decryptAndRemuxAvc(e,t,r,n,i,a,s)},e.prototype.decryptAndRemuxAvc=function(e,t,r,n,i,a,s){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(e,t,r,n,i,a,s)})}else this.remuxer.remux(e,t,r,n,i,a,s)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,n){var i,a,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 15:-1===s.audio&&(s.audio=a);break;case 21:-1===s.id3&&(s.id3=a);break;case 219:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 27:-1===s.avc&&(s.avc=a);break;case 3:case 4:r?-1===s.audio&&(s.audio=a,s.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return s},e.prototype._parsePES=function(e){var t,r,n,i,a,s,o,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;192&(r=t[7])&&((s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(s-=8589934592),64&r?((o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(o-=8589934592),s-o>54e5&&(l.logger.warn(Math.round((s-o)/9e4)+"s delta between PTS and DTS, align them"),s=o)):o=s),u=(i=t[8])+9,e.size-=u,a=new Uint8Array(e.size);for(var p=0,h=d.length;p<h;p++){var g=(t=d[p]).byteLength;if(u){if(u>g){u-=g;continue}t=t.subarray(u),g-=u,u=0}a.set(t,c),c+=g}return n&&(n-=i+3),{data:a,pts:s,dts:o,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,n,i,a=this,o=this._avcTrack,l=this._parseAVCNALu(e.data),u=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),f=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,u&&l.length&&!o.audFound&&(d(u,o),u=this.avcSample=f(!1,e.pts,e.dts,"")),l.forEach(function(t){switch(t.type){case 1:n=!0,u||(u=a.avcSample=f(!0,e.pts,e.dts,"")),u.frame=!0;var l=t.data;if(c&&l.length>4){var p=new s.default(l).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(u.key=!0)}break;case 5:n=!0,u||(u=a.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0,(r=new s.default(a.discardEPB(t.data))).readUByte();for(var h=0,g=0,m=!1,v=0;!m&&r.bytesAvailable>1;){h=0;do{h+=v=r.readUByte()}while(255===v);g=0;do{g+=v=r.readUByte()}while(255===v);if(4===h&&0!==r.bytesAvailable){if(m=!0,181===r.readUByte())if(49===r.readUShort())if(1195456820===r.readUInt())if(3===r.readUByte()){var y=r.readUByte(),_=31&y,b=[y,r.readUByte()];for(i=0;i<_;i++)b.push(r.readUByte()),b.push(r.readUByte()),b.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(g<r.bytesAvailable)for(i=0;i<g;i++)r.readUByte()}break;case 7:if(n=!0,c=!0,!o.sps){var A=(r=new s.default(t.data)).readSPS();o.width=A.width,o.height=A.height,o.pixelRatio=A.pixelRatio,o.sps=[t.data],o.duration=a._duration;var E=t.data.subarray(1,4),S="avc1.";for(i=0;i<3;i++){var w=E[i].toString(16);w.length<2&&(w="0"+w),S+=w}o.codec=S}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,u&&d(u,o),u=a.avcSample=f(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&n&&u.units.push(t)}),t&&u&&(d(u,o),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,n,i,a=0,s=e.byteLength,o=this._avcTrack,l=o.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,i=31&e[0],l=0,a=1);a<s;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){var f,p;if(d>=0)n={data:e.subarray(d,a-l-1),type:i},c.push(n);else if(f=this._getLastNalUnit())if(u&&a<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(r=a-l-1)>0)(p=new Uint8Array(f.data.byteLength+r)).set(f.data,0),p.set(e.subarray(0,r),f.data.byteLength),f.data=p;a<s?(d=a,i=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;(d>=0&&l>=0&&(n={data:e.subarray(d,s),type:i,state:l},c.push(n)),0===c.length)&&((f=this._getLastNalUnit())&&((p=new Uint8Array(f.data.byteLength+e.byteLength)).set(f.data,0),p.set(e,f.data.byteLength),f.data=p));return o.naluState=l,c},e.prototype.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),r[a]=e[s];return r},e.prototype._parseAACPES=function(e){var t,r,i,s,o,c=this._audioTrack,d=e.data,f=e.pts,p=this.aacOverFlow,h=this.aacLastPTS;if(p){var g=new Uint8Array(p.byteLength+d.byteLength);g.set(p,0),g.set(d,p.byteLength),d=g}for(i=0,o=d.length;i<o-1&&!n.isHeader(d,i);i++);if(i){var m=void 0,v=void 0;if(i<o-1?(m="AAC PES did not start with ADTS header,offset:"+i,v=!1):(m="no ADTS header found in AAC PES",v=!0),l.logger.warn("parsing error:"+m),this.observer.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:m}),v)return}if(n.initTrackConfig(c,this.observer,d,i,this.audioCodec),r=0,t=n.getFrameDuration(c.samplerate),p&&h){var y=h+t;Math.abs(y-f)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((y-f)/90)),f=y)}for(;i<o;)if(n.isHeader(d,i)&&i+5<o){var _=n.appendFrame(c,d,i,f,r);if(!_)break;i+=_.length,s=_.sample.pts,r++}else i++;p=i<o?d.subarray(i,o):null,this.aacOverFlow=p,this.aacLastPTS=s},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,a=0,s=e.pts;a<r;)if(i.default.isHeader(t,a)){var o=i.default.appendFrame(this._audioTrack,t,a,s,n);if(!o)break;a+=o.length,n++}else a++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=d},"./src/errors.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),a=r("./src/events.js"),s={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},o=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(s[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){n.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(a.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=o},"./src/events.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/url-toolkit/src/url-toolkit.js"),a=r("./src/errors.js"),s=r("./src/loader/playlist-loader.js"),o=r("./src/loader/fragment-loader.js"),l=r("./src/loader/key-loader.js"),u=r("./src/controller/fragment-tracker.js"),c=r("./src/controller/stream-controller.js"),d=r("./src/controller/level-controller.js"),f=r("./src/controller/id3-track-controller.js"),p=r("./src/is-supported.js"),h=r("./src/utils/logger.js"),g=r("./src/config.js"),m=r("./src/events.js"),v=function(e){function t(r){void 0===r&&(r={});var n=e.call(this)||this,i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in i)a in r||(r[a]=i[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');h.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var p=n.abrController=new r.abrController(n),g=new r.bufferController(n),m=new r.capLevelController(n),v=new r.fpsController(n),y=new s.default(n),_=new o.default(n),b=new l.default(n),A=new f.default(n),E=n.levelController=new d.default(n),S=new u.FragmentTracker(n),w=[E,n.streamController=new c.default(n,S)],T=r.audioStreamController;T&&w.push(new T(n,S)),n.networkControllers=w;var k=[y,_,b,p,g,m,v,A,S];if(T=r.audioTrackController){var x=new T(n);n.audioTrackController=x,k.push(x)}if(T=r.subtitleTrackController){var P=new T(n);n.subtitleTrackController=P,w.push(P)}if(T=r.emeController){var D=new T(n);n.emeController=D,k.push(D)}return(T=r.subtitleStreamController)&&w.push(new T(n,S)),(T=r.timelineController)&&k.push(new T(n)),n.coreComponents=k,n}return n(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),t.isSupported=function(){return p.isSupported()},Object.defineProperty(t,"Events",{get:function(){return m.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return a.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return a.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:g.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){h.logger.log("destroy"),this.trigger(m.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){h.logger.log("attachMedia"),this.media=e,this.trigger(m.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(m.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=i.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),h.logger.log("loadSource:"+e),this.url=e,this.trigger(m.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),h.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},t.prototype.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.prototype.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){h.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){h.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){h.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){h.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){h.logger.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){h.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++){if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(r("./src/observer.js").Observer);t.default=v},"./src/is-supported.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/mediasource-helper.js");t.isSupported=function(){var e=n.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}},"./src/loader/fragment-loader.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/errors.js"),o=r("./src/utils/logger.js"),l=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING)||this;return r.loaders={},r}return n(r,t),r.prototype.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var r=t.frag,n=r.type,i=this.loaders,a=this.hls.config,s=a.fLoader,l=a.loader;r.loaded=0;var u,c,d,f=i[n];f&&(o.logger.warn("abort previous fragment loader for type: "+n),f.abort()),f=i[n]=r.loader=a.fLoader?new s(a):new l(a),u={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var p=r.byteRangeStartOffset,h=r.byteRangeEndOffset;e.isFinite(p)&&e.isFinite(h)&&(u.rangeStart=p,u.rangeEnd=h),c={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(u,c,d)},r.prototype.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var a=e.data,s=r.frag;s.loader=void 0,this.loaders[s.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:a,frag:s,stats:t,networkDetails:n})},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.prototype.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var a=t.frag;a.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:n})},r}(a.default);t.default=l}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/level-key.js"),a=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new i.default).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},t}();t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/errors.js"),o=r("./src/utils/logger.js"),l=function(e){function t(t){var r=e.call(this,t,i.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return n(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},a.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r],a=t.decryptdata,s=a.uri;if(s!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;n&&(o.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new l.loader(l),this.decrypturl=s,this.decryptkey=null;var u,c,d;u={url:s,frag:t,responseType:"arraybuffer"},c={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(u,c,d)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(i.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(i.default.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(a.default);t.default=l},"./src/loader/level-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=r}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/fragment.js"),a=r("./src/loader/level.js"),s=r("./src/loader/level-key.js"),o=r("./src/utils/attr-list.js"),l=r("./src/utils/logger.js"),u=r("./src/utils/codecs.js"),c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,d=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),p=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,h=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var r=null,n=0;n<e.length;n++){var i=e[n];i.id===t&&(r=i)}return r},t.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return n.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n,i=[];function a(e,t){["video","audio"].forEach(function(r){var n=e.filter(function(e){return u.isCodecType(e,r)});if(n.length){var i=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}for(c.lastIndex=0;null!=(n=c.exec(e));){var s={},l=s.attrs=new o.default(n[1]);s.url=t.resolve(n[2],r);var d=l.decimalResolution("RESOLUTION");d&&(s.width=d.width,s.height=d.height),s.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),s.name=l.NAME,a([].concat((l.CODECS||"").split(/[ ,]+/)),s),s.videoCodec&&-1!==s.videoCodec.indexOf("avc1")&&(s.videoCodec=t.convertAVC1ToAVCOTI(s.videoCodec)),i.push(s)}return i},t.parseMasterPlaylistMedia=function(e,r,n,i){var a;void 0===i&&(i=[]);var s=[],l=0;for(d.lastIndex=0;null!==(a=d.exec(e));){var u={},c=new o.default(a[1]);if(c.TYPE===n){if(u.groupId=c["GROUP-ID"],u.name=c.NAME,u.type=n,u.default="YES"===c.DEFAULT,u.autoselect="YES"===c.AUTOSELECT,u.forced="YES"===c.FORCED,c.URI&&(u.url=t.resolve(c.URI,r)),u.lang=c.LANGUAGE,u.name||(u.name=u.lang),i.length){var f=t.findGroup(i,u.groupId);u.audioCodec=f?f.codec:i[0].codec}u.id=l++,s.push(u)}}return s},t.parseLevelPlaylist=function(t,r,n,u,c){var d,g,v=0,y=0,_=new a.default(r),b=new s.default,A=0,E=null,S=new i.default,w=null;for(f.lastIndex=0;null!==(d=f.exec(t));){var T=d[1];if(T){S.duration=parseFloat(T);var k=(" "+d[2]).slice(1);S.title=k||null,S.tagList.push(k?["INF",T,k]:["INF",T])}else if(d[3]){if(e.isFinite(S.duration)){var x=v++;S.type=u,S.start=y,S.levelkey=b,S.sn=x,S.level=n,S.cc=A,S.urlId=c,S.baseurl=r,S.relurl=(" "+d[3]).slice(1),m(S,E),_.fragments.push(S),E=S,y+=S.duration,S=new i.default}}else if(d[4]){if(S.rawByteRange=(" "+d[4]).slice(1),E){var P=E.byteRangeEndOffset;P&&(S.lastByteRangeEndOffset=P)}}else if(d[5])S.rawProgramDateTime=(" "+d[5]).slice(1),S.tagList.push(["PROGRAM-DATE-TIME",S.rawProgramDateTime]),null===w&&(w=_.fragments.length);else{for(d=d[0].match(p),g=1;g<d.length&&void 0===d[g];g++);var D=(" "+d[g+1]).slice(1),C=(" "+d[g+2]).slice(1);switch(d[g]){case"#":S.tagList.push(C?[D,C]:[D]);break;case"PLAYLIST-TYPE":_.type=D.toUpperCase();break;case"MEDIA-SEQUENCE":v=_.startSN=parseInt(D);break;case"TARGETDURATION":_.targetduration=parseFloat(D);break;case"VERSION":_.version=parseInt(D);break;case"EXTM3U":break;case"ENDLIST":_.live=!1;break;case"DIS":A++,S.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":A=parseInt(D);break;case"KEY":var L=D,R=new o.default(L),O=R.enumeratedString("METHOD"),I=R.URI,M=R.hexadecimalInteger("IV");O&&(b=new s.default,I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(O)>=0&&(b.method=O,b.baseuri=r,b.reluri=I,b.key=null,b.iv=M));break;case"START":var N=D,F=new o.default(N).decimalFloatingPoint("TIME-OFFSET");e.isFinite(F)&&(_.startTimeOffset=F);break;case"MAP":var j=new o.default(D);S.relurl=j.URI,S.rawByteRange=j.BYTERANGE,S.baseurl=r,S.level=n,S.type=u,S.sn="initSegment",_.initSegment=S,(S=new i.default).rawProgramDateTime=_.initSegment.rawProgramDateTime;break;default:l.logger.warn("line parsed but not handled: "+d)}}}return(S=E)&&!S.relurl&&(_.fragments.pop(),y-=S.duration),_.totalduration=y,_.averagetargetduration=y/_.fragments.length,_.endSN=v-1,_.startCC=_.fragments[0]?_.fragments[0].cc:0,_.endCC=A,!_.initSegment&&_.fragments.length&&_.fragments.every(function(e){return h.test(e.relurl)})&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(S=new i.default).relurl=_.fragments[0].relurl,S.baseurl=r,S.level=n,S.type=u,S.sn="initSegment",_.initSegment=S,_.needSidxRanges=!0),w&&function(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(_.fragments,w),_},t}();function m(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=g}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/errors.js"),o=r("./src/utils/logger.js"),l=r("./src/demux/mp4demuxer.js"),u=r("./src/loader/m3u8-parser.js"),c=window.performance,d={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},f={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},p=function(t){function r(e){var r=t.call(this,e,i.default.MANIFEST_LOADING,i.default.LEVEL_LOADING,i.default.AUDIO_TRACK_LOADING,i.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return n(r,t),Object.defineProperty(r,"ContextType",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return f},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(e){return e!==d.AUDIO_TRACK&&e!==d.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case d.AUDIO_TRACK:return f.AUDIO;case d.SUBTITLE_TRACK:return f.SUBTITLE;default:return f.MAIN}},r.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},r.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return e.loader=i,this.loaders[e.type]=i,i},r.prototype.getInternalLoader=function(e){return this.loaders[e.type]},r.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(e){this.load(e.url,{type:d.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(e){this.load(e.url,{type:d.LEVEL,level:e.level,id:e.id})},r.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:d.AUDIO_TRACK,level:null,id:e.id})},r.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:d.SUBTITLE_TRACK,level:null,id:e.id})},r.prototype.load=function(e,t){var r=this.hls.config;o.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,i,a,s,l=this.getInternalLoader(t);if(l){var u=l.context;if(u&&u.url===e)return o.logger.trace("playlist request ongoing"),!1;o.logger.warn("aborting previous loader for type: "+t.type),l.abort()}switch(t.type){case d.MANIFEST:n=r.manifestLoadingMaxRetry,i=r.manifestLoadingTimeOut,a=r.manifestLoadingRetryDelay,s=r.manifestLoadingMaxRetryTimeout;break;case d.LEVEL:n=0,i=r.levelLoadingTimeOut;break;default:n=r.levelLoadingMaxRetry,i=r.levelLoadingTimeOut,a=r.levelLoadingRetryDelay,s=r.levelLoadingMaxRetryTimeout}l=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var c={timeout:i,maxRetry:n,retryDelay:a,maxRetryDelay:s},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return o.logger.debug("Calling internal loader delegate for URL: "+e),l.load(t,c,f),!0},r.prototype.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);this.resetInternalLoader(r.type);var i=e.data;t.tload=c.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r.prototype._handleMasterPlaylist=function(e,t,n,a){var s=this.hls,l=e.data,c=r.getResponseUrl(e,n),d=u.default.parseMasterPlaylist(l,c);if(d.length){var f=d.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),p=u.default.parseMasterPlaylistMedia(l,c,"AUDIO",f),h=u.default.parseMasterPlaylistMedia(l,c,"SUBTITLES");if(p.length){var g=!1;p.forEach(function(e){e.url||(g=!0)}),!1===g&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(o.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}s.trigger(i.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:h,url:c,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,n,"no level found in manifest",a)},r.prototype._handleTrackOrLevelPlaylist=function(t,n,a,s){var o=this.hls,l=a.id,f=a.level,p=a.type,h=r.getResponseUrl(t,a),g=e.isFinite(l)?l:0,m=e.isFinite(f)?f:g,v=r.mapContextToLevelType(a),y=u.default.parseLevelPlaylist(t.data,h,m,v,g);if(y.tload=n.tload,p===d.MANIFEST){var _={url:h,details:y};o.trigger(i.default.MANIFEST_LOADED,{levels:[_],audioTracks:[],url:h,stats:n,networkDetails:s})}if(n.tparsed=c.now(),y.needSidxRanges){var b=y.initSegment.url;this.load(b,{isSidxRequest:!0,type:p,level:f,levelDetails:y,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else a.levelDetails=y,this._handlePlaylistLoaded(t,n,a,s)},r.prototype._handleSidxRequest=function(e,t){var r=l.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach(function(e,t){var r=e.info,n=i.fragments[t];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r.prototype._handleNetworkError=function(e,t,r,n){var a,l;void 0===r&&(r=!1),void 0===n&&(n=null),o.logger.info("A network error occured while loading a "+e.type+"-type playlist");var u=this.getInternalLoader(e);switch(e.type){case d.MANIFEST:a=r?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,l=!0;break;case d.LEVEL:a=r?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,l=!1;break;case d.AUDIO_TRACK:a=r?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,l=!1;break;default:l=!1}u&&(u.abort(),this.resetInternalLoader(e.type));var c={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:l,url:u.url,loader:u,context:e,networkDetails:t};n&&(c.response=n),this.hls.trigger(i.default.ERROR,c)},r.prototype._handlePlaylistLoaded=function(e,t,n,a){var s=n.type,o=n.level,l=n.id,u=n.levelDetails;if(u.targetduration)if(r.canHaveQualityLevels(n.type))this.hls.trigger(i.default.LEVEL_LOADED,{details:u,level:o||0,id:l||0,stats:t,networkDetails:a});else switch(s){case d.AUDIO_TRACK:this.hls.trigger(i.default.AUDIO_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:a});break;case d.SUBTITLE_TRACK:this.hls.trigger(i.default.SUBTITLE_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,n,"invalid target duration",a)},r}(a.default);t.default=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(t))},t}(r("./node_modules/eventemitter3/index.js").EventEmitter);t.Observer=i},"./src/polyfills/number.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js").getSelfScope().Number;t.Number=n,n.isFinite=n.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=n},"./src/remux/mp4-generator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,s)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],s=[];for(r=0;r<t.sps.length;r++)i=(n=t.sps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)i=(n=t.pps[r]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(n));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,a=t.width,s=t.height,o=Math.floor(i/(n+1)),l=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,s>>8&255,255&s,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),a=t.id,s=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,s,o,l,u=t.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)a=(i=u[n]).duration,s=i.size,o=i.flags,l=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();t.default=i},"./src/remux/mp4-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/remux/aac-helper.js"),i=r("./src/remux/mp4-generator.js"),a=r("./src/events.js"),s=r("./src/errors.js"),o=r("./src/utils/logger.js"),l=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,n,i,s,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=i,f=i;if(u&&c){var p=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,p),f+=Math.max(0,-p)}if(u){e.timescale||(o.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var h=this.remuxAudio(e,d,s,l);if(c){var g=void 0;h&&(g=h.endPTS-h.startPTS),t.timescale||(o.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,s,g,l)}}else if(c){var m=this.remuxVideo(t,f,s,0,l);m&&e.codec&&this.remuxEmptyAudio(e,d,s,m)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(a.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var n,l,u=this.observer,c=e.samples,d=t.samples,f=this.typeSupported,p="audio/mp4",h={},g={tracks:h},m=void 0===this._initPTS;if(m&&(n=l=1/0),e.config&&c.length&&(e.timescale=e.samplerate,o.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(p="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),h.audio={container:p,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(n=l=c[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&d.length){var v=t.inputTimeScale;t.timescale=v,h.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(n=Math.min(n,d[0].pts-v*r),l=Math.min(l,d[0].dts-v*r),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(h).length?(u.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,m&&(this._initPTS=n,this._initDTS=l)):u.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,n,l){var u,c,d,f,p,h,g,m=8,v=e.timescale,y=e.samples,_=[],b=y.length,A=this._PTSNormalize,E=this._initPTS,S=this.nextAvcDts,w=this.isSafari;if(0!==b){w&&(r|=y.length&&S&&(l&&Math.abs(t-S/v)<.1||Math.abs(y[0].pts-S-E)<v/5)),r||(S=t*v),y.forEach(function(e){e.pts=A(e.pts-E,S),e.dts=A(e.dts-E,S)}),y.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var T=y.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(T<0){o.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var k=0;k<y.length;k++)y[k].dts+=T}var x=y[0];p=Math.max(x.dts,0),f=Math.max(x.pts,0);var P=Math.round((p-S)/90);r&&P&&(P>1?o.logger.log("AVC:"+P+" ms hole between fragments detected,filling it"):P<-1&&o.logger.log("AVC:"+-P+" ms overlapping between fragments detected"),p=S,y[0].dts=p,f=Math.max(f-P,S),y[0].pts=f,o.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(p/90)+",delta:"+P+" ms")),x=y[y.length-1],g=Math.max(x.dts,0),h=Math.max(x.pts,0,g),w&&(u=Math.round((g-p)/(y.length-1)));var D=0,C=0;for(k=0;k<b;k++){for(var L=y[k],R=L.units,O=R.length,I=0,M=0;M<O;M++)I+=R[M].data.length;C+=I,D+=O,L.length=I,L.dts=w?p+k*u:Math.max(L.dts,p),L.pts=Math.max(L.pts,L.dts)}var N=C+4*D+8;try{c=new Uint8Array(N)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var F=new DataView(c.buffer);F.setUint32(0,N),c.set(i.default.types.mdat,4);for(k=0;k<b;k++){var j=y[k],B=j.units,U=0,q=void 0;for(M=0,O=B.length;M<O;M++){var H=B[M],G=H.data,V=H.data.byteLength;F.setUint32(m,V),m+=4,c.set(G,m),m+=V,U+=4+V}if(w)q=Math.max(0,u*Math.round((j.pts-j.dts)/u));else{if(k<b-1)u=y[k+1].dts-j.dts;else{var W=this.config,K=j.dts-y[k>0?k-1:k].dts;if(W.stretchShortVideoTrack){var $=W.maxBufferHole,z=Math.floor($*v),Y=(n?f+n*v:this.nextAudioPts)-j.pts;Y>z?((u=Y-K)<0&&(u=K),o.logger.log("It is approximately "+Y/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=K}else u=K}q=Math.round(j.pts-j.dts)}_.push({size:U,duration:u,cts:q,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=g+u;var X=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Q=_[0].flags;Q.dependsOn=2,Q.isNonSync=0}e.samples=_,d=i.default.moof(e.sequenceNumber++,p,e),e.samples=[];var J={data1:d,data2:c,startPTS:f/v,endPTS:(h+u)/v,startDTS:p/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:X};return this.observer.trigger(a.default.FRAG_PARSING_DATA,J),J}},e.prototype.remuxAudio=function(e,t,r,l){var u,c,d,f,p,h,g,m=e.inputTimeScale,v=e.timescale,y=m/v,_=(e.isAAC?1024:1152)*y,b=this._PTSNormalize,A=this._initPTS,E=!e.isAAC&&this.typeSupported.mpeg,S=e.samples,w=[],T=this.nextAudioPts;if(r|=S.length&&T&&(l&&Math.abs(t-T/m)<.1||Math.abs(S[0].pts-T-A)<20*_),S.forEach(function(e){e.pts=e.dts=b(e.pts-A,t*m)}),0!==(S=S.filter(function(e){return e.pts>=0})).length){if(r||(T=l?t*m:S[0].pts),e.isAAC)for(var k=this.config.maxAudioFramesDrift,x=0,P=T;x<S.length;){var D,C=S[x];D=(j=C.pts)-P;var L=Math.abs(1e3*D/m);if(D<=-k*_)o.logger.warn("Dropping 1 audio frame @ "+(P/m).toFixed(3)+"s due to "+Math.round(L)+" ms overlap."),S.splice(x,1),e.len-=C.unit.length;else if(D>=k*_&&L<1e4&&P){var R=Math.round(D/_);o.logger.warn("Injecting "+R+" audio frame @ "+(P/m).toFixed(3)+"s due to "+Math.round(1e3*D/m)+" ms gap.");for(var O=0;O<R;O++){var I=Math.max(P,0);(d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=C.unit.subarray()),S.splice(x,0,{unit:d,pts:I,dts:I}),e.len+=d.length,P+=_,x++}C.pts=C.dts=P,P+=_,x++}else Math.abs(D),C.pts=C.dts=P,P+=_,x++}O=0;for(var M=S.length;O<M;O++){var N=S[O],F=N.unit,j=N.pts;if(void 0!==g)c.duration=Math.round((j-g)/y);else{var B=Math.round(1e3*(j-T)/m),U=0;if(r&&e.isAAC&&B){if(B>0&&B<1e4)U=Math.round((j-T)/_),o.logger.log(B+" ms hole between AAC samples detected,filling it"),U>0&&((d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=F.subarray()),e.len+=U*d.length);else if(B<-12){o.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/m).toFixed(3)+"s/"+(j/m).toFixed(3)+"s/"+-B+"ms"),e.len-=F.byteLength;continue}j=T}if(h=j,!(e.len>0))return;var q=E?e.len:e.len+8;u=E?0:8;try{f=new Uint8Array(q)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:q,reason:"fail allocating audio mdat "+q})}E||(new DataView(f.buffer).setUint32(0,q),f.set(i.default.types.mdat,4));for(x=0;x<U;x++)(d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=F.subarray()),f.set(d,u),u+=d.byteLength,c={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c)}f.set(F,u);var H=F.byteLength;u+=H,c={size:H,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c),g=j}var G=0,V=w.length;if(V>=2&&(G=w[V-2].duration,c.duration=G),V){this.nextAudioPts=T=g+y*G,e.len=0,e.samples=w,p=E?new Uint8Array:i.default.moof(e.sequenceNumber++,h/y,e),e.samples=[];var W=h/m,K=T/m,$={data1:p,data2:f,startPTS:W,endPTS:K,startDTS:W,endDTS:K,type:"audio",hasAudio:!0,hasVideo:!1,nb:V};return this.observer.trigger(a.default.FRAG_PARSING_DATA,$),$}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var a=e.inputTimeScale,s=a/(e.samplerate?e.samplerate:a),l=this.nextAudioPts,u=(void 0!==l?l:i.startDTS*a)+this._initDTS,c=i.endDTS*a+this._initDTS,d=1024*s,f=Math.ceil((c-u)/d),p=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(o.logger.warn("remux empty Audio"),p){for(var h=[],g=0;g<f;g++){var m=u+g*d;h.push({unit:p,pts:m,dts:m}),e.len+=p.length}e.samples=h,this.remuxAudio(e,t,r)}else o.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS,s=this._initDTS;if(r){for(var o=0;o<r;o++)(t=e.samples[o]).pts=(t.pts-i)/n,t.dts=(t.dts-s)/n;this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var s=0;s<r;s++)(t=e.samples[s]).pts=(t.pts-i)/n;this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();t.default=l},"./src/remux/passthrough-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,i,a,s,o,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.apply(this,[t].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(r("./src/event-handler.js").default);t.default=i},"./src/utils/attr-list.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var r=parseInt(this[t],10);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},t}();t.default=i}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={search:function(e,t){for(var r=0,n=e.length-1,i=null,a=null;r<=n;){var s=t(a=e[i=(r+n)/2|0]);if(s>0)r=i+1;else{if(!(s<0))return a;n=i-1}}return null}}},"./src/utils/buffer-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n=e.buffered,i=[],a=void 0;for(a=0;a<n.length;a++)i.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var n,i,a,s,o,l=[];for(e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end}),o=0;o<e.length;o++){var u=l.length;if(u){var c=l[u-1].end;e[o].start-c<r?e[o].end>c&&(l[u-1].end=e[o].end):l.push(e[o])}else l.push(e[o])}for(o=0,n=0,i=a=t;o<l.length;o++){var d=l[o].start,f=l[o].end;if(t+r>=d&&t<f)i=d,n=(a=f)-t;else if(t+r<d){s=d;break}}return{len:n,start:i,end:a,nextStart:s}},e}();t.BufferHelper=n},"./src/utils/cea-608-parser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},a=15,s=100,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},p=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},h=function(){function e(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),g=function(){function e(e,t,r,n,i,a){this.uchar=e||" ",this.penState=new h(t,r,n,i,a)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),m=function(){function e(){this.chars=[];for(var e=0;e<s;e++)this.chars.push(new g);this.pos=0,this.currPenState=new h}return e.prototype.equals=function(e){for(var t=!0,r=0;r<s;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<s;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<s;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>s&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=s)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=i(e);this.pos>=s?f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<s;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<s;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),v=function(){function e(){this.rows=[];for(var e=0;e<a;e++)this.rows.push(new m);this.currRow=a-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<a;e++)this.rows[e].clear();this.currRow=a-1},e.prototype.equals=function(e){for(var t=!0,r=0;r<a;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<a;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<a;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){f.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<a;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var s=i.rows[n].cueStartTime;if(s&&s<f.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[t-this.nrRollUpRows+r+1].copy(i.rows[n+r])}}this.currRow=t;var o=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);o.setCursor(e.indent),e.color=o.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<a;i++){var s=this.rows[i].getTextString();s&&(n=i+1,e?t.push("Row "+n+": '"+s+"'"):t.push(s.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),y=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new v,this.nonDisplayedMemory=new v,this.lastOutputScreen=new v,this.currRollUpRow=this.displayedMemory.rows[a-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[a-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=f.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),_=function(){function e(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new y(1,t),new y(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r,n,i,a=!1;this.lastTime=e,f.setTime(e);for(var s=0;s<t.length;s+=2)if(n=127&t[s],i=127&t[s+1],0!==n||0!==i){if(f.log("DATA","["+p([t[s],t[s+1]])+"] -> ("+p([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r)if(a=this.parseChars(n,i))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(a);else f.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+p([n,i])+" orig: "+p([t[s],t[s+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r=null;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+p([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var n=this.channels[r-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;return(17===e||25===e)&&t>=32&&t<=47&&((r=17===e?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+p([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var r,n=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=t>=64&&t<=95?1===r?o[e]:u[e]:1===r?l[e]:c[e];var i=this.interpretPAC(n,t);return this.channels[r-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},e.prototype.parseChars=function(e,t){var r=null,n=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){var s=t;s=17===a?t+80:18===a?t+112:t+144,f.log("INFO","Special char '"+i(s)+"' in channel "+r),n=[s]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var o=p(n);f.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},e.prototype.parseBackgroundAttributes=function(e,t){var r,n,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=d[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=_},"./src/utils/codecs.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var r=n[t];return!!r&&!0===r[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js");t.newCue=function(e,t,r,i){for(var a,s,o,l,u,c=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(o=!0,l=0,u="",!(a=i.rows[d]).isEmpty()){for(var f=0;f<a.chars.length;f++)a.chars[f].uchar.match(/\s/)&&o?l++:(u+=a.chars[f].uchar,o=!1);a.cueStartTime=t,t===r&&(r+=1e-4),s=new c(t,r,n.fixLineBreaks(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?s.line=d+1:s.line=d>7?d-2:d+1,s.align="left",s.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(s)}}},"./src/utils/discontinuities.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/binary-search.js"),i=r("./src/utils/logger.js");function a(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function s(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function o(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var s=a(r,n[0].cc);if(s&&(!s||s.startPTS))return s;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(e,t){t.fragments.forEach(function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}),t.PTSKnown=!0}function u(e,t,r){if(s(e,r,t)){var n=o(r.details,t);n&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level"),l(n.start,t))}}function c(t,r){if(r&&r.fragments.length){if(!t.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,a=(t.fragments[0].programDateTime-n)/1e3+r.fragments[0].start;e.isFinite(a)&&(i.logger.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),l(a,t))}}t.findFirstFragWithCC=a,t.findFragWithCC=function(e,t){return n.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})},t.shouldAlignOnDiscontinuities=s,t.findDiscontinuousReferenceFrag=o,t.adjustPts=l,t.alignStream=function(e,t,r){u(e,r,t),!r.PTSKnown&&t&&c(r,t.details)},t.alignDiscontinuities=u,t.alignPDT=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/ewma.js"),i=function(){function e(e,t,r,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(t),this.fast_=new n.default(r)}return e.prototype.sample=function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=n},"./src/utils/get-self-scope.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},"./src/utils/logger.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},s=a;var o=n.getSelfScope();function l(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach(function(t){s[t]=e[t]?e[t].bind(e):function(e){var t=o.console[e];return t?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=function(e,t){return t="["+e+"] > "+t}(e,r[0])),t.apply(o.console,r)}:i}(t)})}t.enableLogs=function(e){if(!0===e||"object"==typeof e){l(e,"debug","log","info","warn","error");try{s.log()}catch(e){s=a}}else s=a},t.logger=s},"./src/utils/mediakeys-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=n},"./src/utils/mediasource-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/output-filter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=n},"./src/utils/texttrack-utils.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},"./src/utils/time-ranges.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},"./src/utils/vttcue.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){return"string"==typeof e&&(!!r[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function a(r,a,s){var o=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?o=document.createElement("custom"):u.enumerable=!0,o.hasBeenReset=!1;var c="",d=!1,f=r,p=a,h=s,g=null,m="",v=!0,y="auto",_="start",b=50,A="middle",E=50,S="middle";if(Object.defineProperty(o,"id",i({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},u,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,"startTime",i({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},u,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},u,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},u,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},u,{get:function(){return m},set:function(e){var r=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},u,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},u,{get:function(){return y},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},u,{get:function(){return _},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},u,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},u,{get:function(){return A},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},u,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},u,{get:function(){return S},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),o.displayState=void 0,l)return o}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}()},"./src/utils/vttparser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttcue.js"),i=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function a(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function s(){this.values=Object.create(null)}function o(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(r);if(2===s.length)t(s[0],s[1])}}s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var l=new n.default(0,0,0),u="middle"===l.align?"middle":"center";function c(e,t,r){var n=e;function i(){var t=function(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),a(),t.endTime=i(),a(),function(e,t){var n=new s;o(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",u,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",u,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",u,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===l.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",u);var a=n.get("position","auto");"auto"===a&&50===l.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}t.fixLineBreaks=d,a.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=d(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}function i(e){o(e,function(e,t){e},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var a=void 0;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var s=(a=r()).match(/^()?WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var l=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:a=r(),t.state){case"HEADER":/:/.test(a)?i(a):a||(t.state="ID");continue;case"NOTE":a||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){t.state="NOTE";break}if(!a)continue;if(t.cue=new n.default(0,0,""),t.state="CUE",-1===a.indexOf("--\x3e")){t.cue.id=a;continue}case"CUE":try{c(a,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var u=-1!==a.indexOf("--\x3e");if(!a||u&&(l=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=a;continue;case"BADCUE":a||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.default=a},"./src/utils/webvtt-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js"),i=r("./src/demux/id3.js"),a=function(e,t,r){return e.substr(r||0,t.length)===t},s=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},o={parse:function(t,r,o,l,u,c){var d,f=i.utf8ArrayToStr(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),p="00:00.000",h=0,g=0,m=0,v=[],y=!0,_=new n.default;_.oncue=function(e){var t=o[l],r=o.ccOffset;t&&t.new&&(void 0!==g?r=o.ccOffset=t.start:function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC];e.presentationOffset=r}(o,l,m)),m&&(r=m-o.presentationOffset),e.startTime+=r-g,e.endTime+=r-g,e.id=s(e.startTime.toString())+s(e.endTime.toString())+s(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&v.push(e)},_.onparsingerror=function(e){d=e},_.onflush=function(){d&&c?c(d):u(v)},f.forEach(function(t){if(y){if(a(t,"X-TIMESTAMP-MAP=")){y=!1,t.substr(16).split(",").forEach(function(e){a(e,"LOCAL:")?p=e.substr(6):a(e,"MPEGTS:")&&(h=parseInt(e.substr(7)))});try{r+(9e4*o[l].start||0)<0&&(r+=8589934592),h-=r,g=function(t){var r=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),a=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return e.isFinite(r)&&e.isFinite(n)&&e.isFinite(i)&&e.isFinite(a)?(r+=1e3*n,r+=6e4*i,r+=36e5*a):-1}(p)/1e3,m=h/9e4,-1===g&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){d=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(y=!1)}_.parse(t+"\n")}),_.flush()}};t.default=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=window.performance,a=window.XMLHttpRequest,s=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new a;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,a=this.stats,s=this.context,o=this.config;if(!a.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===a.tfirst&&(a.tfirst=Math.max(i.now(),a.trequest)),4===r){var l=t.status;if(l>=200&&l<300){a.tload=Math.max(a.tfirst,i.now());var u=void 0,c=void 0;c="arraybuffer"===s.responseType?(u=t.response).byteLength:(u=t.responseText).length,a.loaded=a.total=c;var d={url:t.responseURL,data:u};this.callbacks.onSuccess(d,a,s,t)}else a.retry>=o.maxRetry||l>=400&&l<499?(n.logger.error(l+" while loading "+s.url),this.callbacks.onError({code:l,text:t.statusText},s,t)):(n.logger.warn(l+" while loading "+s.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),a.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},e.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();t.default=s}}).default})},ZQBx:function(e,t,r){"use strict";var n;void 0===(n=function(e){e._findEls=null,e.find=function(e){if(this._findEls||(this._findEls={}),this._findEls[e])return this._findEls[e];var t=this.$el.find(e);return t.length&&(this._findEls[e]=t),t}}.apply(t,[t]))||(e.exports=n)},ZyKY:function(e,t,r){"use strict";t.__esModule=!0;var n=r("82EY");t.default=function(e){e.registerHelper("blockHelperMissing",function(t,r){var i=r.inverse,a=r.fn;if(!0===t)return a(this);if(!1===t||null==t)return i(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):i(this);if(r.data&&r.ids){var s=n.createFrame(r.data);s.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:s}}return a(t,r)})},e.exports=t.default},aJwO:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("TEnB"),r("meAz"),r("lDDm"),t],void 0===(i=function(e,t,r,n,i,a){var s=window&&window.console;a.postUnthrottled=function(t){e.post("https://error-collector.ted.com/",{message:t})},a.post=t.throttle(a.postUnthrottled,5e3),a.log=function(t,o){if(o=e.extend({console:!0,error:!0,message:t,context:"js",uri:window.location.href,throttled:!0,client_name:r.browser,client_version:r.version,elapsed_seconds:Math.floor((+new Date-i("startTime"))/1e3),profile_id:n.get()||"N/A",user_agent:window.navigator?window.navigator.userAgent:"Unknown User Agent"},o||{}),a[o.throttled?"post":"postUnthrottled"](o),o.console&&s&&s.log){var l=o.error?"#FCF1CC":"#999999";s.log("%c"+t,"color:"+l)}}}.apply(t,n))||(e.exports=i)},awRL:function(e,t,r){"use strict";(function(e){var n,i;n=[r("lU1m")],void 0===(i=function(e){var t={get:function(){return e.get("_explore")},getNormalized:function(){switch(String(t.get())){case"null":case"undefined":case"no":return"uninvited";case"0":return"invited";case"1":return"opted-in";case"2":return"opted-out";default:return"unknown"}},getUserTedIdFromExplore:function(){var t=e.get("_explr_uid");return void 0!==t?t:null}};return t}.apply(t,n))||(e.exports=i)}).call(this,r("RoC8")(e))},cd6c:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("lDDm"),r("3EqX")],void 0===(i=function(e,t,r){function n(t){t._isInternal&&(this._data={lastMetaTalkId:null,lastPlayTalkId:null},this._widget=t,this._addHandlers(),e(window).unload(function(){r.stop()}))}return n.prototype._sendViewBeacon=function(e){var r=window.COMSCORE;r&&r.beacon&&r.beacon({c1:"1",c2:t("csClientId"),c5:"02",c6:e})},n.prototype._sendPostrollBeacon=function(){var e=window.COMSCORE;e&&e.beacon&&e.beacon({c1:"1",c2:t("csClientId"),c5:"10"})},n.prototype._onTalkPlay=function(e){this._sendViewBeacon(e)},n.prototype._addHandlers=function(){var e=this,t={playertalk:function(e,t){r.init({talkId:t.id})},playerplay:function(){var t=e._widget.options.currentTalk.id;e._data.lastPlayTalkId!==t&&(e._onTalkPlay(t),e._data.lastPlayTalkId=t),r.start()},playerpause:function(){r.stop()},playercomplete:function(){r.stop()},playerprerollstart:function(){r.startAd()},playerprerollcomplete:function(){r.stopAd()},playerpostrollstart:function(){e._sendPostrollBeacon(),r.startAd()},playerpostrollcomplete:function(){r.stopAd()}};this._handlers=t,this._widget._on(t)},n}.apply(t,n))||(e.exports=i)},co8E:function(e,t,r){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,r=a.COMPILER_REVISION;if(t!==r){if(t<r){var n=a.REVISION_CHANGES[r],s=a.REVISION_CHANGES[t];throw new i.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new i.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new i.default("No environment passed to template");if(!e||!e.main)throw new i.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r={strict:function(e,t){if(!(t in e))throw new i.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:n.escapeExpression,invokePartial:function(r,a,s){s.hash&&(a=n.extend({},a,s.hash),s.ids&&(s.ids[0]=!0));r=t.VM.resolvePartial.call(this,r,a,s);var o=t.VM.invokePartial.call(this,r,a,s);null==o&&t.compile&&(s.partials[s.name]=t.compile(r,e.compilerOptions,t),o=s.partials[s.name](a,s));if(null!=o){if(s.indent){for(var l=o.split("\n"),u=0,c=l.length;u<c&&(l[u]||u+1!==c);u++)l[u]=s.indent+l[u];o=l.join("\n")}return o}throw new i.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,i){var a=this.programs[e],o=this.fn(e);return t||i||n||r?a=s(this,e,o,t,r,n,i):a||(a=this.programs[e]=s(this,e,o)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=n.extend({},t,e)),r},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function o(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;o._setup(n),!n.partial&&e.useData&&(i=function(e,t){t&&"root"in t||((t=t?a.createFrame(t):{}).root=e);return t}(t,i));var s=void 0,u=e.useBlockParams?[]:void 0;function c(t){return""+e.main(r,t,r.helpers,r.partials,i,u,s)}return e.useDepths&&(s=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(c=l(e.main,c,r,n.depths||[],i,u))(t,n)}return o.isTop=!0,o._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=r.merge(n.decorators,t.decorators)))},o._child=function(t,n,a,o){if(e.useBlockParams&&!a)throw new i.default("must pass block params");if(e.useDepths&&!o)throw new i.default("must pass parent depths");return s(r,t,e[t],n,0,a,o)},o},t.wrapProgram=s,t.resolvePartial=function(e,t,r){e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name];return e},t.invokePartial=function(e,t,r){var s=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var l=void 0;r.fn&&r.fn!==o&&function(){r.data=a.createFrame(r.data);var e=r.fn;l=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=a.createFrame(r.data),r.data["partial-block"]=s,e(t,r)},e.partials&&(r.partials=n.extend({},r.partials,e.partials))}();void 0===e&&l&&(e=l);if(void 0===e)throw new i.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},t.noop=o;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r("82EY")),i=function(e){return e&&e.__esModule?e:{default:e}}(r("AIJh")),a=r("dJlP");function s(e,t,r,n,i,a,s){function o(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(o=[t].concat(s)),r(e,t,e.helpers,e.partials,i.data||n,a&&[i.blockParams].concat(a),o)}return(o=l(r,o,e,s,n,a)).program=t,o.depth=s?s.length:0,o.blockParams=i||0,o}function o(){return""}function l(e,t,r,i,a,s){if(e.decorator){var o={};t=e.decorator(t,o,r,i&&i[0],a,s,i),n.extend(t,o)}return t}},d6sQ:function(e,t,r){"use strict";var n,i;n=[r("5cge"),r("MaNa"),r("jn94"),r("EUOL")],void 0===(i=function(e,t,r){return t.extend({className:"Embeddable__expandable",propsDefaults:{open:!1},propsEvents:{"change:open":function(e,t){this[t?"open":"close"]()}},open:function(){this._setCoords()},close:function(){this.$el.css("top","-100%")},anchorTo:function(e){this.$anchor=e,this._setCoords()},_setCoords:function(){var t=this.find("div.Embeddable__expandable__content");if(t.length&&this.$anchor&&this.props.get("open")){this._settedCoordsOnce||(this._setCoordsBound=e.bind(this._setCoords,this),r("height").future(this._setCoordsBound),r("width").future(this._setCoordsBound),this._settedCoordsOnce=!0);var n={},i=this.$anchor.offset(),a=i.left,s=i.top,o=s-t.outerHeight();o<0?(n.top=0,n.height=s+"px"):(n.top=o,n.height="auto");var l=t.outerWidth();r("width").read()-a-l<0?(n.left="initial",n.right=0):(n.left=a,n.right="initial"),this.$el.css(n)}}})}.apply(t,n))||(e.exports=i)},dJlP:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=u;var i=r("82EY"),a=n(r("AIJh")),s=r("hSGR"),o=r("/YDJ"),l=n(r("jYw0"));t.VERSION="4.0.11";t.COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};function u(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},s.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(e,t){if("[object Object]"===i.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===i.toString.call(e))i.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===i.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var c=l.default.log;t.log=c,t.createFrame=i.createFrame,t.logger=l.default},diAC:function(e,t,r){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r("AIJh"));t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new n.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},eJwn:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("ikLi")],void 0===(i=function(e,t){var r=e(document);function n(e){e._hoverIsTouchTriggered=!1}e.widget("ted.hover",{options:{hoverIdleDelay:4e3,hoverStartDelay:200,hoverStopDelay:400,hoverSwipeTolerance:5},hoverState:function(e){return t.isUndefined(e)||this._hoverChangeState(null,!!e),this._hoverIsOn},_hoverIsClicking:!1,_hoverIsOn:!1,_hoverIsTouchTriggered:!1,_hoverLastCoords:null,_hoverStartTimeout:null,_hoverIdleTimeout:null,_hoverStopTimeout:null,_hoverChangeStateBound:null,_hoverMoveChangeBound:null,_hoverMouseMoveThrottled:null,_hoverTouchOutBound:null,_create:function(){this._hoverInit()},_hoverEvents:function(){return{mouseenter:this._hoverMouseMoveThrottled,mousemove:this._hoverMouseMoveThrottled,mouseleave:this._hoverOut,touchstart:this._hoverTouchStart,touchend:this._hoverTouchEnd,touchmove:this._hoverTouchMove,touchcancel:this._hoverTouchCancel,mousedown:this._hoverMouseDown,mouseup:this._hoverMouseUp,click:this._hoverMouseClick}},_hoverMove:function(e){this._hoverIsOn?this._hoverMoveChange(e):this._hoverStartSetTimeout(e)},_hoverMoveChange:function(e){var t={x:e.pageX||null,y:e.pageY||null};"mousedown"!==e.type&&"touchstart"!==e.type&&this._hoverLastCoords&&t.x&&t.x===this._hoverLastCoords.x&&t.y===this._hoverLastCoords.y||(this._hoverLastCoords=t,this._hoverChangeState(e,!0),this._hoverIdleSetTimeout(e))},_hoverOut:function(e){this._hoverStartClearTimeout(),this._hoverStopSetTimeout(e)},_hoverMouseClick:function(e){this._hoverIsTouchTriggered||this._hoverIsOn&&this._trigger("tap",e)},_hoverMouseDown:function(){this._hoverIsTouchTriggered||(this._hoverIsClicking=!0,this._hoverIdleClearTimeout())},_hoverMouseMove:function(e){this._hoverIsTouchTriggered||this._hoverMove(e)},_hoverMouseUp:function(e){this._hoverIsTouchTriggered||(this._hoverIsClicking=!1,this._hoverIdleSetTimeout(e))},_hoverTouchStart:function(){this._hoverIsTouchTriggered=!0,this._hoverTouchStartCoords=null,this._hoverTouchEndCoords=null},_hoverTouchEnd:function(e){this._hoverTouchSafetyTimeout&&window.clearTimeout(this._hoverTouchSafetyTimeout),this._hoverTouchSafetyTimeout=t.delay(n,600,this),this._hoverTouchEndCoords&&function(e,t,r){return Math.abs(e[0]-t[0])>r||Math.abs(e[1]-t[1])>r}(this._hoverTouchStartCoords,this._hoverTouchEndCoords,this.options.hoverSwipeTolerance)||(this._hoverIsOn&&this._trigger("tap",e),this._hoverMoveChange(e))},_hoverTouchCancel:function(e){e.preventDefault()},_hoverTouchMove:function(e){var t=e.originalEvent.touches[0],r=[t.pageX,t.pageY];null===this._hoverTouchStartCoords?this._hoverTouchStartCoords=r:this._hoverTouchEndCoords=r,this._hoverIsOn&&this._hoverMove(e)},_hoverTouchOut:function(t){e(t.target).closest(this.element).length||this._hoverChangeState(t,!1)},_hoverChangeState:function(e,t){t=!!t,this._hoverIdleClearTimeout(),this._hoverStartClearTimeout(),this._hoverStopClearTimeout(),!t&&this._hoverIsClicking||t!==this._hoverIsOn&&(this._hoverIsOn=t,this[t?"_hoverStart":"_hoverStop"](e),t?this._on(r,{touchstart:this._hoverTouchOutBound}):this._off(r,"touchstart"))},_hoverStartSetTimeout:function(e){this._hoverStartTimeout||(this._hoverStartTimeout=t.delay(this._hoverMoveChangeBound,this.options.hoverStartDelay,e))},_hoverStartClearTimeout:function(){this._hoverStartTimeout&&(window.clearTimeout(this._hoverStartTimeout),this._hoverStartTimeout=null)},_hoverStopSetTimeout:function(e){this._hoverStopClearTimeout(),this._hoverStopTimeout=t.delay(this._hoverChangeStateBound,this.options.hoverStopDelay,e,!1)},_hoverStopClearTimeout:function(){this._hoverStopTimeout&&(window.clearTimeout(this._hoverStopTimeout),this._hoverStopTimeout=null)},_hoverIdleSetTimeout:function(e){this._hoverIdleClearTimeout(),!this._hoverIsClicking&&this.options.hoverIdleDelay&&(this._hoverIdleTimeout=t.delay(this._hoverChangeStateBound,this.options.hoverIdleDelay,e,!1))},_hoverIdleClearTimeout:function(){this._hoverIdleTimeout&&(window.clearTimeout(this._hoverIdleTimeout),this._hoverIdleTimeout=null)},_hoverInit:function(){this._hoverChangeStateBound=t.bind(this._hoverChangeState,this),this._hoverMoveChangeBound=t.bind(this._hoverMoveChange,this),this._hoverTouchOutBound=t.bind(this._hoverTouchOut,this),this._hoverMouseMoveThrottled=t.throttle(t.bind(this._hoverMouseMove,this),100,{leading:!0,trailing:!1}),this._on(this._hoverEvents())},_hoverDestroy:function(){this._off(this._hoverEvents())},_hoverStart:function(e){this._trigger("start",e)},_hoverStop:function(e){this._trigger("stop",e)}})}.apply(t,n))||(e.exports=i)},ecIC:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,r,n,i){return'\n<div class="vc">\n  <div class="vc__wrap">\n    <div class="Embeddable__player__object"></div>\n  </div>\n</div>\n'},useData:!0})},"f9M/":function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("twGK"),r("gJhO"),r("cd6c"),r("rc+f"),r("gBPQ"),r("npc9"),r("OXOu"),r("lDDm"),r("JNxy"),r("TEnB"),r("jn94"),r("j7o/"),r("lU1m"),r("ReFC"),r("ikLi"),r("eJwn"),r("EUOL")],void 0===(i=function(e,t,r,n,i,a,s,o,l,u,c,d,f,p,h,g){var m="player__container__video",v=e("<div></div>");function y(e){e.preventDefault(),e.stopPropagation()}var _=t.once(function(r,n){window.onYouTubeIframeAPIReady=t.bind(r,n),e.getScript("//www.youtube.com/iframe_api")});return e.widget("ted.player",e.ted.hover,{options:{breakpoint:!0,currentTalk:null,defaultSubtitles:!1,flashVars:{},hlsjsConfig:{maxStarvationDelay:2},hlsjsEvents:{},logLevel:2,metricsKey:null,mai:!0,maiAdUnitId:null,mode:l("playerMode")||null,modes:null,nativeLanguage:"en",startTrackingAt:0,swf:u("playerPath"),talks:null,capQualityToStage:!0,hideCursorDelay:1e3,uncropped:!0,soonThreshold:.1,recordInIdentity:!0},_isPlayerInitialized:!1,_isPlaying:!1,_addElements:function(){var e=this.element.find("div.player__container");e.length||(e=v.clone().addClass("player__container").appendTo(this.element));var t=e.find("div.player__container__placeholder");t.length||(t=v.clone().addClass("player__container__placeholder").appendTo(e)),t.wrap(v.clone().addClass("player__container__focus"));var r=t.closest("div.player__container__focus").addClass(m).attr({href:"#",role:"button","aria-label":"Play/Pause"}),n=e.find("div.player__container__cursor-killer");n.length||(n=v.clone().addClass("player__container__cursor-killer").appendTo(e)),this.elements={container:e,focal:r,placeholder:t,cursorKiller:n}},_breakpoint:function(e){this.options.breakpoint&&(e<1024?this.video.attr("controls","controls"):this.video.removeAttr("controls"))},_create:function(){this.options.currentTalk||(this.options.currentTalk=this.options.talks[0]),this._on({playerplay:function(){this._isPlaying=!0,this.element.addClass("player--playing").removeClass("player--paused")},playerpause:function(){this._isPlaying=!1,this.element.addClass("player--paused").removeClass("player--playing")},playerended:function(){this._isPlaying=!1,this.element.removeClass("player--paused").removeClass("player--playing")}});var e=this.talk();this._isInternal=Boolean(e&&e.resources&&e.resources.hls&&e.resources.hls.stream),this.options.hoverStopDelay=this.options.hideCursorDelay,new r(this),new n(this),new i(this),new a(this),this._initializePlayer()},_initializePlayer:function(){this._isPlayerInitialized||(this._isPlayerInitialized=!0,this.element.addClass("player "+(this.options.uncropped?"player--uncropped":"")),this._addElements(),this._isInternal?this._initializeInternalPlayer():"YouTube"===this.talk().external.service&&this._initializeYouTubePlayer(),this._hoverInit())},_initializeYouTubePlayer:function(){_(this._youTubeApiReady,this),this._on({playerrequestplay:function(){this._ytPlayer&&this._ytPlayer.playVideo&&this._ytPlayer.playVideo()}})},_youTubeApiReady:function(){var t=this.talk(),r="//www.youtube.com/embed/"+t.external.code+"?showinfo=0&enablejsapi=1&autoplay=0&origin="+location.origin;t.external.startTime&&(r+="&start="+t.external.startTime);var n=e("<iframe class="+m+" src="+r+" frameborder=0 allowfullscreen></iframe>");this.elements.placeholder.replaceWith(n),this._ytPlayer=new YT.Player(n.get(0),{events:{}}),this._trigger("domready")},_getMaiUrlOverrides:function(){return"staging"===u("env")||"development"===u("env")},_initializeInternalPlayer:function(){var r=l("dfptest"),n=l("maiAdUnitId");n&&(this.options.maiAdUnitId=n),this.options.talks=this.options.talks.map(function(e){if(r){var t=encodeURIComponent(r);e.resources.hls.adUrl=e.resources.hls.adUrl.replace(/(cust_params=[^&]+)&/,"$1%26dfptest%3D"+t+"&"),e.resources.hls.maiTargeting.dfptest=r}var n=Number(e.introDuration);return e.introDuration=Math.min(n,11.82),e.adDuration=0===n?0:3.33,e.postAdDuration=0===n?0:.83,e});var i={class:m,playsinline:"playsinline"};this.player=new c({attrs:i,dai:!1,defaultSubtitles:this.options.defaultSubtitles,el:this.elements.placeholder.get(0),flashVars:this.options.flashVars,hlsjsConfig:this.options.hlsjsConfig,hlsjsEvents:this.options.hlsjsEvents,logLevel:this.options.logLevel,mai:this.options.mai,maiAdUnitId:this.options.maiAdUnitId,maiUrlOverrides:this._getMaiUrlOverrides(),metricsKey:this.options.metricsKey,mode:this.options.mode,modes:this.options.modes,nativeLanguage:this.options.nativeLanguage,subproperty:this.options.subproperty,capQualityToStage:this.options.capQualityToStage,swf:this.options.swf,talks:this.options.talks}),this.element.addClass("player--"+this.mode()),o()&&this.element.addClass("player--is-mobile"),this._subscribeToPlayerEvents(),this._subscribeToKeyboardEvents(),this.player.one("ready.dom",t.bind(this._playerDomReady,this)),this.player.canFullScreen&&(this.player.on("enterFullScreen",t.bind(this._playerEnterFullScreen,this)),this.player.on("exitFullScreen",t.bind(this._playerExitFullScreen,this))),this.player.on("talk",t.bind(function(e){this.options.currentTalk=e,this._trigger("talk",null,e)},this)),this.player.on("bufferUnplayable",t.bind(this._bufferingStarted,this)),this.player.on("bufferPlayable",t.bind(this._bufferingStopped,this)),this.player.on("prolongedBuffer",t.bind(function(e){this._trigger("prolongedBuffer",null,{duration:e})},this)),this.player.on("prolongedRebuffer",t.bind(function(e){this._trigger("prolongedRebuffer",null,{duration:e})},this)),this._on({playercurrenttime:function(e,t){this._currentTime=t.currentTime},playerplaybackrate:function(e,t){this._playbackRate=t.playbackRate},playerpopout:function(e,t){this._popOut=t.popOut},playervolume:function(e,t){this._volume=t.volume},playerprogress:function(){var e;return function(t,r){!e&&r.progress>1-this.options.soonThreshold&&this.player.isLastTalk()&&(e=!0,this._trigger("soon"))}}(),playerpostrollcomplete:function(){this.player.isLastTalk()&&!this._queuedTalkId&&(this._queuedTalkId=this.options.currentTalk.id)},playerrequestplay:function(){var r=e("*:focus");r.closest(this.elements.focal).length||(this._oldFocus=r),this.elements.focal.attr("tabindex","1"),this._queuedTalkId?(e(this.player.el).attr("preload",""),this.player.playTalk(this._queuedTalkId),this._queuedTalkId=null,t.delay(s(this.player,"play"))):this.player.play()},playerplay:function(){this.elements.focal.focus()},playerrequestpause:function(){this.player.postrolling||this.player.pause()}})},_destroy:function(){this.options.breakpoint&&f("breakpoint").unsubscribe(this._breakpoint)},_playerDomReady:function(){var r=this,n=e(r.player.el);if(r.video=n,r.options.breakpoint&&f("breakpoint").subscribe(t.bind(r._breakpoint,r)),"hlsjs"===r.player.mode){var i="player-menu-"+Math.round(1e3*Math.random()),a=e('<menu type="context" id="'+i+'"></menu>'),s=e("<menuitem label=Metrics></menuitem>");s.on("click",function(){r._trigger("metricsToggle")}),a.append(s),n.append(a),n.attr("contextmenu",i)}r._trigger("domready")},_playerEnterFullScreen:function(){this.element.addClass("player--fullscreen"),this._fullscreenZone("activate")},_playerExitFullScreen:function(){this.element.removeClass("player--fullscreen"),this._fullscreenZone("deactivate")},_playerOption:function(e){return this.player&&this.player.options&&this.player.options[e]||null},_subscribeToKeyboardEvents:function(){this._on(this.elements.focal,{keydown:this._keyDown,keyup:this._keyUp})},_subscribeToPlayerEvents:function(){var e,r=this;this._on({playerrequestplay:function(){e=!0,r._hasPlayBeenRequested||(r._hasPlayBeenRequested=!0,r._showBuffering())},playerplay:function(){e=!1}}),t.forEach(["ad","currentTime","duration","ended","enterFullScreen","error","exitFullScreen","pause","play","progress","ready","seeked","seeking","volume","muted","idle","complete","talkComplete","prerollStart","prerollComplete","tedStart","postrollStart","postrollComplete","postrollDuration","postrollRemaining","adBlock","bufferPlayable","bufferUnplayable","subtitle","playbackRate","popOut","playToken","metricsData","metricsToggle"],function(t){r.player.on(t,function(n){var i={};"play"!==t||e||r._trigger("requestplay"),i[t]=n,r._trigger(t,null,i),r["_"+t]=n})})},_hoverStart:function(e){this.element.addClass("player--show-cursor"),this._trigger("hoverstart",e)},_hoverStop:function(e){this.element.removeClass("player--show-cursor"),this._trigger("hoverstop",e)},_showBuffering:function(){this._spinner||(this._spinner=new g({lines:13,length:13,width:5,radius:16,color:"#FFF",trail:50,shadow:!0})),this._isBuffering&&this._hasPlayBeenRequested?this._spinner.spin(this.element.get(0)):this._spinner.stop()},_bufferingStarted:function(){this._isBuffering=!0,this._showBuffering()},_bufferingStopped:function(){this._isBuffering=!1,this._showBuffering()},_keyDown:function(t){var r=e.ui.keyCode,n=t.ctrlKey||t.shiftKey||t.altKey,i=this.options.currentTalk&&this.options.currentTalk.duration||0,a=this._currentTime||0,s=this.volume()||0;switch(t.keyCode){case r.ENTER:case r.NUMPAD_ENTER:case r.SPACE:this.toggle(),y(t);break;case r.DOWN:n?this.mute(!0):this.volume(s-.1),y(t);break;case r.UP:n?this.mute(!1):this.volume(s+.1),y(t);break;case r.LEFT:n?this.seek(a-.1*i):this.seek(a-15),y(t);break;case r.RIGHT:n?this.seek(a+.1*i):this.seek(a+15),y(t);break;case r.HOME:this.seek(0),y(t);break;case r.END:this.seek(i-1),y(t);break;case r.TAB:var o=this._oldFocus;this._tabDown||!o||o.is(":hidden")||o.is(":disabled")||(o.focus(),y(t)),this._oldFocus=null,this._tabDown=!0}},_keyUp:function(t){t.keyCode===e.ui.keyCode.TAB&&(this._tabDown=!1)},_fullscreenZone:function(e){var t=this.player.fullScreenElement,r=this._fullscreenZoneObj;t&&(r||(r=new p(t),this._fullscreenZoneObj=r),r[e]())},mode:function(){return this._isInternal?this.player.options.mode:"external"},talk:function(e){return arguments.length&&(this.queue(e),this._trigger("requestplay")),this.options.currentTalk},talks:function(){return this.player.talks},toggle:function(){this[this._isPlaying?"pause":"play"]()},play:function(){this._trigger("requestplay")},playNext:function(){this._trigger("requestnext"),this.player.playNext()},playPrev:function(){this._trigger("requestprev"),this.player.playPrev()},pause:function(){this._trigger("requestpause")},_playbackRate:null,playbackRate:function(e){return arguments.length&&(this.player.playbackRate(e),this._playbackRate=e),this._playbackRate},_popOut:!1,popOut:function(e){return arguments.length&&(this.player.popOut(e),this._popOut=e),this._popOut},queue:function(e){this._queuedTalkId=e},sendAds:function(e){this.player.sendAds(e)},seek:function(e,t){this.options.startTrackingAt=t?e:0,this.player.seek(e)},_subtitle:null,subtitle:function(e){if(arguments.length){var r=!!e&&t.find(this.talk().languages,{languageCode:e});this.player.subtitle(e),this._subtitle=r}return this._subtitle},_volume:null,volume:function(e){return arguments.length&&this.player.volume(e),this._volume},_muted:null,mute:function(e){return arguments.length&&this.player.mute(e),this._muted},toggleFullScreen:function(){var t=e("html,body"),r=e(document).scrollTop(),n=e(this.element).offset().top;r>n&&t.scrollTop(n),this[this.player.isFullScreen?"cancelFullScreen":"requestFullScreen"](this.elements.container.get(0))},requestFullScreen:function(e){this.player.requestFullScreen(e)},cancelFullScreen:function(e){this.player.cancelFullScreen(e)},isControllable:function(){return this._isInternal},isFullScreen:function(){return!!this._isInternal&&this.player.isFullScreen},canFullScreen:function(){return!!this._isInternal&&this.player.canFullScreen},canPlaybackRate:function(){return!!this._isInternal&&this.player.canPlaybackRate},canPopOut:function(){return!!this._isInternal&&this.player.canPopOut},canSubtitle:function(){return this._isInternal&&!!this.player.canSubtitle},canVolume:function(){return this._isInternal&&!!this.player.canVolume},capQualityToStage:function(e){this.options.capQualityToStage=e,this.player.capQualityToStage(e)},nativeControls:function(e){this.player.nativeControls(e)},maiAdUnitId:function(){return this._playerOption("maiAdUnitId")}}),function(t,r){return e(t).player(r)}}.apply(t,n))||(e.exports=i)},fsP3:function(e,t,r){"use strict";var n,i;n=[r("O074")],void 0===(i=function(e){return function t(r,n,i){var a,s;for(a=0,s=n.length;a<s;a++)e.isArray(n[a])?t(r,n[a],i):n[a].apply(r,i)}}.apply(t,n))||(e.exports=i)},gBPQ:function(e,t,r){"use strict";var n;void 0===(n=function(){var e=function(e,t){var r=Array.prototype.slice.call(arguments,2);return function(){return e[t].apply(e,r)}};return e.create=function(e){return function(){var t=arguments,r=function(){return e.apply(this,t)};return r.prototype=e.prototype,new r}},e.get=function(e){return function(t){return t.get&&"function"==typeof t.get?t.get(e):t[e]&&"function"==typeof t[e]?t[e].call(t):t[e]}},e.splat=function(){var t=Array.prototype.slice.call(arguments);return function(r){for(var n=[],i=0;i<t.length;i++)n.push(e.get(t[i]).call(r));return n}},e.send=function(e){var t=Array.prototype.slice.call(arguments,1);return function(r){return r[e].apply(r,t)}},e.and=function(){var e=Array.prototype.slice.call(arguments);return function(t){for(var r=!0,n=0;n<e.length;n++)r=r&&e[n].call(null,t);return r}},e.not=function(e){return function(){return!e.apply(null,arguments)}},e.ascending=function(e,t){return e-t},e.descending=function(e,t){return t-e},e.falsey=e.not(e.truthy=function(e){return!!e}),e}.apply(t,[]))||(e.exports=n)},gJhO:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("meAz"),r("lDDm")],void 0===(i=function(e,t,r,n){function i(e){var t=n("zone")||{};this._data={lastMetaTalkId:null,lastPlayTalkId:null,vmAPIKey:t.api_key||"unknown"},this._widget=e,this._addHandlers()}return i.prototype._sendVM=function(r){var n=t.extend({},r,{share_token:this._widget.options.shareToken});e.post("/talks/"+this._widget.talk().id+"/views",{view:n},null,"json")},i.prototype._recordViewID=function(){this._widget.options.recordInIdentity&&r.get()&&e.post("/talks/"+this._widget.talk().id+"/user_views",{},null,"json")},i.prototype._recordViewVM=function(){var e=this._widget.mode();if("hls"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_html5_hls"}),"hlsjs"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_html5_hlsjs"}),"flash"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_flash_hls"}),"h264"===e){var t=this._widget.options.currentTalk.resources.h264[0].bitrate;this._sendVM({apikey:this._data.vmAPIKey,format:"mp4",quality:t?t+"k":"variant",service:"ted_player_html5_mp4"})}},i.prototype._onTalkPlay=function(){this._recordViewID(),this._recordViewVM()},i.prototype._addHandlers=function(){var e=this,t={playerrequestplay:function(){e._widget._ytPlayer&&e._widget._ytPlayer.playVideo&&e._sendVM({apikey:e._data.vmAPIKey,service:""})},playerplay:function(){var t=e._widget.options.currentTalk.id;e._data.lastPlayTalkId!==t&&(e._onTalkPlay(),e._data.lastPlayTalkId=t)}};this._handlers=t,this._widget._on(t)},i}.apply(t,n))||(e.exports=i)},ggSm:function(e,t,r){var n=r("mp5j");function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var o=null!=t?t:e.nullContext||{},l=e.escapeExpression;return'\n<div class="Embeddable__controls__bar">\n  <a class="Embeddable__button Embeddable__controls__unskip" href="#">\n    '+l(i(r("3fiq")).call(o,"control-unskip","Previous talk","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__play" href="#">\n    '+l(i(r("3fiq")).call(o,"control-play","Play","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__pause" href="#">\n    '+l(i(r("3fiq")).call(o,"control-pause","Pause","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__skip" href="#">\n    '+l(i(r("3fiq")).call(o,"control-skip","Next talk","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__volume" href="#">\n    '+l(i(r("3fiq")).call(o,"control-volume","Volume","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <span class="Embeddable__controls__timing">\n    <span class="Embeddable__controls__current">0:00</span>/<span class="Embeddable__controls__duration">0:00</span>\n  </span>\n\n  <div class="Embeddable__controls__secondary">\n    <a class="Embeddable__button Embeddable__controls__subtitles" href="#">\n      '+l(i(r("3fiq")).call(o,"control-subtitles","Subtitles","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__playlist" href="#">\n      '+l(i(r("3fiq")).call(o,"control-playlist","Show talks","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__fullscreen" href="#">\n      '+l(i(r("3fiq")).call(o,"control-fullscreen","Full screen","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__outbound" href="htps://www.ted.com/" target="_blank">\n      '+l(i(r("3fiq")).call(o,"outbound","Open on TED.com","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__smallscreen" href="#">\n      '+l(i(r("3fiq")).call(o,"control-fullscreen-exit","Exit full screen","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+"\n    </a>\n  </div>\n</div>\n"},useData:!0})},h13g:function(e,t,r){"use strict";var n,i;n=[r("MaNa")],void 0===(i=function(e){return e.extend({className:"Embeddable__play-button g-button-play",propsDefaults:{enabled:!1,visible:!1},propsEvents:{"change:enabled":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__play-button--enabled")},"change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__play-button--visible")}}})}.apply(t,n))||(e.exports=i)},hGk8:function(e,t,r){"use strict";t.__esModule=!0;var n=r("82EY");t.default=function(e){e.registerDecorator("inline",function(e,t,r,i){var a=e;return t.partials||(t.partials={},a=function(i,a){var s=r.partials;r.partials=n.extend({},s,t.partials);var o=e(i,a);return r.partials=s,o}),t.partials[i.args[0]]=i.fn,a})},e.exports=t.default},hSGR:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),a.default(e),s.default(e),o.default(e),l.default(e),u.default(e),c.default(e)};var i=n(r("ZyKY")),a=n(r("20JI")),s=n(r("diAC")),o=n(r("7UkH")),l=n(r("IVfQ")),u=n(r("iRzr")),c=n(r("k+yp"))},iRzr:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default},ikLi:function(e,t,r){var n,i;n=[r("O074")],void 0===(i=function(e){return function(e,t){var r=0,n=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var r,n=0;null!=(r=t[n]);n++)try{e(r).triggerHandler("remove")}catch(e){}i(t)},e.widget=function(t,r,n){var i,a,s,o,l={},u=t.split(".")[0];t=t.split(".")[1],i=u+"-"+t,n||(n=r,r=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[u]=e[u]||{},a=e[u][t],s=e[u][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(o=new r).options=e.widget.extend({},o.options),e.each(n,function(t,n){e.isFunction(n)?l[t]=function(){var e=function(){return r.prototype[t].apply(this,arguments)},i=function(e){return r.prototype[t].apply(this,e)};return function(){var t,r=this._super,a=this._superApply;return this._super=e,this._superApply=i,t=n.apply(this,arguments),this._super=r,this._superApply=a,t}}():l[t]=n}),s.prototype=e.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||t},l,{constructor:s,namespace:u,widgetName:t,widgetFullName:i}),a?(e.each(a._childConstructors,function(t,r){var n=r.prototype;e.widget(n.namespace+"."+n.widgetName,s,r._proto)}),delete a._childConstructors):r._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(t){for(var r,i,a=n.call(arguments,1),s=0,o=a.length;s<o;s++)for(r in a[s])i=a[s][r],a[s].hasOwnProperty(r)&&void 0!==i&&(e.isPlainObject(i)?t[r]=e.isPlainObject(t[r])?e.widget.extend({},t[r],i):e.widget.extend({},i):t[r]=i);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(a){var s="string"==typeof a,o=n.call(arguments,1),l=this;return a=!s&&o.length?e.widget.extend.apply(null,[a].concat(o)):a,s?this.each(function(){var r,n=e.data(this,i);return n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(r=n[a].apply(n,o))!==n&&void 0!==r?(l=r&&r.jquery?l.pushStack(r.get()):r,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,i);t?t.option(a||{})._init():e.data(this,i,new r(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,r){var n,i,a,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},t=(n=t.split(".")).shift(),n.length){for(i=s[t]=e.widget.extend({},this.options[t]),a=0;a<n.length-1;a++)i[n[a]]=i[n[a]]||{},i=i[n[a]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=r}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=r}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,r,n){var i,a=this;"boolean"!=typeof t&&(n=r,r=t,t=!1),n?(r=i=e(r),this.bindings=this.bindings.add(r)):(n=r,r=this.element,i=this.widget()),e.each(n,function(n,s){function o(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?a[s]:s).apply(a,arguments)}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?i.delegate(c,u,o):r.bind(u,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var r=this;return setTimeout(function(){return("string"==typeof e?r[e]:e).apply(r,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,r,n){var i,a,s=this.options[t];if(n=n||{},(r=e.Event(r)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r.target=this.element[0],a=r.originalEvent)for(i in a)i in r||(r[i]=a[i]);return this.element.trigger(r,n),!(e.isFunction(s)&&!1===s.apply(this.element[0],[r].concat(n))||r.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,r){e.Widget.prototype["_"+t]=function(n,i,a){"string"==typeof i&&(i={effect:i});var s,o=i?!0===i||"number"==typeof i?r:i.effect||r:t;"number"==typeof(i=i||{})&&(i={duration:i}),s=!e.isEmptyObject(i),i.complete=a,i.delay&&n.delay(i.delay),s&&e.effects&&e.effects.effect[o]?n[t](i):o!==t&&n[o]?n[o](i.duration,i.easing,a):n.queue(function(r){e(this)[t](),a&&a.call(n[0]),r()})}})}(e),e}.apply(t,n))||(e.exports=i)},"j7o/":function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("me3u")],void 0===(i=function(e,t){var r=e(window);function n(t){this.$el=e(t)}function i(e){e.preventDefault()}return n.__reset=function(){t.assign(n,{__active:void 0,__isListening:!1,__zones:[]})},n.__addZone=function(e){n.__zones.push(e),n.__setActive(),n.__startListening()},n.__removeZone=function(e){n.__zones=t.without(n.__zones,e),n.__setActive(),n.__stopListening()},n.__setActive=function(){n.__active=t.last(n.__zones)},n.__startListening=function(){n.__isListening||n.__active&&(n.__startListeningInner(),n.__isListening=!0)},n.__startListeningInner=function(){r.on("keydown",n.__keyDown)},n.__stopListening=function(){n.__isListening&&(n.__active||(n.__stopListeningInner(),n.__isListening=!1))},n.__stopListeningInner=function(){r.off("keydown",n.__keyDown)},n.__keyDown=function(r){var a=n.__active;if(a&&r.keyCode===e.ui.keyCode.TAB){var s=r.target,o=a.$el,l=o.find(":tabbable"),u=l.filter(":first"),c=l.filter(":last");s!==c[0]&&s!==o[0]||r.shiftKey?s!==u[0]&&s!==o[0]||!r.shiftKey?-1===t.indexOf(l,s)&&(u.focus(),i(r)):(c.focus(),i(r)):(u.focus(),i(r))}},t.assign(n.prototype,{activate:function(){return this._recordFocus(),n.__addZone(this),this},deactivate:function(){return n.__removeZone(this),this._restoreFocus(),this},_recordFocus:function(){this.$focus=e(":focus")},_restoreFocus:function(){this.$focus&&this.$focus.length&&this.$focus.focus()}}),n.__reset(),n}.apply(t,n))||(e.exports=i)},jCYH:function(e,t,r){"use strict";var n;void 0===(n=function(){return window.Modernizr}.call(t,r,t,e))||(e.exports=n)},jYw0:function(e,t,r){"use strict";t.__esModule=!0;var n=r("82EY"),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];console[t].apply(console,n)}}};t.default=i,e.exports=t.default},jn94:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("fsP3"),r("EFFf")],void 0===(i=function(e,t,r){var n={};function i(i){var a=i&&n[i];return a||(a=function(e){var n,i={publish:e.fire,subscribe:e.add,unsubscribe:e.remove},a=null;return e.add(function(e){a=e}),i.read=function(){return a},i.publishUnique=function(){if(!window.JSON)return r("JSON object not available. You may need to shim it on this client."),!1;var t=Array.prototype.slice.call(arguments,0),i=JSON.stringify(t);i!==n&&(e.fire.apply(e,t),n=i)},i.once=function(){var r=arguments;return e.add(function n(){t(e,r,arguments),e.remove(n)})},i.future=function(){var r,n=arguments,i=!1;return r=e.add(function(){i&&t(e,n,arguments)}),i=!0,r},i}(e.Callbacks("memory")),i&&(n[i]=a)),a}return i._reset=function(){n={}},i}.apply(t,n))||(e.exports=i)},"k+yp":function(e,t,r){"use strict";t.__esModule=!0;var n=r("82EY");t.default=function(e){e.registerHelper("with",function(e,t){n.isFunction(e)&&(e=e.call(this));var r=t.fn;if(n.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&((i=n.createFrame(t.data)).contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:i,blockParams:n.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default},l3gt:function(e,t,r){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},lDDm:function(e,t,r){"use strict";var n;void 0===(n=function(){return function(e){return window.TED?window.TED[e]:""}}.call(t,r,t,e))||(e.exports=n)},lU1m:function(e,t,r){var n;!function(i){"use strict";var a=function(e,t,r){return 1===arguments.length?a.get(e):a.set(e,t,r)};a._document=document,a._navigator=navigator,a.defaults={path:"/"},a.get=function(e){return a._cachedDocumentCookie!==a._document.cookie&&a._renewCache(),a._cache[e]},a.set=function(e,t,r){return(r=a._getExtendedOptions(r)).expires=a._getExpiresDate(void 0===t?-1:r.expires),a._document.cookie=a._generateCookieString(e,t,r),a},a.expire=function(e,t){return a.set(e,void 0,t)},a._getExtendedOptions=function(e){return{path:e&&e.path||a.defaults.path,domain:e&&e.domain||a.defaults.domain,expires:e&&e.expires||a.defaults.expires,secure:e&&void 0!==e.secure?e.secure:a.defaults.secure}},a._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},a._getExpiresDate=function(e,t){switch(t=t||new Date,typeof e){case"number":e=new Date(t.getTime()+1e3*e);break;case"string":e=new Date(e)}if(e&&!a._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},a._generateCookieString=function(e,t,r){var n=(e=encodeURIComponent(e))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return n+=(r=r||{}).path?";path="+r.path:"",n+=r.domain?";domain="+r.domain:"",n+=r.expires?";expires="+r.expires.toGMTString():"",n+=r.secure?";secure":""},a._getCookieObjectFromString=function(e){for(var t={},r=e?e.split("; "):[],n=0;n<r.length;n++){var i=a._getKeyValuePairFromCookieString(r[n]);void 0===t[i.key]&&(t[i.key]=i.value)}return t},a._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=t<0?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},a._renewCache=function(){a._cache=a._getCookieObjectFromString(a._document.cookie),a._cachedDocumentCookie=a._document.cookie},a._areEnabled=function(){return a._navigator.cookieEnabled||"1"===a.set("cookies.js",1).get("cookies.js")},a.enabled=a._areEnabled(),void 0===(n=function(){return a}.call(t,r,t,e))||(e.exports=n)}()},lzPn:function(e,t,r){"use strict";var n,i;n=[r("MaNa"),r("RjIu")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__ended",events:{"click a.Embeddable__ended__rewatch":function(){this.state.set("rewatchPending",!0)}},propsDefaults:{activated:!1,disableCampaigns:!1,hideNewsletter:!1},propsEvents:{"change:activated":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__ended--activated"),this.state.set("rewatchPending",!1)},"change:disableCampaigns":function(){this.render()},"change:hideNewsletter":function(){this.render()}},stateDefaults:{rewatchPending:!1},stateEvents:{"change:rewatchPending":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__ended--rewatching")}},render:function(){this.$el.html(t(this.props.toJSON()))}})}.apply(t,n))||(e.exports=i)},m8S9:function(e,t,r){"use strict";var n,i;n=[r("MaNa")],void 0===(i=function(e){return e.extend({className:"Embeddable__canonball ted-logo",tagName:"a",attributes:{href:"#",target:"_blank"},propsDefaults:{enabled:!1,visible:!1,url:"https://www.ted.com/"},propsEvents:{"change:url":"render","change:enabled":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__canonball--enabled")},"change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__canonball--visible")}},render:function(){var e=this.props.get("url")||this.propsDefaults.url;this.$el.attr("href",e)}})}.apply(t,n))||(e.exports=i)},me3u:function(e,t,r){var n,i;n=[r("O074")],void 0===(i=function(e){return function(e,t){var r=0,n=/^ui-id-\d+$/;function i(t,r){var n,i,s,o=t.nodeName.toLowerCase();return"area"===o?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(s=e("img[usemap=#"+i+"]")[0])&&a(s))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||r)&&a(t)}function a(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(r,n){return"number"==typeof r?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},r)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var r,n,i=e(this[0]);i.length&&i[0]!==document;){if(("absolute"===(r=i.css("position"))||"relative"===r||"fixed"===r)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(r){return!!e.data(r,t)}}):function(t,r,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),n=isNaN(r);return(n||r>=0)&&i(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,r){var n="Width"===r?["Left","Right"]:["Top","Bottom"],i=r.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function s(t,r,i,a){return e.each(n,function(){r-=parseFloat(e.css(t,"padding"+this))||0,i&&(r-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(r-=parseFloat(e.css(t,"margin"+this))||0)}),r}e.fn["inner"+r]=function(t){return void 0===t?a["inner"+r].call(this):this.each(function(){e(this).css(i,s(this,t)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?a["outer"+r].call(this,t):this.each(function(){e(this).css(i,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(r){return arguments.length?t.call(this,e.camelCase(r)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,r,n){var i,a=e.ui[t].prototype;for(i in n)a.plugins[i]=a.plugins[i]||[],a.plugins[i].push([r,n[i]])},call:function(e,t,r){var n,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<i.length;n++)e.options[i[n][0]]&&i[n][1].apply(e.element,r)}},hasScroll:function(t,r){if("hidden"===e(t).css("overflow"))return!1;var n,i=r&&"left"===r?"scrollLeft":"scrollTop";return t[i]>0||(t[i]=1,n=t[i]>0,t[i]=0,n)}})}(e),e}.apply(t,n))||(e.exports=i)},meAz:function(e,t,r){"use strict";var n,i;n=[r("lU1m")],void 0===(i=function(e){return{get:function(){return e.get("_ted_user_id")}}}.apply(t,n))||(e.exports=i)},mp5j:function(e,t,r){e.exports=r("Jikt").default},nDlD:function(e,t,r){"use strict";var n;void 0===(n=function(){return function(e,t){return function(r,n){this.toggleClass(e,t,n)}}}.call(t,r,t,e))||(e.exports=n)},nLfs:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("qri/"),r("QjU5")],void 0===(i=function(e,t){return e.widget("ted.scrubber",e.ted.slider,{options:{duration:null,player:null},_isScrubbing:!1,_isSeeking:!1,_progress:0,_create:function(){this.options.player&&this._setPlayer(),this.playheadElement=e("<div class=scrubber__playhead></div>").prependTo(this.element),this._super(),this.element.addClass("scrubber"),this.cursorElement.addClass("scrubber__cursor"),this.progressElement.addClass("scrubber__progress"),this._on(this._handleEvents)},_getData:function(t){return e.extend({cursor:t.value*this.options.duration,playhead:this._progress*this.options.duration,progress:this._progress,duration:this.options.duration},t)},_handleEvents:{mouseover:function(){this.element.addClass("scrubber--hover")},mouseout:function(){this.element.removeClass("scrubber--hover")},scrubberstart:function(){this.element.addClass("scrubber--active"),this._isScrubbing=!0},scrubberstop:function(){this.element.removeClass("scrubber--active"),this._isScrubbing=!1}},_setOption:function(e,t){this._super(e,t),"duration"===e&&this.progress(this._getData({value:this._progress}).playhead/t)},_setPlayer:function(){var r=this,n=e(this.options.player),i=n.player("talk");this.option("duration",i.duration),this._on({scrubberchange:function(e,r){n.player("seek",r.cursor),t.sendEvent("player","seek","scrubber",Math.round(r.cursor))}}),n.on("playertalk",function(e,t){r.option("duration",t.duration),r.progress(0)}).on("playerduration",function(e,t){r.option("duration",t.duration)}).on("playerseeking",function(){r._isSeeking=!0}).on("playerseeked",function(){r._isSeeking=!1}).on("playerprogress",function(e,t){r.progress(t.progress)})},isSeeking:function(e){return arguments.length&&(this._isSeeking=!!e),this._isScrubbing||this._isSeeking},progress:function(e){if(arguments.length){var t=100*e+"%";this.progressElement&&!this.isSeeking()&&this.progressElement.width(t),this.playheadElement&&this.playheadElement.width(t),this._progress=e,this._trigger("progress",null,this._getData({value:e}))}return this._progress}}),function(t,r){return e(t).scrubber(r)}}.apply(t,n))||(e.exports=i)},npc9:function(e,t,r){"use strict";var n;void 0===(n=function(){var e=/Android/g,t=/(iPad|iPhone|iPod)/g;function r(){return r.isIOS()||r.isAndroid()}function n(e){return!!r.ua.match(e)}return r.isIOS=function(){return n(t)},r.isAndroid=function(){return n(e)},r.ua=window.navigator&&window.navigator.userAgent||"",r}.apply(t,[]))||(e.exports=n)},pCvA:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"qri/":function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("Qp3a"),r("lDDm"),r("aJwO"),r("awRL"),r("DGZq"),r("meAz"),r("MgNp"),r("jn94"),r("OXOu"),r("EUOL")],void 0===(i=function(e,t,r,n,i,a,s,o,l,u,c){var d=[],f=window,p=[];function h(){var t=f[f.GoogleAnalyticsObject]||e.noop,r=d.slice.call(arguments);t===f.__gaIn||42===t.answer?t.apply(f,r):p.push(r)}function g(){var e=d.slice.call(arguments),n=this;return function(i){if(n.apply(h,e),t.has(i,"originalEvent")&&t.has(this,"nodeName")&&"click"===i.type)return r.call(this,i)}}function m(e){return e||window.location&&location.pathname+location.search||location.href.replace(/^[^/]*\/\/[^/]+/,"")}return t.assign(h,{send:t.partial(h,"send"),set:t.partial(h,"set"),sendEvent:t.partial(h,"send","event"),sendEventViaBeacon:t.partialRight(t.partial(h,"send","event"),{transport:"beacon"}),sendSocial:t.partial(h,"send","social"),sendNonInteraction:t.partialRight(t.partial(h,"send","event"),{nonInteraction:1})},function(e,t){return t.recall=g,t}),h.sendFlaggedVirtualPageview=function(e){var t=m(e);h.set("page",t+(-1===t.indexOf("?")?"?":"&")+"vp="),h.send("pageview")},h.sendVirtualPageview=function(e){h.set("page",m(e)),h.send("pageview")},h.sendTiming=function(e,r,a,s){if(t.isUndefined(a)&&(a=new Date),a&&a.constructor===Date){var o=n("headReady");if(o&&o.constructor!==Date)return void i.log("GA: headReady timing is missing");a=+a-+o}h("send","timing",e,r,a,s)},h.setContext=function(e,t){l.set(e,t)},h.setDimension=function(e,t){var r=String(e);r.match(/^dimension\d+$/)||(r=(n("gaDimensions")||{})[r]),r?h.set(r,t):i.log('GA: missing dimension: "'+e+'"')},f.setTimeout(function(){f[f.GoogleAnalyticsObject]},500),h(function(e){var t=e.get("buildHitTask");t&&e.set("buildHitTask",function(e){return t(function(e){var t=e&&e.get&&e.get("hitType"),r=l.get();return"pageview"===t&&r&&h.setDimension("sourceContext",r),e}(e))})}),function(){var e,t=0;u("breakpoint").subscribe(function(r){h.setDimension("breakpoint",r),t++&&h.sendEvent("breakpoint","change",e+"|"+r,t),e=r})}(),function(){var e=s.getClientId();e&&h.setDimension("gaClientId",e);var t=o.get()||a.getUserTedIdFromExplore();t&&h.setDimension("tedUserId",t);var r=a.getNormalized();h.setDimension("exploreState",r),u("auth.login").subscribe(function(e){h.setDimension("tedUserId",e.id)});var n=c("exploreCTASource");n&&h.setDimension("exploreCTASource",n)}(),h.send("pageview"),e(function(){e(document).on("click","a.ga-link",r(function(){return function(t){var r=e(this),n=e.extend(t||{},{category:r.data("ga-category"),action:r.data("ga-action"),label:r.data("ga-label")});h.sendEvent(n.category,n.action,n.label);var i=r.data("ga-context");i&&h.setContext(r.attr("href"),i)}.call(this,{action:"click",category:"site.link",label:this.href}),50}))}),h}.apply(t,n))||(e.exports=i)},"rc+f":function(e,t,r){"use strict";var n,i;n=[r("O074"),r("5cge"),r("Wd7D"),r("aJwO"),r("npc9")],void 0===(i=function(e,t,r,n,i){function a(e){return t.isUndefined(e)?"":e>9999?"9999":(e<0?"-":"")+("0000"+Math.floor(Math.abs(e))).slice(-4)+(""+e%1).slice(1,6)}function s(e){return t.isUndefined(e)?"":e}function o(e,r){return-1!==e&&!t.isUndefined(e)&&!t.isUndefined(r)&&e!==r&&(-1===r?"dynamic":r>e?"up":"down")}function l(e){this._widget=e,this._resetMarks(),this._addHandlers()}return l.prototype._log=function(t){var o="unknown";this.marks.talkComplete?o="complete":this.marks.playable?o="playable":!1===this.marks.playable&&(o="unplayable");var l,u="unknown";this.marks.rebuffering?u="rebuffering":this.marks.buffering&&(u="buffering"),"unplayable"===o&&this.marks.bufferingStarted&&this.marks.requested&&this.marks.bufferingStarted>this.marks.requested&&(l=(+new Date-+this.marks.bufferingStarted)/1e3);var c=e.extend({context:"ted-com-player-qa",pev:"014",playerMode:this._widget.mode(),bufferState:o,bufferType:u,bufferDuration:a(l),bufferFuture:a(this.marks.bufferFuture),bufferPast:a(this.marks.bufferPast),intolerantBufferFuture:a(this.marks.intolerantBufferFuture),intolerantBufferPast:a(this.marks.intolerantBufferPast),currentTime:a(this.marks.currentTime),playbackRate:this._widget.playbackRate(),playToken:s(this.marks.playToken),levelCurrent:s(this.marks.levelCurrent),levelNext:s(this.marks.levelNext),levelLoad:s(this.marks.levelLoad),levelNextLoad:s(this.marks.levelNextLoad),deviceType:i()?"mobile":"desktop",error:!1,throttled:!1,talkId:this.marks.talkId,message:"Video QA Event",multiple:!1},t||{});if(c.multiple||!this.marks[c.message]){this.marks[c.message]=!0;var d=r.getVariation("html5_video");if("desktop"===c.deviceType){switch(c.hvv=d,d){case"a":if("flash"!==c.playerMode)return;break;case"b":case"c":case"d":if("hlsjs"!==c.playerMode)return;break;default:return}delete c.multiple,n.log(c.message,c)}}},l.prototype._resetMarks=function(){this.marks={currentTime:"",talkId:""}},l.prototype._addHandlers=function(){var e=this;function t(){e.marks.playable&&e.marks.started&&e._log({message:"Play Start"})}var r={playercurrenttime:function(t,r){e.marks.currentTime=r.currentTime},playertalk:function(t,r){e.marks.talkId=r.id},playerbufferunplayable:function(){e.marks.playable=!1,e.marks.bufferingStarted=new Date},playerbufferplayable:function(){e.marks.playable=!0,e.marks.bufferingStarted=null,e.marks.buffering=!1,e.marks.rebuffering=!1,t()},playerplaytoken:function(t,r){e.marks.playToken=r.playToken},playerprolongedbuffer:function(t,r){var n=r.duration;e.marks.buffering=!0,!e.marks.talkComplete&&n&&n%2e3&&e._log({message:"Prolonged Buffer: "+n})},playerprolongedrebuffer:function(t,r){var n=r.duration;e.marks.rebuffering=!0,!e.marks.talkComplete&&n&&n%2e3&&e._log({message:"Prolonged Rebuffer: "+n})},playererror:function(t,r){r.error&&"Error playing video"===r.error.message&&3===r.error.code&&e._log({message:"Decode Error"})},playermetricsdata:function(t,r){if(r&&r.metricsData){var n=r.metricsData,i=e.marks.levelLoad,a=e.marks.levelNextLoad;e.marks.bandwidth=n.bandwidth,e.marks.bufferFuture=n.bufferLength,e.marks.bufferPast=n.backBufferLength,e.marks.intolerantBufferFuture=n.intolerantBufferLength,e.marks.intolerantBufferPast=n.intolerantBackBufferLength,e.marks.levelCurrent=n.currentLevel,e.marks.levelNext=n.nextLevel,e.marks.levelLoad=n.loadLevel,e.marks.levelNextLoad=n.nextLoadLevel;var s=o(a,n.nextLoadLevel);s&&e._log({multiple:!0,message:"Load Level Switching",levelDirection:s});var l=o(i,n.loadLevel);l&&e._log({multiple:!0,message:"Load Level Switched",levelDirection:l})}},playerrequestplay:function(){e.marks.requested=e.marks.requested||new Date,e._log({message:"Play Request"})},playerplay:function(){e.marks.started=!0,t()},playertalkcomplete:function(){e.marks.talkComplete=!0,e._log({message:"Talk Complete"})}};e._widget._on(r),e._widget._on(window,{beforeunload:function(){e.marks.requested&&e._log({message:"Talk Exit"})}})},l}.apply(t,n))||(e.exports=i)},sDZe:function(e,t,r){"use strict";var n,i;n=[r("ELgS"),r("1Jdc")],void 0===(i=function(e,t){e({q:window._q,modules:{embeddable:t}})}.apply(t,n))||(e.exports=i)},sv2i:function(e,t,r){"use strict";var n,i;n=[r("d6sQ"),r("1TA+"),r("nLfs")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__expandable Embeddable__volume",propsDefaults:{level:.5,muted:!1},propsEvents:{"change:level":"renderLevel","change:muted":"renderMuted"},initialize:function(){this.adoptView(e),this.initializeProps(),this.initializeState()},render:function(){return this.$el.html(t()),this.renderLevel(),this.find("div.Embeddable__volume__slider").scrubber({orientation:"vertical"}),this},renderLevel:function(){this.find("div.Embeddable__volume__meter__level").height(100*this.props.get("level")+"%")},renderMuted:function(){this.$el[this.props.get("muted")?"addClass":"removeClass"]("Embeddable__volume--muted")}})}.apply(t,n))||(e.exports=i)},twGK:function(e,t,r){"use strict";var n,i;n=[r("5cge"),r("jCYH"),r("qri/")],void 0===(i=function(e,t,n){function i(e){this._data={currentPlayerTime:null,hasPlayed:!1,hasRequested:!1,lastPlayedTalkId:null,lastChangedTalkId:null,lastLanguageCode:null,marks:null,markableProgress:[25,50,75,95],markableTimes:[10,30],postRolling:!1},this._widget=e,this._resetMarks(),this._addHandlers()}return i.prototype._resetMarks=function(){this._data.marks={times:{},progress:{},ads:{}}},i.prototype._incrementTalkViews=function(){var e=r("lU1m").get("__utma");if(e&&t.localstorage){var i=+e.split(".").pop(),a=window.localStorage,s=(a.getItem("talkViews")||"").split("|");2===s.length&&+s[0]===i?s[1]=+s[1]+1:s=[i,1],a.setItem("talkViews",s.join("|")),n.set("metric1",s[1])}},i.prototype._onTalkChange=function(){this._data.postRolling=!1,this._resetMarks(),this._incrementTalkViews()},i.prototype._addHandlers=function(){var e=this,t={playererror:function(e,t){var r=t.error,i="abortive"===r.severity;(i||"fatal"===r.severity)&&n.sendEvent("player",i?"error.abort":"error.fatal",r.message)},playerprolongedrebuffer:function(e,t){t.duration&&t.duration%2e3&&n.sendEvent("player.talk","prolongedRebuffer",t.duration)},playerenterfullscreen:function(){n.sendEvent("player","enterFullScreen"),n.setDimension("playerPresentation","fullscreen")},playerexitfullscreen:function(){n.sendEvent("player","exitFullScreen"),n.setDimension("playerPresentation","inline")},playerplay:function(){n.sendEvent("player","start",e._data.hasPlayed?"subsequent":"initial"),e._data.hasPlayed=!0},playerplaybackrate:function(e,t){n.sendEvent("player","playbackRate",t.playbackRate),n.setDimension("playbackRate",t.playbackRate)},playerplaytoken:function(e,t){n.setDimension("playToken",t.playToken)},playerpause:function(){n.sendEvent("player","pause",Math.round(e._data.currentPlayerTime))},playerpopout:function(e,t){n.sendEvent("player","popOut",t.popOut?"on":"off")},playerready:function(){var t=e._widget.mode();n.sendEvent("player","initialize",t,{nonInteraction:1}),n.setDimension("playerMode",t),n.setDimension("playerPresentation","inline")},playerrequestnext:function(){n.sendEvent("player","next",e._data.postRolling?"postroll":"talk")},playerrequestplay:function(){n.sendEvent("player","request",e._data.hasRequested?"subsequent":"initial"),e._data.hasRequested=!0},playerprogress:function(t,r){var i=100*r.progress,a=0,s=-1,o=e._data.markableProgress.length;if(!e._widget.player.postrolling)for(;e._data.marks&&++s<o&&a<i;)i>=(a=e._data.markableProgress[s])&&!e._data.marks.progress[a]&&(e._data.currentPlayerTime>e._widget.options.startTrackingAt&&n.sendEvent("player","progressPct",a+"%"),e._data.marks.progress[a]=!0)},playertalkcomplete:function(){e._data.marks&&!e._data.marks.progress[100]&&(n.sendEvent("player","progressPct","100%"),e._data.marks.progress[100]=!0,n.sendEvent("player.talk","complete",e._widget.options.currentTalk.id))},playercurrenttime:function(t,r){var i=r.currentTime,a=0,s=-1,o=e._data.markableTimes.length;if(e._data.currentPlayerTime=i,!e._widget.player.postrolling)for(;e._data.marks&&++s<o&&a<i;)i>=(a=e._data.markableTimes[s])&&!e._data.marks.times[a]&&(a>e._widget.options.startTrackingAt&&n.sendEvent("player","progressTime",a+" seconds"),e._data.marks.times[a]=!0)},playerprerollstart:function(){e._data.marks&&!e._data.marks.ads.prerollStart&&(n.sendEvent("player.preRoll","adStart"),e._data.marks.ads.prerollStart=!0)},playerprerollcomplete:function(){e._data.marks&&!e._data.marks.ads.prerollComplete&&(n.sendEvent("player.preRoll","adComplete"),e._data.marks.ads.prerollComplete=!0)},playertedstart:function(){var t=e._widget.options.currentTalk.id;t&&e._data.marks&&!e._data.marks.ads.tedStart&&(n.sendEvent("player.talk","start",t),e._data.marks.ads.tedStart=!0)},playerpostrollstart:function(){e._data.postRolling=!0,e._data.marks&&!e._data.marks.ads.postrollStart&&(n.sendEvent("player.postRoll","adStart"),e._data.marks.ads.postrollStart=!0)},playerpostrollcomplete:function(){e._data.postRolling=!1,e._data.marks&&!e._data.marks.ads.postrollComplete&&(n.sendEvent("player.postRoll","adComplete"),e._data.marks.ads.postrollStart=!0)},playeradblock:function(){n.sendEvent("player","adBlock")},playersubtitle:function(t,r){var i=String(r.subtitle&&r.subtitle.languageCode);i!==e._data.lastLanguageCode&&(i?n.sendEvent("player.subtitle","setLanguage",i):n.sendEvent("player.subtitle","disabled")),e._data.lastLanguageCode=i},playertalk:function(t,r){var n=r.id;e._data.lastChangedTalkId!==n&&(e._onTalkChange(),e._data.lastChangedTalkId=n)}};this._handlers=t,this._widget._on(t)},i}.apply(t,n))||(e.exports=i)},v4rn:function(e,t,r){},yAjw:function(e,t,r){"use strict";var n,i;n=[r("O074"),r("Jg3A")],void 0===(i=function(e,t){return t.$=e,t}.apply(t,n))||(e.exports=i)},yCnj:function(e,t,r){var n=r("mp5j");e.exports=(n.default||n).template({1:function(e,t,n,i,a){return'    <span class="thumb__duration">\n      '+e.escapeExpression(function(e){return e&&(e.__esModule?e.default:e)}(r("/xml")).call(null!=t?t:e.nullContext||{},null!=t?t.playDuration:t,{name:"formatDuration",hash:{},data:a}))+"\n    </span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,r,n,i){var a,s=e.lambda,o=e.escapeExpression;return'\n<span class="thumb thumb--'+o(s(null!=t?t.ratio:t,t))+" "+o(s(null!=t?t.cropClass:t,t))+'">\n  <span class="thumb__sizer"><span class="thumb__tugger"><img src="'+o(s(null!=t?t.src:t,t))+'" class="thumb__image" alt=""><span class="thumb__aligner"></span></span></span>\n\n'+(null!=(a=r.if.call(null!=t?t:e.nullContext||{},null!=t?t.playDuration:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"</span>\n"},useData:!0})},"z/83":function(e,t,r){"use strict";var n,i;n=[r("5cge"),r("yAjw"),r("HQPd")],void 0===(i=function(e,t,r){return t.Collection.extend({model:r,before:function(e){return this.at(this.indexOf(e)-1)},after:function(e){return this.at(this.indexOf(e)+1)},toPlayer:function(){return this.map(function(e){return e.toPlayer()})}})}.apply(t,n))||(e.exports=i)}},[[10,"manifest"]]]);